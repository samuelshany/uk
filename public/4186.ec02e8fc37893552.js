"use strict";(self.webpackChunkkey=self.webpackChunkkey||[]).push([[4186],{4605:(Z,v,o)=>{o.d(v,{h:()=>l});const l={api:{create:"supplier/create",get:"supplier",getUsers:"user",getById:"supplier/",update:"supplier/update/",delete:"supplier/",export:"supplier/export",exportExample:"supplier/export/example",import:"supplier/import",getCurrencies:"currency",getAccounts:"account",getCountries:"address/country",getStates:"address/state",getCities:"address/city",getCountryById:"address/country/",getStateById:"address/state/",getCityById:"address/city/"},page:{list:"",view:""}}},4186:(Z,v,o)=>{o.r(v),o.d(v,{PurchaseOrderModule:()=>q});var l=o(6814),d=o(2954),e=o(9291),g=o(5861);const f_api_create="purchase/create",f_api_get="http://localhost:4200/assets/api/data.json",f_api_getById="purchase/";var h=function(r){return r.create="Create Purchase",r.view="View Purchases",r.edit="Edit Purchase",r.delete="Delete Purchase",r}(h||{});const m=r=>{return{cols:[{field:"code",label:"code",class:""},{field:"product_name",label:"product_name"},{field:"delivery_date",label:"delivery_date"},{field:"quantity",label:"quantity"},{field:"supplier_name",label:"supplier_name"},{field:"note",label:"note",format:n=>n.note?n.note:"-"},{field:"total_amount",label:"total_amount"},{label:"action",actions:[{id:h.delete,icon:"comment-sms",class:"main-color",fun:(n=(0,g.Z)(function*(t){return yield r.purchaseRequestService.delete(t)}),function(a){return n.apply(this,arguments)})},{id:h.edit,icon:"envelope",class:"main-color",fun:function(){var n=(0,g.Z)(function*(t){return yield r.purchaseOrderService.openDialogToCreate(t)});return function(a){return n.apply(this,arguments)}}()},{id:h.edit,icon:"fa-check",class:"main-color",fun:function(){var n=(0,g.Z)(function*(t){return yield r.purchaseRequestService.delete(t)});return function(a){return n.apply(this,arguments)}}()},{id:h.edit,icon:"fa-ban",class:"main-color",fun:function(){var n=(0,g.Z)(function*(t){return yield r.purchaseRequestService.delete(t)});return function(a){return n.apply(this,arguments)}}()}]}],Request:f_api_get};var n};var C=o(6924),y=o(5946),u=o(5219),c=o(6223),s=o(4605),i=o(8763),M=o(5118),O=o(1771),L=o(5304),_=o(4779),P=o(3999);function E(r,n){if(1&r&&(e.TgZ(0,"div")(1,"p",16),e._uU(2),e.qZA()()),2&r){const t=n.$implicit;e.xp6(2),e.hij(" ",t.value,"")}}let U=(()=>{class r{constructor(t,a,p,A,S){this.fb=t,this.toastr=a,this.config=p,this.dialogRef=A,this.purchaseRequestService=S,this.SupplierConfig=s.h,this.formGroup=this.initForm()}initForm(){return this.fb.group({id:[Number],supplier:["",[c.kI.required]]})}fillDataToUpdate(t){this.formGroup.patchValue({id:t.id,name:t?.name,delivery_date:t?.delivery_date,Quantity:t?.Quantity,notes:t?.notes})}accept(){this.formGroup.invalid?this.formGroup.markAllAsTouched():this.purchaseRequestService.create(this.formGroup.value).subscribe({next:t=>{this.toastr.success(t.message),this.closePopup(!0)},error:t=>{this.errors=t.error.errors,this.toastr.error(t.error.message)}})}closePopup(t){this.dialogRef.close(t)}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(c.qu),e.Y36(i._W),e.Y36(M.S),e.Y36(M.E7),e.Y36(x))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-send-purchases-order"]],decls:19,vars:18,consts:[[1,"main"],[1,"header"],[1,"d-flex","justify-content-between"],[1,"icon"],["src","../assets/Tabs/Icon/Active/purchase -2.png","alt","img"],[3,"click"],[1,"fa-solid","fa-xmark","pointer","fs-1"],[1,"title"],[3,"formGroup"],[4,"ngFor","ngForOf"],[1,"row"],[1,"mb-5","col-sm-12"],["filterBy","name","ngDefaultControl","","formControlName","suppliers",3,"text","request","filter","optionLabel","optionValue","placeholder"],[1,"row","g-2","my-2"],[1,"col-12"],[3,"text","click"],[1,"text-error"]],template:function(t,a){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"span",3),e._UZ(4,"img",4),e.qZA(),e.TgZ(5,"span",5),e.NdJ("click",function(){return a.closePopup(!1)}),e._UZ(6,"i",6),e.qZA()(),e.TgZ(7,"p",7),e._uU(8),e.ALo(9,"translate"),e.qZA()(),e.TgZ(10,"app-form",8),e.YNc(11,E,3,1,"div",9),e.ALo(12,"keyvalue"),e.TgZ(13,"div",10)(14,"div",11),e._UZ(15,"app-multiselect",12),e.qZA(),e.TgZ(16,"div",13)(17,"div",14)(18,"app-button",15),e.NdJ("click",function(){return a.accept()}),e.qZA()()()()()()),2&t){let p;e.xp6(8),e.Oqu(e.lcZ(9,14,null!==(p=a.config.header)&&void 0!==p?p:"")),e.xp6(2),e.Q6J("formGroup",a.formGroup),e.xp6(1),e.Q6J("ngForOf",e.lcZ(12,16,a.errors)),e.xp6(4),e.Tol(""),e.Q6J("text","supplier")("request",a.SupplierConfig.api.get)("filter",!0)("optionLabel","name")("optionValue","id")("placeholder","select"),e.xp6(3),e.Tol("btn-filter"),e.Q6J("text",null==a.config.data?null:a.config.data.acceptLabel)}},dependencies:[l.sg,O.U,c.Fj,c.JJ,c.JL,c.sg,c.u,L.z,_.r,l.Nd,P.X$]}),r})();var I=o(1732),B=o(3562);let x=(()=>{class r{constructor(t,a,p){this.http=t,this.dynamicDialog=a,this.toastr=p}get(){return console.log("test"),this.http.get("http://localhost:4200/assets/api/data.json")}getById(t){return this.http.get(f_api_getById+t)}openDialogToCreate(t){var a=this;return(0,g.Z)(function*(){return yield a.dynamicDialog.showDialogWithComponent({showHeader:!1,header:"send_mail_to",data:{acceptLabel:"send",rejectLabel:"Cancel"},width:"480px",height:"h-100"},U)})()}create(t){return this.http.post(f_api_create,t)}}return r.\u0275fac=function(t){return new(t||r)(e.LFG(I.O),e.LFG(B.U),e.LFG(i._W))},r.\u0275prov=e.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();var J=o(2377),F=o(359),G=o(5077),R=o(3826);let j=(()=>{class r{constructor(t){this.purchaseOrderService=t,this.tableConfig=m(this),this.filtersConfig=[{field:"search",label:"search",type:C.W.TEXT,placeholder:"search"}],this.sortConfig=[{optionLabel:"label",optionValue:"field",key:"sort_by",placeholder:"sort_by",data:[{label:"Name",field:"name"},{label:"code",field:"code"}]},{optionLabel:"label",optionValue:"field",key:"sort_type",placeholder:"sort_type",data:[{label:y.q.asc,field:y.q.asc},{label:y.q.desc,field:y.q.desc}]}],this.permissions=h,this.icon=u.dv}openDialogToCreate(t){var a=this;return(0,g.Z)(function*(){(yield a.purchaseOrderService.openDialogToCreate(t))&&(a.tableConfig=m(a))})()}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(x))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-list-purchases-order"]],decls:15,vars:9,consts:[[1,"page-card"],[1,"d-flex","align-items-center","justify-content-between"],[1,"title"],[1,"d-flex","flex-row","align-items-center","justify-content-between"],[3,"SortConfig"],["sort",""],[3,"config"],["filter",""],[1,"table"],[3,"tableConfig","pagination","sort","filter"],[1,"d-flex","align-items-center","justify-content-center"],["pagination",""]],template:function(t,a){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"h5",2),e._uU(3),e.ALo(4,"translate"),e.qZA()(),e.TgZ(5,"div",3),e._UZ(6,"ukt-sort",4,5)(8,"ukt-filter",6,7),e.qZA(),e.TgZ(10,"div",8),e._UZ(11,"app-table",9),e.qZA(),e.TgZ(12,"div",10),e._UZ(13,"ukt-pagination",null,11),e.qZA()()),2&t){const p=e.MAs(7),A=e.MAs(9),S=e.MAs(14);e.xp6(3),e.Oqu(e.lcZ(4,7,"purchase_order_list")),e.xp6(3),e.Q6J("SortConfig",a.sortConfig),e.xp6(2),e.Q6J("config",a.filtersConfig),e.xp6(3),e.Q6J("tableConfig",a.tableConfig)("pagination",S)("sort",p)("filter",A)}},dependencies:[J.a,F.Q,G.z,R.x,P.X$]}),r})();const Q=[{path:"",component:(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-purchase-order"]],decls:1,vars:0,template:function(t,a){1&t&&e._UZ(0,"app-list-purchases-order")},dependencies:[j]}),r})()}];let W=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[d.Bz.forChild(Q),d.Bz]}),r})();var V=o(1471),Y=o(2115),D=o(4413),N=o(1890),X=o(1019),K=o(8096),z=o(1383),$=o(9624);let q=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[l.ez,D.e,V.X,$.U,Y.u,D.e,N.f,X.i,K.J,P.aw,z.m,W]}),r})()},1771:(Z,v,o)=>{o.d(v,{U:()=>g});var l=o(9291),d=o(6223);const e=["*"];let g=(()=>{class f{constructor(){this.onSubmit=new l.vpe}ngOnChanges(m){}getFormData(){return"function"==typeof this.formData?this.formData(this.formGroup.value):{...this.formGroup.value}}reset(){this.formGroup.reset()}submit(){if(this.formGroup.markAllAsTouched(),this.formGroup.invalid)return;const m=this.getFormData();this.onSubmit.emit(m)}ngAfterContentInit(){}ngAfterContentChecked(){}ngOnDestroy(){}}return f.\u0275fac=function(m){return new(m||f)},f.\u0275cmp=l.Xpm({type:f,selectors:[["app-form"]],inputs:{formGroup:"formGroup",formData:"formData"},outputs:{onSubmit:"onSubmit"},features:[l.TTD],ngContentSelectors:e,decls:2,vars:1,consts:[[3,"formGroup","ngSubmit"]],template:function(m,C){1&m&&(l.F$t(),l.TgZ(0,"form",0),l.NdJ("ngSubmit",function(){return C.submit()}),l.Hsn(1),l.qZA()),2&m&&l.Q6J("formGroup",C.formGroup)},dependencies:[d._Y,d.JL,d.sg]}),f})()},5304:(Z,v,o)=>{o.d(v,{z:()=>b});var l=o(67),d=o(6223),e=o(9291),g=o(1732),f=o(6814),h=o(4055),m=o(3999);function C(u,c){1&u&&e._UZ(0,"i",6)}function T(u,c){if(1&u&&(e.TgZ(0,"label"),e._uU(1),e.ALo(2,"translate"),e.TgZ(3,"span",4),e.YNc(4,C,1,0,"i",5),e.qZA()()),2&u){const s=e.oxw();e.xp6(1),e.hij("",e.lcZ(2,2,s.text)," "),e.xp6(3),e.Q6J("ngIf",s.control&&(null==s.control.errors?null:s.control.errors.required))}}function y(u,c){if(1&u&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&u){const s=e.oxw();e.Tol("text-danger"),e.xp6(1),e.Oqu(e.lcZ(2,3,s.object.keys(s.control.errors)[0]))}}let b=(()=>{class u extends l.t{constructor(s,i){super(),this.formGroupDirective=s,this.http=i,this.readOnly=!1,this.placeholder="",this.filterBy="",this.class="d-flex justify-content-between align-items-center",this.filter=!0,this.filterMatchMode="startsWith",this.object=Object}ngOnInit(){this.data||this.http.get(this.request).subscribe({next:s=>{if(!(s.meta&&s.meta.total>10))return this.data=s.data;this.http.getWithParam(this.request,{limit:s.meta.total}).subscribe({next:i=>this.data=i.data})},error:s=>{},complete:()=>{}})}writeValue(s){this.value=s}onValueChange(s){this.onChange(s.value),this.onTouched()}}return u.\u0275fac=function(s){return new(s||u)(e.Y36(d.sg,8),e.Y36(g.O))},u.\u0275cmp=e.Xpm({type:u,selectors:[["app-multiselect"]],inputs:{value:"value",text:"text",data:"data",optionLabel:"optionLabel",optionValue:"optionValue",editable:"editable",readOnly:"readOnly",placeholder:"placeholder",filterBy:"filterBy",request:"request",class:"class",filter:"filter",filterMatchMode:"filterMatchMode"},features:[e._Bn([{provide:d.JU,useExisting:u,multi:!0},{provide:d.Cf,useExisting:u,multi:!0}]),e.qOj],decls:5,vars:15,consts:[[3,"ngClass"],[4,"ngIf"],["appendTo","body",3,"options","ngModel","placeholder","optionLabel","optionValue","filterMatchMode","display","filter","filterBy","disabled","ngModelChange","onChange"],[3,"class",4,"ngIf"],[1,"required-aster"],["class","fa-solid fa-asterisk",4,"ngIf"],[1,"fa-solid","fa-asterisk"]],template:function(s,i){1&s&&(e.TgZ(0,"div",0),e.YNc(1,T,5,4,"label",1),e.TgZ(2,"p-multiSelect",2),e.NdJ("ngModelChange",function(O){return i.value=O})("onChange",function(O){return i.onValueChange(O)}),e.ALo(3,"translate"),e.qZA(),e.YNc(4,y,3,5,"span",3),e.qZA()),2&s&&(e.Q6J("ngClass",i.class),e.xp6(1),e.Q6J("ngIf",i.text),e.xp6(1),e.Q6J("options",i.data)("ngModel",i.value)("placeholder",e.lcZ(3,13,i.placeholder))("optionLabel",i.optionLabel)("optionValue",i.optionValue)("filterMatchMode",i.filterMatchMode)("display","chip")("filter",i.filter)("filterBy",i.optionLabel)("disabled",i.readOnly),e.xp6(2),e.Q6J("ngIf",i.control&&i.control.errors&&(i.control.touched||i.formGroupDirective.submitted)))},dependencies:[f.mk,f.O5,d.JJ,d.On,h.NU,m.X$]}),u})()}}]);