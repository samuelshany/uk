"use strict";(self.webpackChunkkey=self.webpackChunkkey||[]).push([[8465],{8465:(O,P,r)=>{r.r(P),r.d(P,{SupplierModule:()=>ut});var e=r(6814),_=r(8209),t=r(9291),b=r(5861);const l={api:{create:"purchase/create",get:"purchase?type=supplier",getTaxes:"tax",getSuppliers:"supplier",getProducts:"product",getStocks:"stock",getById:"purchase/",update:"purchase/update/",updateFiles:"purchase/updateFiles",delete:"purchase/",exportCvs:"purchase/export/cvs",exportPdf:"purchase/export/pdf",importAccount:"purchase/import"},page:{list:"",update:"update/:id",updateAttachment:"update-attachment/:id",create:"new",view:"view/:id"}};var m=function(n){return n.create="Create Purchase",n.view="View Purchases",n.edit="Edit Purchase",n.delete="Delete Purchase",n}(m||{});const x=n=>{return{cols:[{field:"id",label:"code",class:""},{field:"invoice_number",label:"invoice_number"},{field:"date",label:"date"},{field:"total",label:"total_sales_amount",format:s=>s.total?s.total:0},{field:"is_collected",label:"status",format:s=>s.is_collected?"collected":"pending",custom_class_cel:s=>"0"==s.is_collected?"text-active":"text-non-active",class:"text-center"},{label:"action",actions:[{id:m.delete,icon:"money-bill-wave",class:"main-color",customClassCondition:s=>0!=s?.is_collected?"":"d-none"},{id:m.delete,icon:"eye",class:"main-color"},{id:m.delete,icon:"trash",class:"main-color",fun:(s=(0,b.Z)(function*(o){return yield n.supplierPurchaseService.delete(o)}),function(i){return s.apply(this,arguments)})},{id:m.edit,icon:"pen-to-square",class:"main-color",route:"update"}]}],Request:l.api.get};var s};var A=r(5219),C=r(1732),N=r(3562),S=r(8763);let T=(()=>{class n{constructor(o,i,c){this.http=o,this.dynamicDialog=i,this.toastr=c}getSuppliersPurchase(o){return this.http.get(l.api.get)}getById(o){return this.http.get(l.api.getById+o)}getTaxes(o){return this.http.get(l.api.getTaxes)}getSuppliers(o){return this.http.get(l.api.getSuppliers)}getProducts(o){return this.http.get(l.api.getProducts)}getStocks(o){return this.http.get(l.api.getStocks)}create(o){return this.http.post(l.api.create,o)}delete(o){var i=this;return(0,b.Z)(function*(){const c={showHeader:!1,header:"delete",data:{message:"do_you_want_to_delete",acceptLabel:"delete",rejectLabel:"close",data:{...o}},width:"300px",height:"164px"};if(!(yield i.dynamicDialog.confirm(c)))return!1;try{const f=yield i.http.delete(l.api.delete+o.id).toPromise();return i.toastr.success(f.message),f}catch(f){throw i.toastr.error(f.error.message),f}})()}update(o){return this.http.post(l.api.update+o.get("id"),o)}updateFiles(o){return this.http.post(l.api.updateFiles,o)}}return n.\u0275fac=function(o){return new(o||n)(t.LFG(C.O),t.LFG(N.U),t.LFG(S._W))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var M=r(2377),J=r(359),w=r(4779),p=r(8275),d=r(3999);function a(n,s){if(1&n&&t._UZ(0,"app-button",9),2&n){const o=t.oxw();t.Tol("btn-filter mx-2"),t.Q6J("text","new")("icon",o.icon.PLUS)("iconPos","left")}}const v=function(n){return[n]};let u=(()=>{class n{constructor(o){this.supplierPurchaseService=o,this.tableConfig=x(this),this.permissions=m,this.icon=A.dv}}return n.\u0275fac=function(o){return new(o||n)(t.Y36(T))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-list-supplier-purchase"]],decls:12,vars:8,consts:[[1,"d-flex","align-items-center","justify-content-between"],[1,"title"],[1,"d-flex"],["routerLink","new",3,"text","class","icon","iconPos",4,"hasPermissions"],[1,"d-flex","flex-row","align-items-center","justify-content-between"],[1,"table"],[3,"tableConfig","pagination"],[1,"d-flex","align-items-center","justify-content-center"],["pagination",""],["routerLink","new",3,"text","icon","iconPos"]],template:function(o,i){if(1&o&&(t.TgZ(0,"div",0)(1,"h5",1),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"div",2),t.YNc(5,a,1,5,"app-button",3),t.qZA()(),t._UZ(6,"div",4),t.TgZ(7,"div",5),t._UZ(8,"app-table",6),t.qZA(),t.TgZ(9,"div",7),t._UZ(10,"ukt-pagination",null,8),t.qZA()),2&o){const c=t.MAs(11);t.xp6(2),t.Oqu(t.lcZ(3,4,"supplier_purchase_list")),t.xp6(3),t.Q6J("hasPermissions",t.VKq(6,v,i.permissions.create)),t.xp6(3),t.Q6J("tableConfig",i.tableConfig)("pagination",c)}},dependencies:[_.rH,M.a,J.Q,w.r,p.z,d.X$]}),n})(),I=(()=>{class n{}return n.\u0275fac=function(o){return new(o||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-supplier"]],decls:2,vars:0,consts:[[1,"page-card"]],template:function(o,i){1&o&&(t.TgZ(0,"div",0),t._UZ(1,"app-list-supplier-purchase"),t.qZA())},dependencies:[u]}),n})(),F=(()=>{class n{constructor(o){this.supplierPurchaseService=o}resolve(o){return this.supplierPurchaseService.getById(o.params.id)}}return n.\u0275fac=function(o){return new(o||n)(t.LFG(T))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var U=r(8645),Z=r(9773),h=r(6223),L=r(6785),k=r(1771),E=r(8614),Q=r(1904),D=r(3838),G=r(6098),j=r(4896);function Y(n,s){if(1&n&&(t.TgZ(0,"div",6),t._UZ(1,"app-button",37),t.qZA()),2&n){const o=t.oxw();t.xp6(1),t.Q6J("text","update_attachment")("iconPos","left")("icon","fa-solid fa-check")("routerLink","/key/purchase/supplier/update-attachment/"+o.activeId)}}function R(n,s){if(1&n&&(t.TgZ(0,"div",38),t._uU(1),t.qZA()),2&n){const o=s.$implicit;t.xp6(1),t.hij(" ",o.value," ")}}function K(n,s){if(1&n&&(t.TgZ(0,"p",39),t._uU(1),t.qZA()),2&n){const o=t.oxw();t.xp6(1),t.Oqu(null==o.errors?null:o.errors.assigned_id[0])}}function B(n,s){if(1&n&&(t.TgZ(0,"p",39),t._uU(1),t.qZA()),2&n){const o=t.oxw();t.xp6(1),t.Oqu(null==o.errors?null:o.errors.assigned_id[0])}}function V(n,s){if(1&n){const o=t.EpF();t.TgZ(0,"div",12)(1,"app-dropdown",40),t.NdJ("onDropDownChange",function(c){t.CHM(o);const g=t.oxw();return t.KtG(g.getPaymentAccounts(c))}),t.qZA()()}if(2&n){const o=t.oxw();t.xp6(1),t.Tol("d-flex flex-column justify-content-between"),t.Q6J("text","payment_method")("request",o.PaymentConfig.api.get)("optionLabel","name")("optionValue","id")("placeholder","select")}}function H(n,s){if(1&n&&(t.TgZ(0,"div",12),t._UZ(1,"app-dropdown",41),t.qZA()),2&n){const o=t.oxw();t.xp6(1),t.Tol("d-flex flex-column justify-content-between"),t.Q6J("text","payment_accounts")("data",o.payment_accounts)("optionLabel","name_code")("optionValue","id")("placeholder","select")}}function W(n,s){if(1&n){const o=t.EpF();t.TgZ(0,"div",42)(1,"app-file-upload",43),t.NdJ("onValueChange",function(c){t.CHM(o);const g=t.oxw();return t.KtG(g.onFileSelected(c))}),t.qZA()()}}function z(n,s){if(1&n){const o=t.EpF();t.TgZ(0,"tr",44)(1,"td"),t._UZ(2,"app-text",45),t.qZA(),t.TgZ(3,"td"),t._UZ(4,"app-text",46),t.qZA(),t.TgZ(5,"td"),t._UZ(6,"app-text",46),t.qZA(),t.TgZ(7,"td"),t._UZ(8,"app-text",46),t.qZA(),t.TgZ(9,"td"),t._UZ(10,"app-text",46),t.qZA(),t.TgZ(11,"td",31)(12,"i",47),t.NdJ("click",function(){const g=t.CHM(o).index,f=t.oxw();return t.KtG(f.deleteProductFromList(g))}),t.qZA(),t.TgZ(13,"i",48),t.NdJ("click",function(){const c=t.CHM(o),g=c.$implicit,f=c.index,y=t.oxw();return t.KtG(y.fillDataToUpdateProduct(g.value,f))}),t.qZA()()()}if(2&n){const o=s.$implicit;t.xp6(2),t.Q6J("readOnly",!0)("value",o.value.product_name),t.xp6(2),t.Q6J("readOnly",!0)("value",o.value.quantity)("text","")("placeholder",""),t.xp6(2),t.Q6J("readOnly",!0)("value",o.value.discount)("text","")("placeholder",""),t.xp6(2),t.Q6J("readOnly",!0)("value",o.value.product_price)("text","")("placeholder",""),t.xp6(2),t.Q6J("readOnly",!0)("value",o.value.total_product_price)("text","")("placeholder","")}}function $(n,s){if(1&n){const o=t.EpF();t.TgZ(0,"i",49),t.NdJ("click",function(){t.CHM(o);const c=t.oxw();return t.KtG(c.addProductToList())}),t.qZA()}}function X(n,s){if(1&n){const o=t.EpF();t.TgZ(0,"i",50),t.NdJ("click",function(){t.CHM(o);const c=t.oxw();return t.KtG(c.updateProductOnList())}),t.qZA()}}let q=(()=>{class n{constructor(o,i,c,g,f,y){this.fb=o,this.router=i,this.route=c,this.supplierPurchaseService=g,this.toastr=f,this.http=y,this.PaymentConfig=L.D,this.permissions=m,this.showImportForm=!1,this.isLoading=!1,this.importError=[],this.payment_accounts=[],this.taxes=[],this.stocks=[],this.suppliers=[],this.products=[],this.unsubscribe=new U.x,this.formGroup=this.initForm(),this.title="add_new_purchase",this.actionSale="create",this.total=0,this.productAction="create",this.savedAccounts=[],this.index=0,this.messageError="",this.values=new FormData,this.fileName=""}ngOnInit(){this.route.snapshot.paramMap.get("id")&&(this.activeId=this.route.snapshot.paramMap.get("id"),this.title="edit_purchase",this.actionSale="update",this.route.data.pipe((0,Z.R)(this.unsubscribe)).subscribe({next:o=>{this.data=o,this.fillForm(this.data.purchase.data)},error:o=>{}})),this.supplierPurchaseService.getTaxes().pipe((0,Z.R)(this.unsubscribe)).subscribe({next:o=>{this.taxes=o.data}}),this.supplierPurchaseService.getProducts().pipe((0,Z.R)(this.unsubscribe)).subscribe({next:o=>{this.products=o.data}}),this.supplierPurchaseService.getSuppliers().pipe((0,Z.R)(this.unsubscribe)).subscribe({next:o=>{this.suppliers=o.data}}),this.supplierPurchaseService.getStocks().pipe((0,Z.R)(this.unsubscribe)).subscribe({next:o=>{this.stocks=o.data}})}initForm(){return this.fb.group({id:[Number],invoice_image:[""],payment_type_id:["",[h.kI.required]],payment_account_id:["",[h.kI.required]],collection_date:["",[h.kI.required]],supplier_id:["",[h.kI.required]],invoice_number:["",[h.kI.required]],date:["",[h.kI.required]],stock_id:["",[h.kI.required]],products:this.fb.array([]),product:this.fb.group({id:[Number],product_id:[""],quantity:[1,[h.kI.required]],discount:[0],product_name:[""],product_price:[""],total_product_price:[""]})})}get productsAtSale(){return this.formGroup.get("products")}get productAtSale(){return this.formGroup.get("product")}onSubmit(){this.formGroup.invalid?this.formGroup.markAllAsTouched():this.productsAtSale.length>=1?(this.convertFormGroupToFormData(),"create"==this.actionSale?this.supplierPurchaseService.create(this.values).subscribe(o=>{this.toastr.success(o.message),this.errors=null,this.clearAllForm(),this.router.navigate(["/key/purchase/supplier"])},o=>{this.errors=o.error.errors}):this.supplierPurchaseService.update(this.values).subscribe(o=>{this.toastr.success(o.message),this.errors=null,this.clearAllForm(),this.router.navigate(["/key/purchase/supplier"])},o=>{this.errors=o.error.errors})):this.toastr.error("must_be_add_product_1_at_least")}convertFormGroupToFormData(){this.values.set("id",this.formGroup.get("id")?.value),this.values.set("stock_id",this.formGroup.get("stock_id")?.value),this.values.set("date",this.formGroup.get("date")?.value),this.values.set("invoice_number",this.formGroup.get("invoice_number")?.value),this.values.set("collection_date",this.formGroup.get("collection_date")?.value),this.values.set("payment_type_id",this.formGroup.get("payment_type_id")?.value),this.values.set("payment_account_id",this.formGroup.get("payment_account_id")?.value),this.values.set("supplier_id",this.formGroup.get("supplier_id")?.value);let o=this.formGroup.get("products");for(let i=0;i<o.length;i++){const c=o.at(i),g=c.get("discount")?.value,f=c.get("quantity")?.value,y=c.get("product_id")?.value;this.values.set(`products[${i}][discount]`,g),this.values.set(`products[${i}][quantity]`,f),this.values.set(`products[${i}][product_id]`,y)}}getProduct(o){this.product=this.products.filter(i=>i.id==o)[0],this.formGroup.get("product")?.patchValue({product_name:this.product?.name,product_price:this.product?.selling_price})}deleteProductFromList(o){this.productsAtSale.controls.forEach((i,c)=>{c==o&&(this.total-=parseFloat(i.value.total_product_price))}),this.productsAtSale.removeAt(o)}addProductToList(){let o=[];this.productAtSale?.value.product_id&&""!=this.productAtSale?.value.product_id?(o=this.productsAtSale.controls.map(i=>i.value.product_id),o.includes(this.productAtSale?.value.product_id)?this.toastr.error("this_product_is_exist"):this.productAtSale?.value.quantity>0?(this.productsAtSale.push(this.fb.group({product_id:this.productAtSale?.value.product_id,quantity:this.productAtSale?.value.quantity,discount:this.productAtSale?.value.discount,product_name:this.productAtSale?.value.product_name,product_price:this.productAtSale?.value.product_price,total_product_price:((parseFloat(this.productAtSale?.value.product_price)-this.productAtSale?.value.discount/100*parseFloat(this.productAtSale?.value.product_price))*parseInt(this.productAtSale?.value.quantity)).toFixed(2)})),this.clearProductForm()):this.toastr.error("quantity_must_be_1_or_more")):this.toastr.error("select_product"),this.calcTotal()}calcTotal(){this.total=0,this.productsAtSale.controls.forEach(o=>{this.total+=parseFloat(o.value.total_product_price)})}fillForm(o){this.formGroup.patchValue({id:o.id,supplier_id:o.purchasable.id,invoice_number:o.invoice_number,date:o.date,stock_id:o.stock.id,collection_date:o.collection_date,payment_type_id:o.payment_type_id,payment_account_id:o.payment_account_id}),o.products.forEach(i=>{this.productsAtSale.push(this.fb.group({product_id:i.id,quantity:i.pivot.quantity,discount:i.pivot.discount,product_name:i.name,product_price:i.selling_price,total_product_price:((parseFloat(i?.selling_price)-i.pivot.discount/100*parseFloat(i?.selling_price))*parseInt(i.pivot.quantity)).toFixed(2)}))}),this.total=parseFloat(o.total)}fillDataToUpdateProduct(o,i){this.index=i,this.productAction="update",this.formGroup.get("product")?.patchValue({product_name:o.product_name,product_id:o.product_id,quantity:o.quantity,discount:o.discount,product_price:o.product_price,total_product_price:o.total_product_price})}updateProductOnList(){this.productsAtSale.controls.map((o,i)=>{this.productAtSale?.value?.product_id==o.value.product_id&&(this.index==i?(this.productsAtSale.controls[this.index].patchValue({product_id:this.productAtSale?.value?.product_id,product_name:this.productAtSale?.value?.product_name,quantity:this.productAtSale?.value?.quantity,discount:this.productAtSale?.value?.discount,product_price:this.productAtSale?.value?.product_price,total_product_price:((parseFloat(this.productAtSale?.value.product_price)-this.productAtSale?.value.discount/100*parseFloat(this.productAtSale?.value.product_price))*parseInt(this.productAtSale?.value.quantity)).toFixed(2)}),this.calcTotal(),this.clearProductForm(),this.productAction="create"):this.toastr.error("this_product_is_exist"))})}clearProductForm(){this.productAction="create",this.productAtSale?.patchValue({product_name:[""],product_id:[""],quantity:[""],discount:[0],product_price:[""],total_product_price:[""]})}clearAllForm(){for(;0!==this.productsAtSale.length;)this.productsAtSale.removeAt(0);this.formGroup.reset(),this.total=0;for(const[o,i]of this.values)this.values.delete(o)}onFileSelected(o){if(o.target.files[0]){for(const[i,c]of Object.entries(o.target.files))this.values.append(`invoice_image[${i}]`,o.target.files[i]);this.fileName=o.target.files[0].name}}ngOnDestroy(){this.unsubscribe.next(!0),this.unsubscribe.complete()}getPaymentAccounts(o){let i=o.value;i&&this.http.getWithParam(this.PaymentConfig.api.getPaymentAccount+i).subscribe({next:c=>{this.payment_accounts=c.data}})}}return n.\u0275fac=function(o){return new(o||n)(t.Y36(h.qu),t.Y36(_.F0),t.Y36(_.gz),t.Y36(T),t.Y36(S._W),t.Y36(C.O))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-new-supplier-purchase"]],decls:83,vars:84,consts:[[1,"page-card"],[1,"header","row","justify-content-between","align-items-center"],[1,"title","col-md-6"],["routerLink","/key/purchase/supplier",1,"fa-solid","fa-arrow-left","me-2"],[1,"d-flex","align-items-center","justify-content-end","g-2","col-md-6"],["class","px-1",4,"ngIf"],[1,"px-1"],["routerLink","/key/purchase/supplier",1,"btn-cancel",3,"iconPos","icon","text"],[1,"btn-filter",3,"text","iconPos","icon","click"],[3,"formGroup","onSubmit"],["class","text-error",4,"ngFor","ngForOf"],[1,"row"],[1,"col-md-6","mt-3"],["ngDefaultControl","","formControlName","invoice_number",3,"text","placeholder"],["ngDefaultControl","","formControlName","supplier_id",3,"text","data","optionLabel","optionValue","placeholder"],["class","messageError",4,"ngIf"],[1,"date","col-md-6","mt-3"],["ngDefaultControl","","formControlName","date",3,"text"],["ngDefaultControl","","formControlName","stock_id",3,"text","data","optionLabel","optionValue","placeholder"],["class","col-md-6 mt-3",4,"ngIf"],["ngDefaultControl","","formControlName","collection_date",3,"text"],["class"," col-md-6",4,"ngIf"],[1,"table-responsive"],[1,"table"],[1,"table-head"],["scope","col",1,"head"],["formArrayName","products",4,"ngFor","ngForOf"],["formGroupName","product"],["formControlName","product_id","placeholder","select",3,"data","optionLabel","optionValue","showClear","ngModelChange"],["formControlName","quantity",3,"showButtons","text","placeholder"],["formControlName","discount",3,"showButtons","text","placeholder"],[1,"action"],[1,"fa-solid","fa-cancel","fs-4","text-danger","mx-2","pointer",3,"click"],["class","fa-solid fa-plus fs-4 main-color pointer",3,"click",4,"ngIf"],["class","fa-solid fa-check fs-4 main-color mx-2 pointer",3,"click",4,"ngIf"],[1,"title"],[1,"btn-filter","text-light"],[1,"btn-cancel",3,"text","iconPos","icon","routerLink"],[1,"text-error"],[1,"messageError"],["ngDefaultControl","","formControlName","payment_type_id",3,"text","request","optionLabel","optionValue","placeholder","onDropDownChange"],["ngDefaultControl","","formControlName","payment_account_id",3,"text","data","optionLabel","optionValue","placeholder"],[1,"col-md-6"],["label","image","ngDefaultControl","","formControlName","invoice_image",3,"onValueChange"],["formArrayName","products"],[3,"readOnly","value"],[3,"readOnly","value","text","placeholder"],[1,"fa-solid","fa-trash","fs-4","text-danger","mx-2","pointer",3,"click"],[1,"fa-solid","fa-pen-to-square","fs-4","main-color","mx-2","pointer",3,"click"],[1,"fa-solid","fa-plus","fs-4","main-color","pointer",3,"click"],[1,"fa-solid","fa-check","fs-4","main-color","mx-2","pointer",3,"click"]],template:function(o,i){1&o&&(t.TgZ(0,"div",0)(1,"div",1)(2,"h5",2),t._UZ(3,"i",3),t._uU(4),t.ALo(5,"titlecase"),t.ALo(6,"translate"),t.qZA(),t.TgZ(7,"div",4),t.YNc(8,Y,2,4,"div",5),t.TgZ(9,"div",6),t._UZ(10,"app-button",7),t.qZA(),t.TgZ(11,"div",6)(12,"app-button",8),t.NdJ("click",function(){return i.onSubmit()}),t.qZA()()()(),t.TgZ(13,"app-form",9),t.NdJ("onSubmit",function(){return i.onSubmit()}),t.YNc(14,R,2,1,"div",10),t.ALo(15,"keyvalue"),t.TgZ(16,"div",11)(17,"div",12),t._UZ(18,"app-text",13),t.qZA(),t.TgZ(19,"div",12),t._UZ(20,"app-dropdown",14),t.YNc(21,K,2,1,"p",15),t.qZA(),t.TgZ(22,"div",16),t._UZ(23,"app-date",17),t.qZA(),t.TgZ(24,"div",12),t._UZ(25,"app-dropdown",18),t.YNc(26,B,2,1,"p",15),t.qZA(),t.YNc(27,V,2,7,"div",19),t.YNc(28,H,2,7,"div",19),t.TgZ(29,"div",16),t._UZ(30,"app-date",20),t.qZA(),t.YNc(31,W,2,0,"div",21),t.qZA(),t.TgZ(32,"div",22)(33,"table",23)(34,"thead",24)(35,"tr")(36,"th",25),t._uU(37),t.ALo(38,"translate"),t.qZA(),t.TgZ(39,"th",25),t._uU(40),t.ALo(41,"translate"),t.qZA(),t.TgZ(42,"th",25),t._uU(43),t.ALo(44,"translate"),t.qZA(),t.TgZ(45,"th",25),t._uU(46),t.ALo(47,"translate"),t.qZA(),t.TgZ(48,"th",25),t._uU(49),t.ALo(50,"translate"),t.qZA(),t.TgZ(51,"th",25),t._uU(52),t.ALo(53,"translate"),t.qZA()()(),t.TgZ(54,"tbody"),t.YNc(55,z,14,18,"tr",26),t.TgZ(56,"tr",27)(57,"td")(58,"app-dropdown",28),t.NdJ("ngModelChange",function(g){return i.getProduct(g)}),t.qZA()(),t.TgZ(59,"td"),t._UZ(60,"app-number-input",29),t.qZA(),t.TgZ(61,"td"),t._UZ(62,"app-number-input",30),t.qZA(),t._UZ(63,"td")(64,"td"),t.TgZ(65,"td",31)(66,"i",32),t.NdJ("click",function(){return i.clearProductForm()}),t.qZA(),t.YNc(67,$,1,0,"i",33),t.YNc(68,X,1,0,"i",34),t.qZA()(),t.TgZ(69,"tr",35)(70,"th",36),t._uU(71),t.ALo(72,"translate"),t.qZA(),t.TgZ(73,"th",36),t._uU(74),t.qZA(),t.TgZ(75,"th",36),t._uU(76),t.qZA(),t.TgZ(77,"th",36),t._uU(78),t.qZA(),t.TgZ(79,"th",36),t._uU(80),t.qZA(),t.TgZ(81,"th",36),t._uU(82),t.qZA()()()()()()()),2&o&&(t.xp6(4),t.hij("",t.lcZ(5,64,t.lcZ(6,66,i.title))," "),t.xp6(4),t.Q6J("ngIf","edit_purchase"==i.title),t.xp6(2),t.Q6J("iconPos","left")("icon","fa-solid fa-ban")("text","Cancel"),t.xp6(2),t.Q6J("text","save")("iconPos","left")("icon","fa-solid fa-check"),t.xp6(1),t.Q6J("formGroup",i.formGroup),t.xp6(1),t.Q6J("ngForOf",t.lcZ(15,68,i.errors)),t.xp6(4),t.Tol("d-flex flex-column justify-content-between "),t.Q6J("text","invoice_number")("placeholder",""),t.xp6(2),t.Tol("d-flex flex-column justify-content-between"),t.Q6J("text","suppliers")("data",i.suppliers)("optionLabel","name")("optionValue","id")("placeholder","select"),t.xp6(1),t.Q6J("ngIf",null==i.errors?null:i.errors.assigned_id),t.xp6(2),t.Tol("d-flex flex-column justify-content-between "),t.Q6J("text","date"),t.xp6(2),t.Tol("d-flex flex-column justify-content-between"),t.Q6J("text","stock")("data",i.stocks)("optionLabel","id")("optionValue","id")("placeholder","select"),t.xp6(1),t.Q6J("ngIf",null==i.errors?null:i.errors.assigned_id),t.xp6(1),t.Q6J("ngIf","create"==i.actionSale),t.xp6(1),t.Q6J("ngIf","create"==i.actionSale),t.xp6(2),t.Tol("d-flex flex-column justify-content-between "),t.Q6J("text","collection_date"),t.xp6(1),t.Q6J("ngIf","add_new_purchase"==i.title),t.xp6(6),t.Oqu(t.lcZ(38,70,"product")),t.xp6(3),t.Oqu(t.lcZ(41,72,"quantity")),t.xp6(3),t.Oqu(t.lcZ(44,74,"discount")),t.xp6(3),t.Oqu(t.lcZ(47,76,"price")),t.xp6(3),t.Oqu(t.lcZ(50,78,"total_price")),t.xp6(3),t.Oqu(t.lcZ(53,80,"actions")),t.xp6(3),t.Q6J("ngForOf",i.productsAtSale.controls),t.xp6(3),t.Q6J("data",i.products)("optionLabel","name")("optionValue","id")("showClear",!0),t.xp6(2),t.Q6J("showButtons",!1)("text","")("placeholder",""),t.xp6(2),t.Q6J("showButtons",!1)("text","")("placeholder",""),t.xp6(5),t.Q6J("ngIf","create"==i.productAction),t.xp6(1),t.Q6J("ngIf","update"==i.productAction),t.xp6(3),t.Oqu(t.lcZ(72,82,"total")),t.xp6(3),t.Oqu(i.total.toFixed(2)),t.xp6(2),t.Oqu(""),t.xp6(2),t.Oqu(""),t.xp6(2),t.Oqu(""),t.xp6(2),t.Oqu(""))},dependencies:[e.sg,e.O5,_.rH,k.U,h.Fj,h.JJ,h.JL,h.sg,h.u,h.x0,h.CE,E.T,Q.D,D.J,G.I,j.Y,w.r,e.rS,e.Nd,d.X$],styles:[".head[_ngcontent-%COMP%]{min-width:150px}"]}),n})();var tt=r(5435);const ot=[{path:l.page.list,component:I},{path:l.page.create,component:q},{path:l.page.update,component:q,resolve:{purchase:F}},{path:l.page.updateAttachment,component:(()=>{class n{constructor(o){this.route=o,this.supplierPurchaseConfig=l,this.unsubscribe=new U.x}ngOnInit(){this.route.data.pipe((0,Z.R)(this.unsubscribe)).subscribe({next:o=>{this.data=o.purchase.data},error:o=>{}})}}return n.\u0275fac=function(o){return new(o||n)(t.Y36(_.gz))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-attachment-purchase-edit"]],decls:1,vars:5,consts:[[3,"filesName","data","listPageRoute","listPageTitle","endPoint"]],template:function(o,i){1&o&&t._UZ(0,"app-update-attachment",0),2&o&&t.Q6J("filesName","invoice_image")("data",i.data)("listPageRoute","/key/purchase/supplier")("listPageTitle","supplier_purchase_list")("endPoint",i.supplierPurchaseConfig.api.updateFiles)},dependencies:[tt.f],styles:[".items[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px;font-weight:600;line-height:24px;color:#101828;margin:30px 0;width:100%}.items[_ngcontent-%COMP%]   .img[_ngcontent-%COMP%]{height:200px;width:200px;border:1px solid var(--mainColor);border-radius:10px;overflow-x:auto;-ms-overflow-style:none;scrollbar-width:none}.items[_ngcontent-%COMP%]   .img[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.items[_ngcontent-%COMP%]   .img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:198px;border-radius:10px}.items[_ngcontent-%COMP%]   .file[_ngcontent-%COMP%]{width:200px;height:200px;border:1px solid var(--mainColor);border-radius:14px;display:flex;flex-direction:column;justify-content:center;align-items:center;overflow-x:auto;-ms-overflow-style:none;scrollbar-width:none}.items[_ngcontent-%COMP%]   .file[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.items[_ngcontent-%COMP%]   .file[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:10px 0;width:100%}.items[_ngcontent-%COMP%]   .btn-change[_ngcontent-%COMP%]{background:var(--white);color:var(--mainColor);border:1px solid var(--mainColor);border-radius:3px;margin:6px 0;padding:7px 0;font-size:14px;width:110px}.customFileInput[_ngcontent-%COMP%]::-webkit-file-upload-button{visibility:hidden}.import[_ngcontent-%COMP%]{padding:20px;border:2px solid var(--mainColor);border-radius:8px;margin:10px 0}"]}),n})(),resolve:{purchase:F}}];let nt=(()=>{class n{}return n.\u0275fac=function(o){return new(o||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[_.Bz.forChild(ot),_.Bz]}),n})();var it=r(1471),at=r(2115),rt=r(4413),st=r(1890),pt=r(1019),ct=r(8096),lt=r(1383);let ut=(()=>{class n{}return n.\u0275fac=function(o){return new(o||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[e.ez,nt,it.X,at.u,rt.e,st.f,pt.i,ct.J,d.aw,lt.m]}),n})()},359:(O,P,r)=>{r.d(P,{Q:()=>w});var e=r(9291),_=r(6814),t=r(3999);function b(p,d){if(1&p){const a=e.EpF();e.TgZ(0,"button",12),e.NdJ("click",function(){e.CHM(a);const u=e.oxw(2);return e.KtG(u.changePage(u.page-1))}),e._UZ(1,"i",13),e._uU(2),e.ALo(3,"translate"),e.qZA()}2&p&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"prev")," "))}function l(p,d){if(1&p){const a=e.EpF();e.TgZ(0,"button",14),e.NdJ("click",function(){e.CHM(a);const u=e.oxw(2);return e.KtG(u.changePage(1))}),e._uU(1),e.qZA()}if(2&p){const a=e.oxw(2);e.Q6J("disabled",1==a.page),e.xp6(1),e.hij(" ",1," ")}}function m(p,d){1&p&&(e.TgZ(0,"span",15),e._uU(1," ..."),e.qZA())}function x(p,d){if(1&p){const a=e.EpF();e.TgZ(0,"button",14),e.NdJ("click",function(){e.CHM(a);const u=e.oxw(2);return e.KtG(u.changePage(u.page-2))}),e._uU(1),e.qZA()}if(2&p){const a=e.oxw(2);e.Q6J("disabled",1==a.page),e.xp6(1),e.hij(" ",a.page-2," ")}}function A(p,d){if(1&p){const a=e.EpF();e.TgZ(0,"button",14),e.NdJ("click",function(){e.CHM(a);const u=e.oxw(2);return e.KtG(u.changePage(u.page-1))}),e._uU(1),e.qZA()}if(2&p){const a=e.oxw(2);e.Q6J("disabled",1==a.page),e.xp6(1),e.hij(" ",a.page-1," ")}}function C(p,d){if(1&p){const a=e.EpF();e.TgZ(0,"button",14),e.NdJ("click",function(){e.CHM(a);const u=e.oxw(2);return e.KtG(u.changePage(u.page+1))}),e._uU(1),e.qZA()}if(2&p){const a=e.oxw(2);e.Q6J("disabled",a.page==a.totalPages),e.xp6(1),e.hij(" ",a.page+1," ")}}function N(p,d){if(1&p){const a=e.EpF();e.TgZ(0,"button",14),e.NdJ("click",function(){e.CHM(a);const u=e.oxw(2);return e.KtG(u.changePage(u.page+2))}),e._uU(1),e.qZA()}if(2&p){const a=e.oxw(2);e.Q6J("disabled",a.page==a.totalPages),e.xp6(1),e.hij(" ",a.page+2," ")}}function S(p,d){1&p&&(e.TgZ(0,"span",15),e._uU(1," ..."),e.qZA())}function T(p,d){if(1&p){const a=e.EpF();e.TgZ(0,"button",14),e.NdJ("click",function(){e.CHM(a);const u=e.oxw(2);return e.KtG(u.changePage(u.totalPages))}),e._uU(1),e.qZA()}if(2&p){const a=e.oxw(2);e.Q6J("disabled",a.page==a.totalPages),e.xp6(1),e.hij(" ",a.totalPages," ")}}function M(p,d){if(1&p){const a=e.EpF();e.TgZ(0,"button",12),e.NdJ("click",function(){e.CHM(a);const u=e.oxw(2);return e.KtG(u.changePage(u.page+1))}),e._uU(1),e.ALo(2,"translate"),e._UZ(3,"i",16),e.qZA()}2&p&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"next")," "))}function J(p,d){if(1&p&&(e.TgZ(0,"div",1)(1,"p",2),e._uU(2),e.ALo(3,"titlecase"),e.ALo(4,"translate"),e.TgZ(5,"span"),e._uU(6),e.qZA()(),e.TgZ(7,"nav",3)(8,"ul",4)(9,"li",5),e.YNc(10,b,4,3,"button",6),e.qZA(),e.TgZ(11,"li",7),e.YNc(12,l,2,2,"button",8),e.YNc(13,m,2,0,"span",9),e.YNc(14,x,2,2,"button",8),e.YNc(15,A,2,2,"button",8),e.TgZ(16,"span",10)(17,"button",11),e._uU(18),e.qZA()(),e.YNc(19,C,2,2,"button",8),e.YNc(20,N,2,2,"button",8),e.YNc(21,S,2,0,"span",9),e.YNc(22,T,2,2,"button",8),e.qZA(),e.TgZ(23,"li",5),e.YNc(24,M,4,3,"button",6),e.qZA()()()()),2&p){const a=e.oxw();e.xp6(2),e.hij("",e.lcZ(3,13,e.lcZ(4,15,"total_items"))," "),e.xp6(4),e.Oqu(a.total),e.xp6(4),e.Q6J("ngIf",a.page>1),e.xp6(2),e.Q6J("ngIf",a.page>3),e.xp6(1),e.Q6J("ngIf",a.page>3),e.xp6(1),e.Q6J("ngIf",a.page>2),e.xp6(1),e.Q6J("ngIf",1!=a.page),e.xp6(3),e.Oqu(a.page),e.xp6(1),e.Q6J("ngIf",a.page!=a.totalPages),e.xp6(1),e.Q6J("ngIf",a.page!=a.totalPages&&a.page!=a.totalPages-1),e.xp6(1),e.Q6J("ngIf",a.page!=a.totalPages&&a.page!=a.totalPages-1&&a.page!=a.totalPages-2),e.xp6(1),e.Q6J("ngIf",a.page!=a.totalPages&&a.page!=a.totalPages-1&&a.page!=a.totalPages-2),e.xp6(2),e.Q6J("ngIf",a.page!=a.totalPages)}}let w=(()=>{class p{constructor(){this.total=0,this.onPaginationChange=new e.vpe,this.rppOptions=[{label:"10",value:10},{label:"30",value:30},{label:"40",value:40}],this.rpp=this.rppOptions[0].value,this.page=1,this.totalPages=0,this.totalClipPages=0}getPage(){return this.page}setTotal(a){this.total=a,this.totalPages=Math.ceil(this.total/this.rpp),this.totalClipPages=Math.ceil(this.totalPages-(this.totalPages-(this.page+1))/2)}changeRPP(){this.page=1,this.onPaginationChange.next({page:this.page,limit:this.rpp})}changePage(a){this.page=a,this.onPaginationChange.next({page:this.page,limit:this.rpp})}}return p.\u0275fac=function(a){return new(a||p)},p.\u0275cmp=e.Xpm({type:p,selectors:[["ukt-pagination"]],inputs:{total:"total",rppOptions:"rppOptions"},outputs:{onPaginationChange:"onPaginationChange"},decls:1,vars:1,consts:[["class","pagination d-flex align-items-center ",4,"ngIf"],[1,"pagination","d-flex","align-items-center"],[1,"total_items"],["aria-label","Page navigation "],[1,"pagination","d-flex","justify-content-between"],[1,"page-item","mx-3"],["class","btn btn-light border-1",3,"click",4,"ngIf"],[1,"page-item","d-flex","gap-3"],["class","btn btn-light border-1",3,"disabled","click",4,"ngIf"],["class","fw-bold mx-2",4,"ngIf"],[1,"page-item"],["disabled","",1,"page-link","rounded","border-1","active"],[1,"btn","btn-light","border-1",3,"click"],[1,"fa-solid","fa-arrow-left","mx-1"],[1,"btn","btn-light","border-1",3,"disabled","click"],[1,"fw-bold","mx-2"],[1,"fa-solid","fa-arrow-right","mx-1"]],template:function(a,v){1&a&&e.YNc(0,J,25,17,"div",0),2&a&&e.Q6J("ngIf",0!=v.totalPages)},dependencies:[_.O5,_.rS,t.X$],styles:[".total_items[_ngcontent-%COMP%]{font-size:14px;margin-top:4px}.total_items[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{border:1px solid var(--mainColor);padding:5px 10px;border-radius:4px}"]}),p})()},2115:(O,P,r)=>{r.d(P,{u:()=>b});var e=r(6814),_=r(3999),t=r(9291);let b=(()=>{class l{}return l.\u0275fac=function(x){return new(x||l)},l.\u0275mod=t.oAB({type:l}),l.\u0275inj=t.cJS({imports:[e.ez,_.aw]}),l})()},8096:(O,P,r)=>{r.d(P,{J:()=>m});var e=r(6814),_=r(9624),t=r(4413),b=r(3999),l=r(9291);let m=(()=>{class x{}return x.\u0275fac=function(C){return new(C||x)},x.\u0275mod=l.oAB({type:x}),x.\u0275inj=l.cJS({imports:[e.ez,_.U,t.e,b.aw]}),x})()}}]);