"use strict";(self.webpackChunkkey=self.webpackChunkkey||[]).push([[8267],{8267:(b,g,n)=>{n.r(g),n.d(g,{CategoriesModule:()=>ne});var l=n(6814),d=n(2954),a=n(5861),f=n(7619),u=function(o){return o.create="Create Category",o.view="View Category",o.edit="Edit Category",o.delete="Delete Category",o}(u||{});const C=o=>{return{cols:[{field:"id",label:"id",class:""},{field:"name",label:"category_name",class:""},{field:"parent",label:"parent",format:r=>r.parent?r.parent.name:"-"},{field:"description",label:"description",format:r=>r.description?r.description:"-"},{field:"prefix",label:"prefix",format:r=>r.prefix?r.prefix:"-"},{label:"action",actions:[{id:u.delete,icon:"trash",class:"main-color",fun:(r=(0,a.Z)(function*(t){return yield o.categoriesService.delete(t,"delete category")}),function(i){return r.apply(this,arguments)})},{id:u.edit,icon:"pen-to-square",class:"main-color",fun:function(){var r=(0,a.Z)(function*(t){return yield o.categoriesService.openDialogToUpdateCategory(t)});return function(i){return r.apply(this,arguments)}}()}]}],Request:f.t.api.get};var r};var m=n(5219),v=n(6924),A=n(8718),c=n(5946),e=n(9291),s=n(6223),L=n(8645),T=n(8763),O=n(5118),U=n(1771),M=n(8614),S=n(3838),I=n(5253),J=n(4779),_=n(3999);function j(o,r){if(1&o&&(e.TgZ(0,"div",19),e._uU(1),e.qZA()),2&o){const t=r.$implicit;e.xp6(1),e.hij(" ",t.value," ")}}function G(o,r){if(1&o&&(e.TgZ(0,"p",20),e._uU(1),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Oqu(null==t.serverValidation?null:t.serverValidation.name[0])}}function N(o,r){if(1&o&&(e.TgZ(0,"p",20),e._uU(1),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Oqu(null==t.serverValidation?null:t.serverValidation.description[0])}}let F=(()=>{class o{constructor(t,i,p,h,y){this.fb=t,this.toaster=i,this.categoriesService=p,this.config=h,this.dialogRef=y,this.unsubscribe=new L.x,this.formGroup=this.initForm(),this.isLoading=!1,this.categories=[],this.config.data?.data&&this.fillDataToUpdate()}ngOnInit(){this.categoriesService.getCategories().subscribe(t=>{this.categories=t.data})}reject(t){this.dialogRef.close(t)}initForm(){return this.fb.group({id:[Number],name:["",[s.kI.required,s.kI.minLength(1),s.kI.maxLength(50)]],description:["",s.kI.required],parent_id:[null],prefix:["",[s.kI.pattern("^[A-Za-z0-9]{1,}$")]]})}accept(){this.formGroup.invalid?this.formGroup.markAllAsTouched():(this.isLoading=!0,this.config.data.data?this.categoriesService.update(this.formGroup.value).subscribe(t=>{this.toaster.success(t.message),this.dialogRef.close(!0)},t=>{this.errors=t.error.errors,this.isLoading=!1}):this.categoriesService.create(this.formGroup.value).subscribe(t=>{this.toaster.success(t.message),this.dialogRef.close(!0)},t=>{this.errors=t.error.errors,this.isLoading=!1}))}fillDataToUpdate(){this.formGroup.patchValue({id:this.config.data.data?.id,name:this.config.data.data?.name,description:this.config.data.data?.description,parent_id:this.config.data.data?.parent_id,prefix:this.config.data.data?.prefix})}ngOnDestroy(){this.unsubscribe.next(!0),this.unsubscribe.complete()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(s.qu),e.Y36(T._W),e.Y36(E),e.Y36(O.S),e.Y36(O.E7))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-categories-form"]],decls:28,vars:30,consts:[[1,"main"],[1,"header"],[1,"d-flex","justify-content-between"],[1,"icon"],["src","assets/Tabs/Icon/Active/inventory-icon.png","alt","img"],[3,"click"],[1,"fa-solid","fa-xmark","pointer","fs-1"],["translate","",1,"title"],[3,"formGroup","onSubmit"],["class","text-error",4,"ngFor","ngForOf"],["text","name","formControlName","name","ngDefaultControl","","placeholder","",3,"type"],["class","error",4,"ngIf"],["text","description","formControlName","description","ngDefaultControl","","placeholder","",3,"type"],["text","parent","formControlName","parent_id","ngDefaultControl","","placeholder","",3,"data","optionValue","optionLabel","placeholder"],[1,"col-md-12"],["text","prefix","formControlName","prefix","ngDefaultControl","","placeholder","",3,"type"],[1,"row","g-2","my-2"],[1,"col-6"],[3,"text","click"],[1,"text-error"],[1,"error"]],template:function(t,i){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"span",3),e._UZ(4,"img",4),e.qZA(),e.TgZ(5,"span",5),e.NdJ("click",function(){return i.reject(!1)}),e._UZ(6,"i",6),e.qZA()(),e.TgZ(7,"p",7),e._uU(8),e.ALo(9,"translate"),e.qZA()(),e.TgZ(10,"app-form",8),e.NdJ("onSubmit",function(){return i.accept()}),e.YNc(11,j,2,1,"div",9),e.ALo(12,"keyvalue"),e.TgZ(13,"div"),e._UZ(14,"app-text",10),e.YNc(15,G,2,1,"p",11),e.qZA(),e.TgZ(16,"div"),e._UZ(17,"app-textarea",12),e.YNc(18,N,2,1,"p",11),e.qZA(),e.TgZ(19,"div"),e._UZ(20,"app-dropdown",13),e.qZA(),e.TgZ(21,"div",14),e._UZ(22,"app-text",15),e.qZA(),e.TgZ(23,"div",16)(24,"div",17)(25,"app-button",18),e.NdJ("click",function(){return i.reject(!1)}),e.qZA()(),e.TgZ(26,"div",17)(27,"app-button",18),e.NdJ("click",function(){return i.accept()}),e.qZA()()()()()),2&t){let p;e.xp6(8),e.Oqu(e.lcZ(9,26,null!==(p=i.config.header)&&void 0!==p?p:"")),e.xp6(2),e.Q6J("formGroup",i.formGroup),e.xp6(1),e.Q6J("ngForOf",e.lcZ(12,28,i.errors)),e.xp6(3),e.Tol("d-flex flex-column justify-content-between"),e.Q6J("type","text"),e.xp6(1),e.Q6J("ngIf",null==i.serverValidation?null:i.serverValidation.name),e.xp6(2),e.Tol("d-flex flex-column justify-content-between"),e.Q6J("type","text"),e.xp6(1),e.Q6J("ngIf",null==i.serverValidation?null:i.serverValidation.description),e.xp6(2),e.Tol("d-flex flex-column justify-content-between"),e.Q6J("data",i.categories)("optionValue","id")("optionLabel","name")("placeholder","select"),e.xp6(2),e.Tol("d-flex flex-column justify-content-between mt-2"),e.Q6J("type","prefix"),e.xp6(3),e.Tol("btn-cancel"),e.Q6J("text","Cancel"),e.xp6(2),e.Tol("btn-filter"),e.Q6J("text",null==i.config.data?null:i.config.data.acceptLabel)}},dependencies:[l.sg,l.O5,U.U,s.Fj,s.JJ,s.JL,s.sg,s.u,M.T,S.J,I.R,J.r,_.Pi,l.Nd,_.X$]}),o})();var P=n(1732),Q=n(3562);let E=(()=>{class o{constructor(t,i,p){this.http=t,this.dynamicDialog=i,this.toastr=p}getCategories(t){return this.http.get(f.t.api.get)}openDialogToCreateCategory(){return this.dynamicDialog.showDialogWithComponent({showHeader:!1,header:"add_category",data:{acceptLabel:"Add",rejectLabel:"Cancel"},width:"500px",height:"auto"},F)}create(t){return this.http.post(f.t.api.create,t)}delete(t,i,p){var h=this;return(0,a.Z)(function*(){const y={showHeader:!1,header:"delete",data:{message:"do_you_want_to_delete",acceptLabel:"delete",rejectLabel:"close",data:{...t},name:"name"},width:"500px",height:"auto"};if(yield h.dynamicDialog.confirm(y))try{const Z=yield h.http.delete(f.t.api.delete+t.id).toPromise();return h.toastr.success(Z.message),Z}catch(Z){throw h.toastr.error(Z.error.message),Z}return!1})()}openDialogToUpdateCategory(t,i,p){var h=this;return(0,a.Z)(function*(){const y={showHeader:!1,header:"update_category",data:{acceptLabel:"update",rejectLabel:"cancel",data:{...t}},height:"330px",width:"auto"};return yield h.dynamicDialog.showDialogWithComponent(y,F)})()}update(t){return this.http.post(f.t.api.update+t.id,t)}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(P.O),e.LFG(Q.U),e.LFG(T._W))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var R=n(2377),V=n(359),B=n(5077),W=n(4811),Y=n(8275);function w(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"app-button",14),e.NdJ("click",function(){e.CHM(t);const p=e.oxw();return e.KtG(p.openDialogToCreate())}),e.qZA()}if(2&o){const t=e.oxw();e.Tol("btn-filter"),e.Q6J("text","new")("icon",t.icon.PLUS)("iconPos","left")}}const K=function(o){return[o]},X=[{path:"",component:(()=>{class o{constructor(t){this.categoriesService=t,this.tableConfig=C(this),this.filtersConfig=[{field:"search",label:"search",type:v.W.TEXT,placeholder:"search"},{field:"creator_id",label:"created_by",type:v.W.SELECT,options:{value:"id",label:"name"},request:A.x.api.get,placeholder:"select"},{field:"from",label:"from",type:v.W.DATE},{field:"to",label:"to",type:v.W.DATE}],this.sortConfig=[{optionLabel:"label",optionValue:"field",key:"sort_by",placeholder:"sort_by",data:[{label:"Name",field:"name"},{label:"id",field:"id"}]},{optionLabel:"label",optionValue:"field",key:"sort_type",placeholder:"sort_type",data:[{label:c.q.asc,field:c.q.asc},{label:c.q.desc,field:c.q.desc}]}],this.permissions=u,this.icon=m.dv}openDialogToCreate(){var t=this;return(0,a.Z)(function*(){(yield t.categoriesService.openDialogToCreateCategory())&&(t.tableConfig=C(t))})()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(E))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-list"]],decls:17,vars:12,consts:[[1,"page-card"],[1,"d-flex","align-items-center","justify-content-between"],[1,"title"],[1,"d-flex"],[3,"text","class","icon","iconPos","click",4,"hasPermissions"],[1,"d-flex","flex-row","align-items-center","justify-content-between"],[3,"SortConfig"],["sort",""],[3,"config"],["filter",""],[1,"table"],[3,"tableConfig","pagination","filter","sort"],[1,"d-flex","align-items-center","justify-content-center"],["pagination",""],[3,"text","icon","iconPos","click"]],template:function(t,i){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"h5",2),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"div",3),e.YNc(6,w,1,5,"app-button",4),e.qZA()(),e.TgZ(7,"div",5),e._UZ(8,"ukt-sort",6,7)(10,"ukt-filter",8,9),e.qZA(),e.TgZ(12,"div",10),e._UZ(13,"app-table",11),e.qZA(),e.TgZ(14,"div",12),e._UZ(15,"ukt-pagination",null,13),e.qZA()()),2&t){const p=e.MAs(9),h=e.MAs(11),y=e.MAs(16);e.xp6(3),e.Oqu(e.lcZ(4,8,"add_new_category")),e.xp6(3),e.Q6J("hasPermissions",e.VKq(10,K,i.permissions.create)),e.xp6(2),e.Q6J("SortConfig",i.sortConfig),e.xp6(2),e.Q6J("config",i.filtersConfig),e.xp6(3),e.Q6J("tableConfig",i.tableConfig)("pagination",y)("filter",h)("sort",p)}},dependencies:[R.a,V.Q,J.r,B.z,W.x,Y.z,_.X$]}),o})()}];let z=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[d.Bz.forChild(X),d.Bz]}),o})();var $=n(1471),H=n(2115),k=n(4413),q=n(1890),ee=n(1019),te=n(8096),oe=n(1383);let ne=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[l.ez,z,$.X,H.u,k.e,q.f,ee.i,te.J,oe.m,_.aw]}),o})()},7619:(b,g,n)=>{n.d(g,{t:()=>l});const l={api:{create:"category/create",get:"category",getById:"category/",update:"category/update/",delete:"category/",exportCvs:"category/export/cvs",exportPdf:"category/export/pdf",importAccount:"category/import"},page:{list:"/categories/list",update:"/categories/update",create:"/categories/create",view:"/categories/view",delete:"/categories/delete"}}},1771:(b,g,n)=>{n.d(g,{U:()=>f});var l=n(9291),d=n(6223);const a=["*"];let f=(()=>{class u{constructor(){this.onSubmit=new l.vpe}ngOnChanges(m){}getFormData(){return"function"==typeof this.formData?this.formData(this.formGroup.value):{...this.formGroup.value}}reset(){this.formGroup.reset()}submit(){if(this.formGroup.markAllAsTouched(),this.formGroup.invalid)return;const m=this.getFormData();this.onSubmit.emit(m)}ngAfterContentInit(){}ngAfterContentChecked(){}ngOnDestroy(){}}return u.\u0275fac=function(m){return new(m||u)},u.\u0275cmp=l.Xpm({type:u,selectors:[["app-form"]],inputs:{formGroup:"formGroup",formData:"formData"},outputs:{onSubmit:"onSubmit"},features:[l.TTD],ngContentSelectors:a,decls:2,vars:1,consts:[[3,"formGroup","ngSubmit"]],template:function(m,v){1&m&&(l.F$t(),l.TgZ(0,"form",0),l.NdJ("ngSubmit",function(){return v.submit()}),l.Hsn(1),l.qZA()),2&m&&l.Q6J("formGroup",v.formGroup)},dependencies:[d._Y,d.JL,d.sg]}),u})()},5253:(b,g,n)=>{n.d(g,{R:()=>D});var l=n(67),d=n(6223),a=n(9291),f=n(6814),u=n(6218),C=n(3999);function m(c,x){1&c&&a._UZ(0,"i",6)}function v(c,x){if(1&c&&(a.TgZ(0,"label"),a._uU(1),a.ALo(2,"titlecase"),a.ALo(3,"translate"),a.TgZ(4,"span",4),a.YNc(5,m,1,0,"i",5),a.qZA()()),2&c){const e=a.oxw();a.xp6(1),a.hij("",a.lcZ(2,2,a.lcZ(3,4,e.text))," "),a.xp6(4),a.Q6J("ngIf",e.control&&(null==e.control.errors?null:e.control.errors.required))}}function A(c,x){if(1&c&&(a.TgZ(0,"span"),a._uU(1),a.qZA()),2&c){const e=a.oxw();a.Tol("text-danger"),a.xp6(1),a.Oqu(e.object.keys(e.control.errors)[0])}}let D=(()=>{class c extends l.t{constructor(e){super(),this.formGroupDirective=e,this.placeholder="",this.rows="2",this.cols="",this.readOnly=!1,this.class="d-flex flex-column justify-content-between",this.object=Object}writeValue(e){this.value=e}onValueChange(e){this.onChange(e.target.value),this.onTouched()}}return c.\u0275fac=function(e){return new(e||c)(a.Y36(d.sg,8))},c.\u0275cmp=a.Xpm({type:c,selectors:[["app-textarea"]],inputs:{value:"value",text:"text",placeholder:"placeholder",rows:"rows",cols:"cols",readOnly:"readOnly",class:"class",type:"type"},features:[a._Bn([{provide:d.JU,useExisting:c,multi:!0},{provide:d.Cf,useExisting:c,multi:!0}]),a.qOj],decls:4,vars:8,consts:[[3,"ngClass"],[4,"ngIf"],["pInputTextarea","",3,"rows","cols","ngModel","placeholder","disabled","ngModelChange","input"],[3,"class",4,"ngIf"],[1,"required-aster"],["class","fa-solid fa-asterisk",4,"ngIf"],[1,"fa-solid","fa-asterisk"]],template:function(e,s){1&e&&(a.TgZ(0,"div",0),a.YNc(1,v,6,6,"label",1),a.TgZ(2,"textarea",2),a.NdJ("ngModelChange",function(T){return s.value=T})("input",function(T){return s.onValueChange(T)}),a.qZA(),a.YNc(3,A,2,3,"span",3),a.qZA()),2&e&&(a.Q6J("ngClass",s.class),a.xp6(1),a.Q6J("ngIf",s.text),a.xp6(1),a.Q6J("rows",s.rows)("cols",s.cols)("ngModel",s.value)("placeholder",s.placeholder)("disabled",s.readOnly),a.xp6(1),a.Q6J("ngIf",s.control&&s.control.errors&&(s.control.touched||s.formGroupDirective.submitted)))},dependencies:[f.mk,f.O5,d.Fj,d.JJ,d.On,u.g,f.rS,C.X$]}),c})()},8718:(b,g,n)=>{n.d(g,{x:()=>l});const l={api:{create:"user/create",get:"user",getById:"user/",update:"user/update/",delete:"user/",exportCvs:"user/export/cvs",exportPdf:"user/export/pdf",import:"user/import",export:"user/data/export"},page:{list:"",view:"view/:id"}}}}]);