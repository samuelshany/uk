"use strict";(self.webpackChunkkey=self.webpackChunkkey||[]).push([[3611],{1771:(P,C,a)=>{a.d(C,{U:()=>x});var n=a(9291),f=a(6223);const t=["*"];let x=(()=>{class m{constructor(){this.onSubmit=new n.vpe}ngOnChanges(p){}getFormData(){return"function"==typeof this.formData?this.formData(this.formGroup.value):{...this.formGroup.value}}reset(){this.formGroup.reset()}submit(){if(this.formGroup.markAllAsTouched(),this.formGroup.invalid)return;const p=this.getFormData();this.onSubmit.emit(p)}ngAfterContentInit(){}ngAfterContentChecked(){}ngOnDestroy(){}}return m.\u0275fac=function(p){return new(p||m)},m.\u0275cmp=n.Xpm({type:m,selectors:[["app-form"]],inputs:{formGroup:"formGroup",formData:"formData"},outputs:{onSubmit:"onSubmit"},features:[n.TTD],ngContentSelectors:t,decls:2,vars:1,consts:[[3,"formGroup","ngSubmit"]],template:function(p,g){1&p&&(n.F$t(),n.TgZ(0,"form",0),n.NdJ("ngSubmit",function(){return g.submit()}),n.Hsn(1),n.qZA()),2&p&&n.Q6J("formGroup",g.formGroup)},dependencies:[f._Y,f.JL,f.sg]}),m})()},4896:(P,C,a)=>{a.d(C,{Y:()=>O});var n=a(9291),f=a(67),t=a(6223),x=a(6814),m=a(3999);function h(_,v){1&_&&n._UZ(0,"i",7)}function p(_,v){if(1&_&&(n.TgZ(0,"label",4),n._uU(1),n.ALo(2,"titlecase"),n.ALo(3,"translate"),n.TgZ(4,"span",5),n.YNc(5,h,1,0,"i",6),n.qZA()()),2&_){const r=n.oxw();n.xp6(1),n.hij("",n.lcZ(2,2,n.lcZ(3,4,r.label))," "),n.xp6(4),n.Q6J("ngIf",r.control&&(null==r.control.errors?null:r.control.errors.required))}}function g(_,v){if(1&_&&(n.TgZ(0,"p"),n._uU(1),n.ALo(2,"translate"),n.qZA()),2&_){const r=n.oxw();n.xp6(1),n.Oqu(n.lcZ(2,1,r.selectedFileCount+"files"))}}function A(_,v){if(1&_&&(n.TgZ(0,"p"),n._uU(1),n.ALo(2,"translate"),n.qZA()),2&_){const r=n.oxw();n.xp6(1),n.Oqu(r.selectedFileName?r.selectedFileName:n.lcZ(2,1,r.placeholder))}}let O=(()=>{class _ extends f.t{set clear(r){r&&(this.selectedFileCount=0,this.selectedFileName="",this.value=null)}constructor(r){super(),this.formGroupDirective=r,this.uploadedFiles=[],this.multiple=!0,this.label="Upload",this.placeholder="drag_and_drop_you_file_or_Click_here_to_upload",this.accept=".jpg,.jpeg,.png,.pdf,.doc,.docx,.xls,.xlsx",this.onValueChange=new n.vpe,this.selectedFileName="",this.selectedFileCount=0}onFileSelected(r){this.onValueChange.emit(r),this.selectedFileName=r.target.files[0].name,r.target.files&&r.target.files.length>0&&(this.selectedFileCount=r.target.files.length)}onUpload(r){for(let u of r.files)this.uploadedFiles.push(u)}reset(){}}return _.\u0275fac=function(r){return new(r||_)(n.Y36(t.sg,8))},_.\u0275cmp=n.Xpm({type:_,selectors:[["app-file-upload"]],inputs:{value:"value",multiple:"multiple",label:"label",placeholder:"placeholder",accept:"accept",clear:"clear"},outputs:{onValueChange:"onValueChange"},features:[n._Bn([{provide:t.JU,useExisting:_,multi:!0},{provide:t.Cf,useExisting:_,multi:!0}]),n.qOj],decls:5,vars:6,consts:[[1,"file-input"],["for","file",4,"ngIf"],[4,"ngIf"],["id","file","type","file","id","file",1,"form-control",3,"multiple","ngModel","accept","ngModelChange","change"],["for","file"],[1,"required-aster"],["class","fa-solid fa-asterisk",4,"ngIf"],[1,"fa-solid","fa-asterisk"]],template:function(r,u){1&r&&(n.TgZ(0,"div",0),n.YNc(1,p,6,6,"label",1),n.YNc(2,g,3,3,"p",2),n.YNc(3,A,3,3,"p",2),n.TgZ(4,"input",3),n.NdJ("ngModelChange",function(T){return u.value=T})("change",function(T){return u.onFileSelected(T)}),n.qZA()()),2&r&&(n.xp6(1),n.Q6J("ngIf",u.label),n.xp6(1),n.Q6J("ngIf",u.selectedFileCount>1),n.xp6(1),n.Q6J("ngIf",u.selectedFileCount<=1),n.xp6(1),n.Q6J("multiple",u.multiple)("ngModel",u.value)("accept",u.accept))},dependencies:[x.O5,t.Fj,t.JJ,t.On,x.rS,m.X$],styles:[".text-danger[_ngcontent-%COMP%]{font-size:14px}.file-input[_ngcontent-%COMP%]{position:relative}.file-input[_ngcontent-%COMP%]   input[type=file][_ngcontent-%COMP%]{position:absolute;left:0;top:0;opacity:0;width:100%;height:100%;min-width:200px!important}.file-input[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{display:block;padding:8px;border:1px dashed #7ca0c5;border-radius:8px;font-size:14px;cursor:pointer;min-width:200px!important;text-align:center;overflow:hidden}"]}),_})()},5435:(P,C,a)=>{a.d(C,{f:()=>Q});var n=a(5861),f=a(8645),t=a(9291),x=a(8763),m=a(3999),h=a(8209),p=a(3562),g=a(1732),A=a(6814),O=a(6223),_=a(707),v=a(4896);function r(o,c){if(1&o&&(t.TgZ(0,"div")(1,"p"),t._uU(2),t.qZA()()),2&o){const e=c.$implicit;t.xp6(2),t.Oqu(e.value)}}function u(o,c){if(1&o&&(t.TgZ(0,"div",16),t.YNc(1,r,3,1,"div",11),t.ALo(2,"keyvalue"),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",t.lcZ(2,1,e.errors))}}function Z(o,c){if(1&o&&t._UZ(0,"img",25),2&o){const e=t.oxw(2).$implicit;t.Q6J("src",e.url,t.LSH)("alt",e.url)}}function T(o,c){if(1&o&&(t.TgZ(0,"p",26),t._uU(1),t.qZA()),2&o){const e=t.oxw(2).$implicit;t.xp6(1),t.Oqu(e.url)}}function b(o,c){if(1&o){const e=t.EpF();t.TgZ(0,"div",27)(1,"app-file-upload",28),t.NdJ("onValueChange",function(l){t.CHM(e);const s=t.oxw(2),d=s.$implicit,M=s.index,U=t.oxw();return t.KtG(U.onFileSelected(l,d.id,M))}),t.qZA()()}2&o&&(t.xp6(1),t.Q6J("multiple",!1))}function E(o,c){if(1&o){const e=t.EpF();t.TgZ(0,"div",29)(1,"button",30),t.NdJ("click",function(){t.CHM(e);const l=t.oxw(2).index,s=t.oxw();return t.KtG(s.showInputFile(l))}),t._UZ(2,"img",31),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"button",32),t.NdJ("click",function(){t.CHM(e);const l=t.oxw(2).$implicit,s=t.oxw();return t.KtG(s.deleteAttachment(l))}),t._UZ(6,"img",33),t.qZA()()}if(2&o){const e=t.oxw(2).$implicit;t.xp6(3),t.AsE(" ",t.lcZ(4,2,"change")," ",e.id,"")}}function F(o,c){if(1&o&&(t.TgZ(0,"div",18)(1,"div",19),t.YNc(2,Z,1,2,"img",20),t.YNc(3,T,2,1,"p",21),t.qZA(),t.TgZ(4,"div",22),t.YNc(5,b,2,1,"div",23),t.YNc(6,E,7,4,"div",24),t.qZA()()),2&o){const e=t.oxw(),i=e.$implicit,l=e.index,s=t.oxw();t.xp6(2),t.Q6J("ngIf",!s.ids.includes(i.id)),t.xp6(1),t.Q6J("ngIf",s.ids.includes(i.id)),t.xp6(2),t.Q6J("ngIf",s.index==l),t.xp6(1),t.Q6J("ngIf",s.index!=l)}}function I(o,c){if(1&o&&(t.ynx(0),t.YNc(1,F,7,4,"div",17),t.BQk()),2&o){const e=c.$implicit;t.xp6(1),t.Q6J("ngIf",e.mime_type.includes("image"))}}function w(o,c){1&o&&(t.TgZ(0,"p",34),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"data_not_found")))}function D(o,c){if(1&o){const e=t.EpF();t.TgZ(0,"div",27)(1,"app-file-upload",28),t.NdJ("onValueChange",function(l){t.CHM(e);const s=t.oxw(2),d=s.$implicit,M=s.index,U=t.oxw();return t.KtG(U.onFileSelected(l,d.id,M))}),t.qZA()()}2&o&&(t.xp6(1),t.Q6J("multiple",!1))}function N(o,c){if(1&o){const e=t.EpF();t.TgZ(0,"div",29)(1,"button",30),t.NdJ("click",function(){t.CHM(e);const l=t.oxw(2).index,s=t.oxw();return t.KtG(s.showInputFile(l))}),t._UZ(2,"img",31),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"button",32),t.NdJ("click",function(){t.CHM(e);const l=t.oxw(2).$implicit,s=t.oxw();return t.KtG(s.deleteAttachment(l))}),t._UZ(6,"img",33),t.qZA()()}if(2&o){const e=t.oxw(2).$implicit;t.xp6(3),t.AsE(" ",t.lcZ(4,2,"change")," ",e.id,"")}}function L(o,c){if(1&o&&(t.TgZ(0,"div",18)(1,"div",35),t._UZ(2,"img",36),t.TgZ(3,"p",27),t._uU(4),t.qZA()(),t.TgZ(5,"div",22),t.YNc(6,D,2,1,"div",23),t.YNc(7,N,7,4,"div",24),t.qZA()()),2&o){const e=t.oxw(),i=e.$implicit,l=e.index,s=t.oxw();t.xp6(4),t.Oqu(i.url),t.xp6(2),t.Q6J("ngIf",s.index==l),t.xp6(1),t.Q6J("ngIf",s.index!=l)}}function J(o,c){if(1&o&&(t.ynx(0),t.YNc(1,L,8,3,"div",17),t.BQk()),2&o){const e=c.$implicit;t.xp6(1),t.Q6J("ngIf",!e.mime_type.includes("image"))}}function y(o,c){if(1&o){const e=t.EpF();t.TgZ(0,"div",37)(1,"form",38)(2,"app-file-upload",28),t.NdJ("onValueChange",function(l){t.CHM(e);const s=t.oxw();return t.KtG(s.onFileSelectedNew(l))}),t.qZA()(),t.TgZ(3,"div",39)(4,"p-button",40),t.NdJ("click",function(){t.CHM(e);const l=t.oxw();return t.KtG(l.onSubmitNew())}),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"p-button",41),t.NdJ("click",function(){t.CHM(e);const l=t.oxw();return t.KtG(l.showImportForm=!1)}),t.ALo(7,"translate"),t.qZA()()()}2&o&&(t.xp6(2),t.Q6J("multiple",!0),t.xp6(2),t.Q6J("label",t.lcZ(5,3,"save")),t.xp6(2),t.Q6J("label",t.lcZ(7,5,"cancel")))}function K(o,c){if(1&o){const e=t.EpF();t.TgZ(0,"div",42)(1,"p-button",7),t.NdJ("click",function(){t.CHM(e);const l=t.oxw();return t.KtG(l.showImportForm=!0)}),t.ALo(2,"translate"),t.qZA()()}2&o&&(t.xp6(1),t.Q6J("label",t.lcZ(2,1,"add")))}let Q=(()=>{class o{constructor(e,i,l,s,d){this.toastr=e,this.translateService=i,this.router=l,this.dynamicDialog=s,this.http=d,this.filesName="files",this.endPoint="",this.listPageRoute="",this.listPageTitle="",this.showImportForm=!1,this.filesIds=[],this.values=new FormData,this.fileName="",this.ids=[],this.unsubscribe=new f.x}ngOnInit(){this.activeId=this.data.id}onFileSelected(e,i,l){e.target.files[0]&&(this.ids.includes(i)||this.ids.push(i),this.values.set(`${this.filesName}[${i}]`,e.target.files[0]),this.ids.map((s,d)=>{this.values.set(`mediaId[${d}]`,s)})),console.log(this.data),console.log(this.filesName),this.data[""+this.filesName].map((s,d)=>{this.index==d&&(s.url=e.target.files[0].name)})}onSubmit(){this.values.set("id",this.activeId),this.ids.length>0?this.http.post(this.endPoint,this.values).subscribe(e=>{this.toastr.success(e.message),this.clearAllForm(),this.router.navigate([this.listPageRoute])},e=>{this.errors=e.error.errors}):this.toastr.error(this.translateService.instant("no_file_changed"))}showInputFile(e){this.index=e}clearAllForm(){this.ids=[],this.filesIds=[],this.errors=null;for(const[e,i]of this.values)this.values.delete(e)}onFileSelectedNew(e){if(e.target.files[0])for(const[i,l]of Object.entries(e.target.files))this.values.set(`${this.filesName}[${i}]`,e.target.files[i]),this.filesIds.push(i)}onSubmitNew(){this.values.set("id",this.activeId),this.filesIds.length>0?this.http.post(this.endPoint,this.values).subscribe(e=>{this.toastr.success(e.message),this.clearAllForm(),this.router.navigate([this.listPageRoute])},e=>{this.errors=e.error.errors}):this.toastr.error(this.translateService.instant("no_file_changed"))}deleteAttachment(e){var i=this;return(0,n.Z)(function*(){i.values.set("id",i.activeId),i.values.set("mediaId[0]",e.id);const l={showHeader:!1,header:"delete",data:{message:"do_you_want_to_delete",acceptLabel:"delete",rejectLabel:"close",name:"url",data:{...e}},width:"300px",height:"164px"};(yield i.dynamicDialog.confirm(l))&&i.http.post(i.endPoint,i.values).subscribe(d=>{i.toastr.success(d.message),i.clearAllForm(),i.router.navigate([i.listPageRoute])},d=>{i.errors=d.error.errors})})()}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(x._W),t.Y36(m.sK),t.Y36(h.F0),t.Y36(p.U),t.Y36(g.O))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-update-attachment"]],inputs:{data:"data",filesName:"filesName",endPoint:"endPoint",listPageRoute:"listPageRoute",listPageTitle:"listPageTitle"},decls:33,vars:29,consts:[[1,"page-card"],[1,"header","row","justify-content-between","align-items-center"],[1,"title","pointer","col-md-6",3,"routerLink"],[1,"fa-solid","fa-arrow-left","me-2"],[1,"d-flex","align-items-center","justify-content-end","g-2","col-md-6"],[1,"px-1"],["styleClass","btn-cancel",3,"routerLink","label"],["styleClass","btn-filter",3,"label","click"],["class","alert alert-danger text-center fs-5",4,"ngIf"],[1,"row","items"],[1,"fa-solid","fa-qrcode"],[4,"ngFor","ngForOf"],["class","text-center alert-danger alert ",4,"ngIf"],[1,"addNew"],["class","import",4,"ngIf"],["class","px-1","style","width: 100px; margin-top: 20px;",4,"ngIf"],[1,"alert","alert-danger","text-center","fs-5"],["class","col-md-3",4,"ngIf"],[1,"col-md-3"],[1,"img"],["class","w-100",3,"src","alt",4,"ngIf"],["class","text-center",4,"ngIf"],[1,"d-flex","justify-content-center"],["class","",4,"ngIf"],["class","btns",4,"ngIf"],[1,"w-100",3,"src","alt"],[1,"text-center"],[1,""],["label","",3,"multiple","onValueChange"],[1,"btns"],[1,"btn-change",3,"click"],["src","assets/images/image.svg","alt",""],[1,"btn-delete",3,"click"],["src","assets/images/delete.svg","alt",""],[1,"text-center","alert-danger","alert"],[1,"file"],["src","assets/images/Frame.svg","alt","",1,""],[1,"import"],[1,"my-3"],[1,"d-flex","gap-2","align-items-center"],["styleClass","class",3,"label","click"],["styleClass","btn-cancel",3,"label","click"],[1,"px-1",2,"width","100px","margin-top","20px"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"h5",2),t._UZ(3,"i",3),t._uU(4),t.ALo(5,"titlecase"),t.ALo(6,"translate"),t.qZA(),t.TgZ(7,"div",4)(8,"div",5),t._UZ(9,"p-button",6),t.ALo(10,"translate"),t.qZA(),t.TgZ(11,"div",5)(12,"p-button",7),t.NdJ("click",function(){return i.onSubmit()}),t.ALo(13,"translate"),t.qZA()()()(),t.YNc(14,u,3,3,"div",8),t.TgZ(15,"div",9)(16,"p"),t._UZ(17,"i",10),t._uU(18),t.ALo(19,"titlecase"),t.ALo(20,"translate"),t.qZA(),t.YNc(21,I,2,1,"ng-container",11),t.qZA(),t.TgZ(22,"div",9)(23,"p"),t._UZ(24,"i",10),t._uU(25),t.ALo(26,"titlecase"),t.ALo(27,"translate"),t.qZA(),t.YNc(28,w,3,3,"p",12),t.YNc(29,J,2,1,"ng-container",11),t.qZA(),t.TgZ(30,"div",13),t.YNc(31,y,8,7,"div",14),t.YNc(32,K,3,3,"div",15),t.qZA()()),2&e&&(t.xp6(2),t.Q6J("routerLink",i.listPageRoute),t.xp6(2),t.hij("",t.lcZ(5,13,t.lcZ(6,15,i.listPageTitle))," "),t.xp6(5),t.Q6J("routerLink",i.listPageRoute)("label",t.lcZ(10,17,"cancel")),t.xp6(3),t.Q6J("label",t.lcZ(13,19,"save")),t.xp6(2),t.Q6J("ngIf",i.errors),t.xp6(4),t.hij(" ",t.lcZ(19,21,t.lcZ(20,23,"images_list"))," "),t.xp6(3),t.Q6J("ngForOf",i.data[""+i.filesName]),t.xp6(4),t.hij(" ",t.lcZ(26,25,t.lcZ(27,27,"files_list"))," "),t.xp6(3),t.Q6J("ngIf",0==(null==i.data[""+i.filesName]?null:i.data[""+i.filesName].length)),t.xp6(1),t.Q6J("ngForOf",i.data[""+i.filesName]),t.xp6(2),t.Q6J("ngIf",i.showImportForm),t.xp6(1),t.Q6J("ngIf",!i.showImportForm))},dependencies:[A.sg,A.O5,O._Y,O.JL,O.F,_.zx,h.rH,v.Y,A.rS,A.Nd,m.X$],styles:[".items[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px;font-weight:600;line-height:24px;color:#101828;margin:30px 0;width:100%}.items[_ngcontent-%COMP%]   .img[_ngcontent-%COMP%]{height:200px;width:200px;border:1px solid var(--mainColor);border-radius:10px;overflow-x:auto;-ms-overflow-style:none;scrollbar-width:none}.items[_ngcontent-%COMP%]   .img[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.items[_ngcontent-%COMP%]   .img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:198px;border-radius:10px}.items[_ngcontent-%COMP%]   .file[_ngcontent-%COMP%]{width:200px;height:200px;border:1px solid var(--mainColor);border-radius:14px;display:flex;flex-direction:column;justify-content:center;align-items:center;overflow-x:auto;-ms-overflow-style:none;scrollbar-width:none}.items[_ngcontent-%COMP%]   .file[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.items[_ngcontent-%COMP%]   .file[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:10px 0;width:100%}.items[_ngcontent-%COMP%]   .btns[_ngcontent-%COMP%]{display:flex;gap:20px}.items[_ngcontent-%COMP%]   .btns[_ngcontent-%COMP%]   .btn-change[_ngcontent-%COMP%]{background:var(--white);color:var(--mainColor);border:1px solid var(--mainColor);border-radius:3px;margin:6px 0;padding:7px 0;font-size:14px;width:120px}.items[_ngcontent-%COMP%]   .btns[_ngcontent-%COMP%]   .btn-delete[_ngcontent-%COMP%]{background:var(--white);color:var(--danger);border:1px solid var(--red);border-radius:3px;margin:6px 0;padding:7px 0;font-size:14px;width:60px}.customFileInput[_ngcontent-%COMP%]::-webkit-file-upload-button{visibility:hidden}.import[_ngcontent-%COMP%]{padding:20px;border:2px solid var(--mainColor);border-radius:8px;margin:10px 0}"]}),o})()},9773:(P,C,a)=>{a.d(C,{R:()=>m});var n=a(9360),f=a(8251),t=a(4829),x=a(2420);function m(h){return(0,n.e)((p,g)=>{(0,t.Xf)(h).subscribe((0,f.x)(g,()=>g.complete(),x.Z)),!g.closed&&p.subscribe(g)})}}}]);