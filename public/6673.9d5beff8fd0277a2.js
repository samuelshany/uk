"use strict";(self.webpackChunkkey=self.webpackChunkkey||[]).push([[6673],{6673:(b,Z,a)=>{a.r(Z),a.d(Z,{ProjectsModule:()=>de});var r=a(6814),m=a(8209),l=a(5861),_=a(471),h=function(n){return n.create="dashboard",n.view="dashboard",n.edit="dashboard",n.delete="dashboard",n}(h||{});const C=n=>{return{cols:[{field:"id",label:"id",class:""},{field:"project_name",label:"project_name",class:""},{field:"price",label:"price",format:i=>i.price?i.price:"-"},{label:"action",actions:[{id:h.delete,icon:"trash",class:"main-color",fun:(i=(0,l.Z)(function*(e){return yield n.projectsService.delete(e)}),function(o){return i.apply(this,arguments)})},{id:h.edit,icon:"pen-to-square",class:"main-color",route:"update"},{id:h.edit,icon:"eye",class:"main-color",route:"view"},{id:h.edit,icon:"copy",class:"main-color",route:"assign"}]}],Request:_.K.api.get,titleRow:"project_name"};var i};var A=a(5219),v=a(6924),O=a(8718),u=a(5946),t=a(9291),s=a(6223),p=a(8645),f=a(9773),w=a(4605),V=a(3012),U=a(3816),E=a(5835),B=a(68),M=a(8763),L=a(1771),N=a(8614),k=a(1904),D=a(3838),S=a(6098),R=a(5253),W=a(5304),z=a(4896),y=a(4779),j=a(3999);function K(n,i){1&n&&(t.TgZ(0,"div",6),t._UZ(1,"app-button",36),t.qZA()),2&n&&(t.xp6(1),t.Q6J("text","update_attachment")("iconPos","left")("icon","fa-solid fa-check"))}function $(n,i){if(1&n&&(t.TgZ(0,"div",37),t._uU(1),t.qZA()),2&n){const e=i.$implicit;t.xp6(1),t.hij(" ",e.value," ")}}function X(n,i){if(1&n&&(t.TgZ(0,"p",38),t._uU(1),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Oqu(null==e.serverValidation?null:e.serverValidation.project_name[0])}}function H(n,i){if(1&n&&(t.TgZ(0,"p",38),t._uU(1),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Oqu(null==e.serverValidation?null:e.serverValidation.project_phases[0])}}function tt(n,i){if(1&n&&(t.TgZ(0,"p",38),t._uU(1),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Oqu(null==e.serverValidation?null:e.serverValidation.deduction_options[0])}}function et(n,i){if(1&n&&(t.TgZ(0,"p",38),t._uU(1),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Oqu(null==e.serverValidation?null:e.serverValidation.parent_account_id[0])}}function nt(n,i){if(1&n&&(t.TgZ(0,"p",38),t._uU(1),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Oqu(null==e.serverValidation?null:e.serverValidation.client_infomartion[0])}}function ot(n,i){if(1&n&&(t.TgZ(0,"p",38),t._uU(1),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Oqu(null==e.serverValidation?null:e.serverValidation.start_date[0])}}function it(n,i){if(1&n&&(t.TgZ(0,"p",38),t._uU(1),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Oqu(null==e.serverValidation?null:e.serverValidation.end_date[0])}}function at(n,i){if(1&n&&(t.TgZ(0,"p",38),t._uU(1),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Oqu(null==e.serverValidation?null:e.serverValidation.project_description[0])}}function rt(n,i){if(1&n&&(t.TgZ(0,"p",38),t._uU(1),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Oqu(null==e.serverValidation?null:e.serverValidation.downpayment_option[0])}}function lt(n,i){if(1&n&&(t.TgZ(0,"p",38),t._uU(1),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Oqu(null==e.serverValidation?null:e.serverValidation.suppliers[0])}}function st(n,i){if(1&n&&(t.TgZ(0,"p",38),t._uU(1),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Oqu(null==e.serverValidation?null:e.serverValidation.assigned_engineer[0])}}function ct(n,i){if(1&n&&(t.TgZ(0,"p",38),t._uU(1),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Oqu(null==e.serverValidation?null:e.serverValidation.milestone[0])}}function pt(n,i){if(1&n&&(t.TgZ(0,"p",38),t._uU(1),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Oqu(null==e.serverValidation?null:e.serverValidation.estimated_cost[0])}}function ut(n,i){if(1&n&&(t.TgZ(0,"p",38),t._uU(1),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Oqu(null==e.serverValidation?null:e.serverValidation.assigned_budget[0])}}function dt(n,i){if(1&n&&(t.TgZ(0,"p",38),t._uU(1),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Oqu(null==e.serverValidation?null:e.serverValidation.downpayment[0])}}function gt(n,i){if(1&n&&(t.TgZ(0,"div",40)(1,"div",41),t._UZ(2,"img",42),t.TgZ(3,"div",43)(4,"h3"),t._uU(5),t.qZA(),t._UZ(6,"i",44),t.qZA()()()),2&n){const e=i.$implicit;t.xp6(5),t.Oqu(e.file_name)}}function mt(n,i){if(1&n&&(t.ynx(0),t.YNc(1,gt,7,1,"div",39),t.BQk()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.data.files)}}let P=(()=>{class n{constructor(e,o,c,g,x){this.fb=e,this.toaster=o,this.projectsService=c,this.route=g,this.router=x,this.accountConfig=B.a,this.unsubscribe=new p.x,this.formGroup=this.initForm(),this.engineers=O.x,this.clients=E.G,this.suppliers=w.h,this.projectPhases=V.N,this.deductionOptions=U.n,this.isLoading=!1,this.projects=[],this.values=new FormData}ngOnInit(){this.route.snapshot.paramMap.get("id")&&(this.id=this.route.snapshot.paramMap.get("id"),this.title="update_project",this.route.data.pipe((0,f.R)(this.unsubscribe)).subscribe({next:e=>{this.data=e.project.data,this.fillDataToUpdate()},error:e=>{}}))}reject(e){}convertFormGroupToFormData(){this.values.set("id",this.id),this.values.set("project_name",this.formGroup.get("project_name")?.value),this.values.set("parent_account_id",this.formGroup.get("parent_account_id")?.value),this.values.set("start_date",this.formGroup.get("start_date")?.value),this.values.set("end_date",this.formGroup.get("end_date")?.value),this.values.set("deadline",this.formGroup.get("deadlines")?.value),this.values.set("downpayment_option",this.formGroup.get("downpayment_option")?.value),this.values.set("client_information_id",this.formGroup.get("client_information")?.value),this.values.set("downpayment",this.formGroup.get("downpayment")?.value),this.values.set("project_description",this.formGroup.get("project_description")?.value),this.values.set("assigned_engineer_id",this.formGroup.get("assigned_engineer")?.value),this.values.set("assigned_budget",this.formGroup.get("assigned_budget")?.value),this.values.set("estimated_cost",this.formGroup.get("estimated_cost")?.value),this.values.set("milestone",this.formGroup.get("milestone")?.value),this.values.delete("suppliers"),this.formGroup.get("suppliers")?.value&&this.formGroup.get("suppliers")?.value.map((e,o)=>{this.values.set(`suppliers[${o}]`,e)}),this.values.delete("project_phases"),this.formGroup.get("project_phases")?.value&&this.formGroup.get("project_phases")?.value.map((e,o)=>{this.values.set(`project_phases[${o}]`,e)}),this.values.delete("deduction_options"),this.formGroup.get("deduction_options")?.value&&this.formGroup.get("deduction_options")?.value.map((e,o)=>{this.values.set(`deduction_options[${o}]`,e)})}onSubmit(){}onFileUpload(e){if(e.target.files[0])for(const[o,c]of Object.entries(e.target.files))this.values.set(`files[${o}]`,e.target.files[o])}setArrayData(e,o){for(const g of o)this.values.set(e+"[i]",g)}initForm(){return this.fb.group({id:[Number],project_name:["",s.kI.required],project_phases:[""],start_date:[""],end_date:[""],parent_account_id:["",s.kI.required],deadlines:[""],client_information:[""],deduction_options:[""],downpayment_option:[""],downpayment:[0],project_description:[""],assigned_engineer:[""],assigned_budget:[0],estimated_cost:[0],suppliers:[""],milestone:[""],files:this.fb.array([])})}accept(){this.formGroup.invalid?this.formGroup.markAllAsTouched():(this.convertFormGroupToFormData(),this.isLoading=!0,this.data?(console.log(this.values),this.projectsService.update(this.values).subscribe(e=>{this.toaster.success(e.message),this.router.navigate(["/key/project-management/projects"])},e=>{this.errors=e.error.errors,this.isLoading=!1})):this.projectsService.create(this.values).subscribe(e=>{this.toaster.success(e.message),this.router.navigate(["/key/project-management/projects"])},e=>{this.errors=e.error.errors,this.isLoading=!1}))}fillDataToUpdate(){this.formGroup.patchValue({id:this.data?.id,project_name:this.data?.project_name,parent_account_id:this.data?.parent_account_id,project_phases:this.getIds(this.data?.project_phases),start_date:this.data?.start_date,client_information:this.data?.client_information_id,end_date:this.data?.end_date,deduction_options:this.getIds(this.data?.deduction_options),downpayment_option:this.data?.downpayment_option,downpayment:this.data?.downpayment,assigned_budget:this.data?.assigned_budget,assigned_engineer:Number(this.data?.assigned_engineer_id),milestone:this.data?.milestone,suppliers:this.getIds(this.data?.suppliers),deadlines:this.data?.deadline,estimated_cost:this.data?.estimated_cost,project_description:this.data?.project_description})}getIds(e){let o=[];for(const c of e)o.push(c.id);return o}ngOnDestroy(){this.unsubscribe.next(!0),this.unsubscribe.complete()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(s.qu),t.Y36(M._W),t.Y36(T),t.Y36(m.gz),t.Y36(m.F0))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-new-project"]],decls:99,vars:150,consts:[[1,"container-sm","main","rounded"],[1,"header","row","justify-content-between","align-items-center"],["routerLink","/key/project-management/projects",1,"title","pointer","col-md-6"],[1,"fa-solid","fa-arrow-left","me-2"],[1,"d-flex","align-items-center","justify-content-end","g-2","col-md-6"],["class","px-1",4,"ngIf"],[1,"px-1"],["routerLink","/key/project-management/projects",1,"btn-cancel",3,"iconPos","icon","text"],[1,"btn-filter",3,"text","iconPos","icon","click"],[3,"formGroup","onSubmit"],["class","text-error",4,"ngFor","ngForOf"],[1,"row","mt-4"],[1,"fw-bold","mb-4"],[1,"col-md-6","col-12"],["formControlName","project_name","ngDefaultControl","","placeholder","",3,"type","text"],["class","error",4,"ngIf"],["formControlName","project_phases","optionLabel","name","optionValue","id","ngDefaultControl","","placeholder","select",3,"text","request"],["optionLabel","name","optionValue","id","placeholder","select","formControlName","deduction_options","ngDefaultControl","",3,"request","text"],["optionLabel","name_code","optionValue","id","text","parent","formControlName","parent_account_id","ngDefaultControl","","placeholder","select",3,"request"],[1,"col-md-4","col-12"],["optionLabel","name","optionValue","id","formControlName","client_information","ngDefaultControl","","placeholder","select",3,"request","text"],["formControlName","start_date","ngDefaultControl","",3,"text","placeholder"],["formControlName","end_date","ngDefaultControl","",3,"text","placeholder"],[1,"col-12"],["formControlName","project_description","ngDefaultControl","","placeholder","",3,"type","text"],["optionLabel","name","optionValue","id","formControlName","downpayment_option","ngDefaultControl","","placeholder","",3,"text"],["optionLabel","name","optionValue","id","formControlName","suppliers","ngDefaultControl","",3,"request","text","placeholder"],["optionLabel","name","optionValue","id","formControlName","assigned_engineer","ngDefaultControl","","placeholder","select",3,"request","text"],["formControlName","milestone","ngDefaultControl","","placeholder","",3,"type","text"],["formControlName","deadlines","ngDefaultControl","",3,"text","placeholder"],["formControlName","estimated_cost","ngDefaultControl","","placeholder","",3,"showButtons","mode","maxFractionDigits","minFractionDigits","text"],["formControlName","assigned_budget","ngDefaultControl","","placeholder","",3,"showButtons","mode","maxFractionDigits","minFractionDigits","text"],["formControlName","downpayment","ngDefaultControl","","placeholder","",3,"showButtons","mode","maxFractionDigits","minFractionDigits","text"],[4,"ngIf"],[1,"mt-5"],["formControlName","files","text","File Upload",3,"onValueChange"],[1,"btn-cancel",3,"text","iconPos","icon"],[1,"text-error"],[1,"error"],["class","col-md-3 col-12",4,"ngFor","ngForOf"],[1,"col-md-3","col-12"],[1,"card",2,"width","100%"],["src","assets/icons/form.svg","alt","Card image cap",1,"card-img-top","p-5",2,"width","50%","margin","auto","height","40%"],[1,"card-body","d-flex","justify-content-between"],[1,"fa","fa-xl","my-auto","fa-trash",2,"color","red"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"h5",2),t._UZ(3,"i",3),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"div",4),t.YNc(7,K,2,3,"div",5),t.TgZ(8,"div",6),t._UZ(9,"app-button",7),t.qZA(),t.TgZ(10,"div",6)(11,"app-button",8),t.NdJ("click",function(){return o.accept()}),t.qZA()()()(),t.TgZ(12,"app-form",9),t.NdJ("onSubmit",function(){return o.accept()}),t.YNc(13,$,2,1,"div",10),t.ALo(14,"keyvalue"),t.TgZ(15,"div",11)(16,"h3",12),t._uU(17),t.ALo(18,"translate"),t.qZA(),t.TgZ(19,"div",13),t._UZ(20,"app-text",14),t.ALo(21,"translate"),t.YNc(22,X,2,1,"p",15),t.qZA(),t.TgZ(23,"div",13),t._UZ(24,"app-multiselect",16),t.ALo(25,"translate"),t.YNc(26,H,2,1,"p",15),t.qZA(),t.TgZ(27,"div",13),t._UZ(28,"app-multiselect",17),t.ALo(29,"translate"),t.YNc(30,tt,2,1,"p",15),t.qZA(),t.TgZ(31,"div",13),t._UZ(32,"app-dropdown",18),t.YNc(33,et,2,1,"p",15),t.qZA()(),t.TgZ(34,"div",11)(35,"h3",12),t._uU(36),t.ALo(37,"translate"),t.qZA(),t.TgZ(38,"div",19),t._UZ(39,"app-dropdown",20),t.ALo(40,"translate"),t.YNc(41,nt,2,1,"p",15),t.qZA(),t.TgZ(42,"div",19),t._UZ(43,"app-date",21),t.ALo(44,"translate"),t.ALo(45,"translate"),t.YNc(46,ot,2,1,"p",15),t.qZA(),t.TgZ(47,"div",19),t._UZ(48,"app-date",22),t.ALo(49,"translate"),t.ALo(50,"translate"),t.YNc(51,it,2,1,"p",15),t.qZA(),t.TgZ(52,"div",23),t._UZ(53,"app-textarea",24),t.ALo(54,"translate"),t.YNc(55,at,2,1,"p",15),t.qZA(),t.TgZ(56,"div",19),t._UZ(57,"app-text",25),t.ALo(58,"translate"),t.YNc(59,rt,2,1,"p",15),t.qZA(),t.TgZ(60,"div",19),t._UZ(61,"app-multiselect",26),t.ALo(62,"translate"),t.YNc(63,lt,2,1,"p",15),t.qZA(),t.TgZ(64,"div",19),t._UZ(65,"app-dropdown",27),t.ALo(66,"translate"),t.YNc(67,st,2,1,"p",15),t.qZA(),t.TgZ(68,"div",19),t._UZ(69,"app-text",28),t.ALo(70,"translate"),t.YNc(71,ct,2,1,"p",15),t.qZA(),t.TgZ(72,"div",19),t._UZ(73,"app-date",29),t.ALo(74,"translate"),t.ALo(75,"translate"),t.qZA()(),t.TgZ(76,"div",11)(77,"h3",12),t._uU(78),t.ALo(79,"translate"),t.qZA(),t.TgZ(80,"div",19),t._UZ(81,"app-number-input",30),t.ALo(82,"translate"),t.YNc(83,pt,2,1,"p",15),t.qZA(),t.TgZ(84,"div",19),t._UZ(85,"app-number-input",31),t.ALo(86,"translate"),t.YNc(87,ut,2,1,"p",15),t.qZA(),t.TgZ(88,"div",19),t._UZ(89,"app-number-input",32),t.ALo(90,"translate"),t.YNc(91,dt,2,1,"p",15),t.qZA()(),t.TgZ(92,"div",11)(93,"h3",12),t._uU(94),t.ALo(95,"translate"),t.qZA(),t.YNc(96,mt,2,1,"ng-container",33),t.TgZ(97,"div",34)(98,"app-file-upload",35),t.NdJ("onValueChange",function(g){return o.onFileUpload(g)}),t.qZA()()()()()),2&e&&(t.xp6(4),t.hij("",t.lcZ(5,102,o.data?"update_project":"add_new_project")," "),t.xp6(3),t.Q6J("ngIf","update_journal_entry"==o.title),t.xp6(2),t.Q6J("iconPos","left")("icon","fa-solid fa-ban")("text","cancel"),t.xp6(2),t.Q6J("text","save")("iconPos","left")("icon","fa-solid fa-check"),t.xp6(1),t.Q6J("formGroup",o.formGroup),t.xp6(1),t.Q6J("ngForOf",t.lcZ(14,104,o.errors)),t.xp6(4),t.Oqu(t.lcZ(18,106,"project_creation")),t.xp6(3),t.Tol("d-flex flex-column justify-content-between"),t.s9C("text",t.lcZ(21,108,"project_name")),t.Q6J("type","text"),t.xp6(2),t.Q6J("ngIf",null==o.serverValidation?null:o.serverValidation.project_name),t.xp6(2),t.Tol("d-flex flex-column justify-content-between"),t.s9C("text",t.lcZ(25,110,"project_phase")),t.Q6J("request",o.projectPhases.api.get),t.xp6(2),t.Q6J("ngIf",null==o.serverValidation?null:o.serverValidation.project_phases),t.xp6(2),t.Tol("d-flex flex-column justify-content-between"),t.s9C("text",t.lcZ(29,112,"deduction_options")),t.Q6J("request",o.deductionOptions.api.get),t.xp6(2),t.Q6J("ngIf",null==o.serverValidation?null:o.serverValidation.deduction_options),t.xp6(2),t.Tol("d-flex flex-column justify-content-between"),t.Q6J("request",o.accountConfig.api.getParent),t.xp6(1),t.Q6J("ngIf",null==o.serverValidation?null:o.serverValidation.parent_account_id),t.xp6(3),t.Oqu(t.lcZ(37,114,"project_assignment")),t.xp6(3),t.Tol("d-flex flex-column justify-content-between"),t.s9C("text",t.lcZ(40,116,"client_information")),t.Q6J("request",o.clients.api.get),t.xp6(2),t.Q6J("ngIf",null==o.serverValidation?null:o.serverValidation.client_information),t.xp6(2),t.Tol("d-flex flex-column justify-content-between"),t.s9C("text",t.lcZ(44,118,"start_date")),t.s9C("placeholder",t.lcZ(45,120,"Start Date")),t.xp6(3),t.Q6J("ngIf",null==o.serverValidation?null:o.serverValidation.start_date),t.xp6(2),t.Tol("d-flex flex-column justify-content-between"),t.s9C("text",t.lcZ(49,122,"end_date")),t.s9C("placeholder",t.lcZ(50,124,"End Date")),t.xp6(3),t.Q6J("ngIf",null==o.serverValidation?null:o.serverValidation.end_date),t.xp6(2),t.Tol("d-flex flex-column justify-content-between"),t.s9C("text",t.lcZ(54,126,"project_description")),t.Q6J("type","text"),t.xp6(2),t.Q6J("ngIf",null==o.serverValidation?null:o.serverValidation.project_description),t.xp6(2),t.Tol("d-flex flex-column justify-content-between"),t.s9C("text",t.lcZ(58,128,"Downpayment_options")),t.xp6(2),t.Q6J("ngIf",null==o.serverValidation?null:o.serverValidation.downpayment_option),t.xp6(2),t.Tol("d-flex flex-column justify-content-between"),t.s9C("text",t.lcZ(62,130,"suppliers")),t.s9C("placeholder","select"),t.Q6J("request",o.suppliers.api.get),t.xp6(2),t.Q6J("ngIf",null==o.serverValidation?null:o.serverValidation.suppliers),t.xp6(2),t.Tol("d-flex flex-column justify-content-between"),t.s9C("text",t.lcZ(66,132,"assigned_engineer")),t.Q6J("request",o.engineers.api.get),t.xp6(2),t.Q6J("ngIf",null==o.serverValidation?null:o.serverValidation.assigned_engineer),t.xp6(2),t.Tol("d-flex flex-column justify-content-between"),t.s9C("text",t.lcZ(70,134,"milestones")),t.Q6J("type","text"),t.xp6(2),t.Q6J("ngIf",null==o.serverValidation?null:o.serverValidation.milestone),t.xp6(2),t.Tol("d-flex flex-column justify-content-between"),t.s9C("text",t.lcZ(74,136,"deadlines")),t.s9C("placeholder",t.lcZ(75,138,"deadlines")),t.xp6(5),t.Oqu(t.lcZ(79,140,"budget_management")),t.xp6(3),t.Tol("d-flex flex-column justify-content-between"),t.s9C("text",t.lcZ(82,142,"estimated_cost_for_resource")),t.Q6J("showButtons",!1)("mode","decimal")("maxFractionDigits",3)("minFractionDigits",2),t.xp6(2),t.Q6J("ngIf",null==o.serverValidation?null:o.serverValidation.estimated_cost),t.xp6(2),t.Tol("d-flex flex-column justify-content-between"),t.s9C("text",t.lcZ(86,144,"assigned_budget")),t.Q6J("showButtons",!1)("mode","decimal")("maxFractionDigits",3)("minFractionDigits",2),t.xp6(2),t.Q6J("ngIf",null==o.serverValidation?null:o.serverValidation.assigned_budget),t.xp6(2),t.Tol("d-flex flex-column justify-content-between"),t.s9C("text",t.lcZ(90,146,"downpayment")),t.Q6J("showButtons",!1)("mode","decimal")("maxFractionDigits",3)("minFractionDigits",2),t.xp6(2),t.Q6J("ngIf",null==o.serverValidation?null:o.serverValidation.downpayment),t.xp6(3),t.Oqu(t.lcZ(95,148,"document_management")),t.xp6(2),t.Q6J("ngIf",o.data))},dependencies:[r.sg,r.O5,m.rH,L.U,s.Fj,s.JJ,s.JL,s.sg,s.u,N.T,k.D,D.J,S.I,R.R,W.z,z.Y,y.r,r.Nd,j.X$],styles:["[_nghost-%COMP%]   .main[_ngcontent-%COMP%]{background-color:var(--white);padding:2rem 2.8rem!important}[_nghost-%COMP%]   .main[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .import[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:1.5rem}[_nghost-%COMP%]   .main[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .import[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{font-size:1.5rem;height:30px}[_nghost-%COMP%]   .main[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .import[_ngcontent-%COMP%]   .error[_ngcontent-%COMP%]{color:var(--red);font-size:1.4rem}[_nghost-%COMP%]   .main[_ngcontent-%COMP%]   app-form[_ngcontent-%COMP%]   .entry-no[_ngcontent-%COMP%]{padding-right:1.5rem}[_nghost-%COMP%]   .main[_ngcontent-%COMP%]   app-form[_ngcontent-%COMP%]   .date[_ngcontent-%COMP%]{padding-left:1.5rem}[_nghost-%COMP%]   .main[_ngcontent-%COMP%]   app-form[_ngcontent-%COMP%]   .table-responsive[_ngcontent-%COMP%]{margin-top:3rem;margin-bottom:5rem}[_nghost-%COMP%]   .main[_ngcontent-%COMP%]   app-form[_ngcontent-%COMP%]   .table-responsive[_ngcontent-%COMP%]   .action[_ngcontent-%COMP%]{display:flex;padding:17px 5px;border:none}[_nghost-%COMP%]   .main[_ngcontent-%COMP%]   app-form[_ngcontent-%COMP%]   .table-responsive[_ngcontent-%COMP%]   .total[_ngcontent-%COMP%]{background-color:var(--mainColor)!important;color:var(--white);font-size:14px;padding:10px}.col-12[_ngcontent-%COMP%]{margin-top:2rem}.card-body[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{width:auto;font-weight:700;color:#003d5b;padding-left:15px}"]}),n})();var J=a(7344),F=a(6655),I=a(2823),_t=a(1087),Q=a(1556),ft=a(1732),ht=a(3562);let T=(()=>{class n{constructor(e,o,c){this.http=e,this.dynamicDialog=o,this.toastr=c}get(e){return this.http.get(_.K.api.get)}getById(e){return this.http.get(_.K.api.getById+e)}getAssignmentByProjectId(e){return this.http.get(_.K.api.getAssigmentByProjectId+e)}getAssignmentById(e){return this.http.get(_.K.api.getAssigmentById+e)}getCategories(){return this.http.getWithParam(J.t.api.get,{limit:"all"})}getUnits(){return this.http.getWithParam(F.R.api.get,{limit:"all"})}getClauses(){return this.http.getWithParam(I.N.api.get,{limit:"all"})}getDeduction_options(){return this.http.getWithParam(U.n.api.get,{limit:"all"})}getConstructionName(){return this.http.getWithParam(Q.N.api.get,{limit:"all"})}getJournal_entries(){return this.http.getWithParam(_t.X.api.get,{limit:"all"})}openDialogToCreate(){return this.dynamicDialog.showDialogWithComponent({showHeader:!1,header:"add_project",data:{acceptLabel:"Add",rejectLabel:"Cancel"},width:"500px",height:"auto"},P)}create(e){return this.http.post(_.K.api.create,e)}delete(e){var o=this;return(0,l.Z)(function*(){const c={showHeader:!1,header:"delete",data:{message:"do_you_want_to_delete",acceptLabel:"delete",rejectLabel:"close",data:{...e},name:"name"},width:"500px",height:"auto"};if(yield o.dynamicDialog.confirm(c))try{const x=yield o.http.delete(_.K.api.delete+e.id).toPromise();return o.toastr.success(x.message),x}catch(x){throw o.toastr.error(x.error.message),x}return!1})()}openDialogToUpdate(e){var o=this;return(0,l.Z)(function*(){const c={showHeader:!1,header:"update_project",data:{acceptLabel:"update",rejectLabel:"cancel",data:{...e}},height:"330px",width:"auto"};return yield o.dynamicDialog.showDialogWithComponent(c,P)})()}update(e){return console.log(e.get("id")),this.http.post(_.K.api.update+e.get("id"),e)}assign(e){return console.log(e.get("id")),this.http.post(_.K.api.assign+e.get("id"),e)}updateAssign(e){return this.http.post(_.K.api.updateAssign+e.get("id"),e)}exportEn(e){return this.http.getWithParam(_.K.api.exportTrackEn+e)}exportAr(e){return this.http.getWithParam(_.K.api.exportTrackAr+e)}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(ft.O),t.LFG(ht.U),t.LFG(M._W))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var vt=a(2377),xt=a(359),Zt=a(5077),Ct=a(3826);let At=(()=>{class n{constructor(e){this.projectsService=e,this.tableConfig=C(this),this.filtersConfig=[{field:"search",label:"search",type:v.W.TEXT,placeholder:"search"},{field:"creator_id",label:"created_by",type:v.W.SELECT,options:{value:"id",label:"name"},request:O.x.api.get,placeholder:"select"},{field:"from",label:"from",type:v.W.DATE},{field:"to",label:"to",type:v.W.DATE}],this.sortConfig=[{optionLabel:"label",optionValue:"field",key:"sort_by",placeholder:"sort_by",data:[{label:"Name",field:"name"},{label:"id",field:"id"}]},{optionLabel:"label",optionValue:"field",key:"sort_type",placeholder:"sort_type",data:[{label:u.q.asc,field:u.q.asc},{label:u.q.desc,field:u.q.desc}]}],this.permissions=h,this.icon=A.dv}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(T))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-list-projects"]],decls:17,vars:14,consts:[[1,"page-card"],[1,"d-flex","align-items-center","justify-content-between"],[1,"title"],[1,"d-flex"],["routerLink","/key/project-management/projects/create",3,"text","icon","iconPos"],[1,"d-flex","flex-row","align-items-center","justify-content-between"],[3,"SortConfig"],["sort",""],[3,"config"],["filter",""],[1,"table"],[3,"tableConfig","pagination","filter","sort"],[1,"d-flex","align-items-center","justify-content-center"],["pagination",""]],template:function(e,o){if(1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"h5",2),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"div",3),t._UZ(6,"app-button",4),t.qZA()(),t.TgZ(7,"div",5),t._UZ(8,"ukt-sort",6,7)(10,"ukt-filter",8,9),t.qZA(),t.TgZ(12,"div",10),t._UZ(13,"app-table",11),t.qZA(),t.TgZ(14,"div",12),t._UZ(15,"ukt-pagination",null,13),t.qZA()()),2&e){const c=t.MAs(9),g=t.MAs(11),x=t.MAs(16);t.xp6(3),t.Oqu(t.lcZ(4,12,"projects_list")),t.xp6(3),t.Tol("btn-filter"),t.Q6J("text","new")("icon",o.icon.PLUS)("iconPos","left"),t.xp6(2),t.Q6J("SortConfig",o.sortConfig),t.xp6(2),t.Q6J("config",o.filtersConfig),t.xp6(3),t.Q6J("tableConfig",o.tableConfig)("pagination",x)("filter",g)("sort",c)}},dependencies:[m.rH,vt.a,xt.Q,y.r,Zt.z,Ct.x,j.X$]}),n})(),Y=(()=>{class n{constructor(e){this.projectService=e}resolve(e){return this.projectService.getById(e.params.id)}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(T))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Tt(n,i){if(1&n&&(t.TgZ(0,"h4",13),t._uU(1),t.qZA()),2&n){const e=i.$implicit;t.xp6(1),t.Oqu(e.name)}}function Ot(n,i){if(1&n&&(t.TgZ(0,"h4",13),t._uU(1),t.qZA()),2&n){const e=i.$implicit;t.xp6(1),t.Oqu(e.name)}}function jt(n,i){if(1&n&&(t.TgZ(0,"h4",17),t._uU(1),t.qZA()),2&n){const e=i.$implicit;t.xp6(1),t.Oqu(e.name)}}function qt(n,i){if(1&n&&(t.TgZ(0,"div",20)(1,"div",21),t._UZ(2,"img",22),t.TgZ(3,"div",23)(4,"h3"),t._uU(5),t.qZA()()()()),2&n){const e=i.$implicit;t.xp6(5),t.Oqu(e.file_name)}}let wt=(()=>{class n{constructor(e){this.route=e,this.unsubscribe=new p.x}ngOnInit(){this.route.snapshot.paramMap.get("id")&&(this.activeId=this.route.snapshot.paramMap.get("id"),this.route.data.pipe((0,f.R)(this.unsubscribe)).subscribe({next:e=>{this.data=e.project.data,console.log(e)},error:e=>{}}))}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(m.gz))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-view-project"]],decls:130,vars:81,consts:[[1,"p-5","bg-white"],[1,"d-flex"],["routerLink","/key/project-management/projects",1,"fw-bold","fs-1"],[1,"fa-solid","fa-arrow-left","me-2"],[1,"inventory-view-btns"],[3,"text","iconPos","routerLink"],[1,"row","mt-5"],[1,"my-5"],[1,"col-12","p-2","rounded-5","detail"],[1,"row"],[1,"col-12","col-md-4"],[1,"p-4"],[1,"mb-4","fs-2","fw-bold"],[1,"mb-4","fs-2"],["class"," mb-4 fs-2",4,"ngFor","ngForOf"],[1,"p-2"],[1,"mb-2","fw-bold"],[1,"mb-2"],["class"," mb-2",4,"ngFor","ngForOf"],["class","col-md-3 col-12",4,"ngFor","ngForOf"],[1,"col-md-3","col-12"],[1,"card",2,"width","100%"],["src","assets/icons/form.svg","alt","Card image cap",1,"card-img-top","p-5",2,"width","50%","margin","auto","height","40%"],[1,"card-body","d-flex","justify-content-between"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"h2",2),t._UZ(3,"i",3),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"div",4),t._UZ(7,"app-button",5),t.qZA()(),t.TgZ(8,"div",6)(9,"h2",7),t._uU(10),t.ALo(11,"translate"),t.qZA(),t.TgZ(12,"div",8)(13,"div",9)(14,"div",10)(15,"div",11)(16,"h4",12),t._uU(17),t.ALo(18,"translate"),t.qZA(),t.TgZ(19,"h4",13),t._uU(20),t.qZA()()(),t.TgZ(21,"div",10)(22,"div",11)(23,"h4",12),t._uU(24),t.ALo(25,"translate"),t.qZA(),t.YNc(26,Tt,2,1,"h4",14),t.qZA()(),t.TgZ(27,"div",10)(28,"div",11)(29,"h4",12),t._uU(30),t.ALo(31,"translate"),t.qZA(),t.YNc(32,Ot,2,1,"h4",14),t.qZA()()()(),t.TgZ(33,"h2",7),t._uU(34),t.ALo(35,"translate"),t.qZA(),t.TgZ(36,"div",8)(37,"div",9)(38,"div",10)(39,"div",15)(40,"h4",16),t._uU(41),t.ALo(42,"translate"),t.qZA(),t.TgZ(43,"h4",17),t._uU(44),t.qZA()()(),t.TgZ(45,"div",10)(46,"div",15)(47,"h4",16),t._uU(48),t.ALo(49,"translate"),t.qZA(),t.TgZ(50,"h4",17),t._uU(51),t.qZA()()(),t.TgZ(52,"div",10)(53,"div",15)(54,"h4",16),t._uU(55),t.ALo(56,"translate"),t.qZA(),t.TgZ(57,"h4",17),t._uU(58),t.qZA()()(),t.TgZ(59,"div",10)(60,"div",15)(61,"h4",16),t._uU(62),t.ALo(63,"translate"),t.qZA(),t.TgZ(64,"h4",17),t._uU(65),t.qZA()()(),t.TgZ(66,"div",10)(67,"div",15)(68,"h4",16),t._uU(69),t.ALo(70,"translate"),t.qZA(),t.YNc(71,jt,2,1,"h4",18),t.qZA()(),t.TgZ(72,"div",10)(73,"div",15)(74,"h4",16),t._uU(75),t.ALo(76,"translate"),t.qZA(),t.TgZ(77,"h4",17),t._uU(78),t.qZA()()(),t.TgZ(79,"div",10)(80,"div",15)(81,"h4",16),t._uU(82),t.ALo(83,"translate"),t.qZA(),t.TgZ(84,"h4",17),t._uU(85),t.qZA()()(),t.TgZ(86,"div",10)(87,"div",15)(88,"h4",16),t._uU(89),t.ALo(90,"translate"),t.qZA(),t.TgZ(91,"h4",17),t._uU(92),t.qZA()()(),t.TgZ(93,"div",10)(94,"div",15)(95,"h4",16),t._uU(96),t.ALo(97,"translate"),t.qZA(),t.TgZ(98,"h4",17),t._uU(99),t.qZA()()()()(),t.TgZ(100,"h2",7),t._uU(101),t.ALo(102,"translate"),t.qZA(),t.TgZ(103,"div",8)(104,"div",9)(105,"div",10)(106,"div",15)(107,"h4",16),t._uU(108),t.ALo(109,"translate"),t.qZA(),t.TgZ(110,"h4",17),t._uU(111),t.qZA()()(),t.TgZ(112,"div",10)(113,"div",15)(114,"h4",16),t._uU(115),t.ALo(116,"translate"),t.qZA(),t.TgZ(117,"h4",17),t._uU(118),t.qZA()()(),t.TgZ(119,"div",10)(120,"div",15)(121,"h4",16),t._uU(122),t.ALo(123,"translate"),t.qZA(),t.TgZ(124,"h4",17),t._uU(125),t.qZA()()()()(),t.TgZ(126,"h2",7),t._uU(127),t.ALo(128,"translate"),t.qZA(),t.YNc(129,qt,6,1,"div",19),t.qZA()()),2&e&&(t.xp6(4),t.hij(" ",t.lcZ(5,41,"project_details")," "),t.xp6(3),t.Tol("btn-cancel d-inline-block "),t.Q6J("text","track")("iconPos","left")("routerLink","/key/project-management/projects/track/"+o.activeId),t.xp6(3),t.Oqu(t.lcZ(11,43,"project_creation")),t.xp6(7),t.hij("",t.lcZ(18,45,"project_name"),": "),t.xp6(3),t.Oqu(o.data.project_name),t.xp6(4),t.Oqu(t.lcZ(25,47,"deduction_options")),t.xp6(2),t.Q6J("ngForOf",o.data.deduction_options),t.xp6(4),t.hij("",t.lcZ(31,49,"Project-phases"),":"),t.xp6(2),t.Q6J("ngForOf",o.data.project_phases),t.xp6(2),t.Oqu(t.lcZ(35,51,"project_assignment")),t.xp6(7),t.Oqu(t.lcZ(42,53,"client_information")),t.xp6(3),t.Oqu(o.data.client_information_name),t.xp6(4),t.Oqu(t.lcZ(49,55,"downpayment_option")),t.xp6(3),t.Oqu(o.data.downpayment_option),t.xp6(4),t.Oqu(t.lcZ(56,57,"Assigned Engineer")),t.xp6(3),t.Oqu(o.data.assigned_engineer_name),t.xp6(4),t.Oqu(t.lcZ(63,59,"start_date")),t.xp6(3),t.Oqu(o.data.start_date),t.xp6(4),t.Oqu(t.lcZ(70,61,"suppliers")),t.xp6(2),t.Q6J("ngForOf",o.data.suppliers),t.xp6(4),t.Oqu(t.lcZ(76,63,"milestones")),t.xp6(3),t.Oqu(o.data.milestone),t.xp6(4),t.Oqu(t.lcZ(83,65,"end_date")),t.xp6(3),t.Oqu(o.data.end_date),t.xp6(4),t.Oqu(t.lcZ(90,67,"project_description")),t.xp6(3),t.Oqu(o.data.project_description),t.xp6(4),t.Oqu(t.lcZ(97,69,"deadlines")),t.xp6(3),t.Oqu(o.data.deadline),t.xp6(2),t.Oqu(t.lcZ(102,71,"budget_management")),t.xp6(7),t.Oqu(t.lcZ(109,73,"estimated_cost_for_resource")),t.xp6(3),t.Oqu(o.data.estimated_cost),t.xp6(4),t.Oqu(t.lcZ(116,75,"assigned_budget")),t.xp6(3),t.Oqu(o.data.assigned_budget),t.xp6(4),t.Oqu(t.lcZ(123,77,"downpayment")),t.xp6(3),t.Oqu(o.data.downpayment),t.xp6(2),t.Oqu(t.lcZ(128,79,"document_management")),t.xp6(2),t.Q6J("ngForOf",o.data.files))},dependencies:[r.sg,m.rH,y.r,j.X$],styles:[".detail[_ngcontent-%COMP%]{background-color:var(--lightGray);padding:20px!important}.detail[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:500}i[_ngcontent-%COMP%]{cursor:pointer}h2[_ngcontent-%COMP%]{color:#003d5b}"]}),n})();function yt(n,i){if(1&n&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.qZA(),t.TgZ(11,"td"),t._uU(12),t.qZA(),t.TgZ(13,"td"),t._uU(14),t.qZA(),t.TgZ(15,"td"),t._uU(16),t.qZA(),t.TgZ(17,"td"),t._uU(18),t.qZA(),t.TgZ(19,"td"),t._uU(20),t.qZA()()),2&n){const e=i.$implicit;t.xp6(2),t.Oqu(e.id),t.xp6(2),t.Oqu(e.clause_name),t.xp6(2),t.Oqu(e.unit_name),t.xp6(2),t.Oqu(e.ratio),t.xp6(2),t.Oqu(e.project_management_category_name),t.xp6(2),t.Oqu(e.previous_amount),t.xp6(2),t.Oqu(e.current_amount),t.xp6(2),t.Oqu(e.total_amount),t.xp6(2),t.Oqu(e.total_price),t.xp6(2),t.Oqu(e.notes)}}function bt(n,i){if(1&n&&(t.TgZ(0,"tr"),t._UZ(1,"td",28),t.TgZ(2,"td",29),t._uU(3),t.qZA(),t.TgZ(4,"td",28),t._uU(5),t.qZA()()),2&n){const e=i.$implicit;t.xp6(3),t.Oqu(e.name),t.xp6(2),t.Oqu(e.price)}}function Pt(n,i){if(1&n&&(t.TgZ(0,"div",11)(1,"div",12)(2,"h2",13),t._uU(3),t.ALo(4,"translate"),t.qZA(),t._UZ(5,"app-button",14),t.qZA(),t.TgZ(6,"div",15)(7,"div",16)(8,"label",17),t._uU(9),t.ALo(10,"translate"),t.qZA(),t.TgZ(11,"div",18)(12,"h4",19),t._uU(13),t.qZA()()(),t.TgZ(14,"div",16)(15,"label",17),t._uU(16),t.ALo(17,"translate"),t.qZA(),t.TgZ(18,"div",18)(19,"h4",19),t._uU(20),t.qZA()()(),t.TgZ(21,"div",16)(22,"label",17),t._uU(23),t.ALo(24,"translate"),t.qZA(),t.TgZ(25,"div",18)(26,"h4",20),t._uU(27),t.qZA()()()(),t.TgZ(28,"div",21)(29,"table",22)(30,"thead")(31,"tr")(32,"th",23),t._uU(33),t.ALo(34,"translate"),t.qZA(),t.TgZ(35,"th",23),t._uU(36),t.ALo(37,"translate"),t.qZA(),t.TgZ(38,"th",23),t._uU(39),t.ALo(40,"translate"),t.qZA(),t.TgZ(41,"th",23),t._uU(42),t.ALo(43,"translate"),t.qZA(),t.TgZ(44,"th",23),t._uU(45),t.ALo(46,"translate"),t.qZA(),t.TgZ(47,"th",24),t._uU(48),t.ALo(49,"translate"),t.qZA(),t.TgZ(50,"th",23),t._uU(51),t.ALo(52,"translate"),t.qZA(),t.TgZ(53,"th",23),t._uU(54),t.ALo(55,"translate"),t.qZA()(),t.TgZ(56,"tr")(57,"th"),t._uU(58),t.ALo(59,"translate"),t.qZA(),t.TgZ(60,"th"),t._uU(61),t.ALo(62,"translate"),t.qZA(),t.TgZ(63,"th"),t._uU(64),t.ALo(65,"translate"),t.qZA()()(),t.TgZ(66,"tbody"),t.YNc(67,yt,21,10,"tr",25),t.TgZ(68,"tr",26)(69,"td",27),t._uU(70),t.ALo(71,"translate"),t.qZA(),t.TgZ(72,"td",28),t._uU(73),t.qZA()(),t.YNc(74,bt,6,2,"tr",25),t.qZA(),t.TgZ(75,"tfoot")(76,"tr",26)(77,"td",27),t._uU(78),t.ALo(79,"translate"),t.qZA(),t.TgZ(80,"td",28),t._uU(81),t.qZA()()()()()()),2&n){const e=i.$implicit;t.xp6(3),t.AsE("",t.lcZ(4,30,"reference")," ",null==e?null:e.reference_number," "),t.xp6(2),t.Tol("btn-cancel d-inline-block w-auto"),t.Q6J("text","edit")("routerLink","/key/project-management/projects/assign/update/"+e.id)("iconPos","left"),t.xp6(4),t.Oqu(t.lcZ(10,32,"project_name")),t.xp6(4),t.Oqu(e.project_name),t.xp6(3),t.Oqu(t.lcZ(17,34,"construction_name")),t.xp6(4),t.Oqu(e.construction_name),t.xp6(3),t.Oqu(t.lcZ(24,36,"project_type")),t.xp6(4),t.Oqu(e.work_type_name),t.xp6(6),t.Oqu(t.lcZ(34,38,"code")),t.xp6(3),t.Oqu(t.lcZ(37,40,"clauses")),t.xp6(3),t.Oqu(t.lcZ(40,42,"unit")),t.xp6(3),t.Oqu(t.lcZ(43,44,"percentage")),t.xp6(3),t.Oqu(t.lcZ(46,46,"category")),t.xp6(3),t.Oqu(t.lcZ(49,48,"quantity")),t.xp6(3),t.Oqu(t.lcZ(52,50,"total")),t.xp6(3),t.Oqu(t.lcZ(55,52,"note")),t.xp6(4),t.Oqu(t.lcZ(59,54,"previous")),t.xp6(3),t.Oqu(t.lcZ(62,56,"current")),t.xp6(3),t.Oqu(t.lcZ(65,58,"total")),t.xp6(3),t.Q6J("ngForOf",e.work_clauses),t.xp6(3),t.Oqu(t.lcZ(71,60,"total")),t.xp6(3),t.hij(" ",e.total," "),t.xp6(1),t.Q6J("ngForOf",e.deduction_options),t.xp6(4),t.Oqu(t.lcZ(79,62,"total_due")),t.xp6(3),t.hij(" ",e.total_due," ")}}let Ut=(()=>{class n{constructor(e,o){this.route=e,this.projectsService=o,this.fakeData=[{},{},{},{},{},{},{},{}],this.unsubscribe=new p.x}ngOnInit(){console.log("test"),this.route.snapshot.paramMap.get("id")&&(this.route.snapshot.paramMap.get("id"),this.activeId=this.route.snapshot.paramMap.get("id"),this.route.data.pipe((0,f.R)(this.unsubscribe)).subscribe({next:e=>{this.data=e.assignment.data},error:e=>{}}))}exportEn(){this.projectsService.exportEn(this.activeId).subscribe(e=>{window.open(e.file_path)})}exportAr(){this.projectsService.exportAr(this.activeId).subscribe(e=>{window.open(e.file_path)})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(m.gz),t.Y36(T))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-track-project"]],decls:22,vars:17,consts:[[1,"p-5","bg-white"],[1,"d-flex"],["routerLink","/key/project-management/projects",1,"fw-bold","fs-1"],[1,"fa-solid","fa-arrow-left","me-2"],[1,"inventory-view-btns"],[1,"dropdown"],["type","button","id","dropdownMenuButton1","data-bs-toggle","dropdown","aria-expanded","false",1,"btn","btn-cancel","dropdown-toggle"],["aria-labelledby","dropdownMenuButton1",1,"dropdown-menu"],[1,"pointer","dropdown-item",3,"click"],[1,"container","mt-5"],["class","assignment",4,"ngFor","ngForOf"],[1,"assignment"],[1,"d-flex","justify-content-between","mb-5"],[1,"header"],[3,"text","routerLink","iconPos"],[1,"row","mb-5"],[1,"col-12","col-md-4"],["for",""],[1,"p-2","rounded-5","detail"],[1,"mb-2"],[1,"mb-2","fs"],[1,"table-responsive"],[1,"table","shadow","mt-5"],["scope","col","rowspan","3"],["scope","col","colspan","3",1,"text-center"],[4,"ngFor","ngForOf"],[1,"tfoot"],["colspan","8"],["colspan","2"],["colspan","6"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"h2",2),t._UZ(3,"i",3),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"div",4)(7,"div",5)(8,"button",6),t._uU(9),t.ALo(10,"translate"),t.qZA(),t.TgZ(11,"ul",7)(12,"li",8),t.NdJ("click",function(){return o.exportEn()}),t._uU(13),t.ALo(14,"titlecase"),t.ALo(15,"translate"),t.qZA(),t.TgZ(16,"li",8),t.NdJ("click",function(){return o.exportAr()}),t._uU(17),t.ALo(18,"titlecase"),t.ALo(19,"translate"),t.qZA()()()()(),t.TgZ(20,"div",9),t.YNc(21,Pt,82,64,"div",10),t.qZA()()),2&e&&(t.xp6(4),t.hij("",t.lcZ(5,5,"project_details")," "),t.xp6(5),t.hij(" ",t.lcZ(10,7,"download")," "),t.xp6(4),t.Oqu(t.lcZ(14,9,t.lcZ(15,11,"english"))),t.xp6(4),t.Oqu(t.lcZ(18,13,t.lcZ(19,15,"arabic"))),t.xp6(4),t.Q6J("ngForOf",o.data))},dependencies:[r.sg,m.rH,y.r,r.rS,j.X$],styles:["input[_ngcontent-%COMP%]{background-color:#d3d3d3!important}.detail[_ngcontent-%COMP%]{background-color:var(--lightGray);padding:20px!important}.detail[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:500}i[_ngcontent-%COMP%]{cursor:pointer}h2[_ngcontent-%COMP%]{color:#003d5b}table[_ngcontent-%COMP%]{margin-top:60px!important;font-size:15px;background-color:#f8f8f8!important}table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:10px 5px!important}label[_ngcontent-%COMP%]{font-weight:700;font-size:17px}tbody[_ngcontent-%COMP%]{background-color:#f8f8f8!important}.header[_ngcontent-%COMP%]{display:inline-block}thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{vertical-align:middle;color:#979797}.tfoot[_ngcontent-%COMP%]{background-color:#115fa4!important}.tfoot[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{background-color:#115fa4;color:#fff}tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%], tbody[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:none;background-color:#f8f8f8;min-width:150px}.assignment[_ngcontent-%COMP%]{border:1px solid var(--mainColor);border-radius:7px;padding:10px;margin-bottom:30px}.dropdown[_ngcontent-%COMP%]{background-color:transparent!important}.dropdown[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:transparent!important;border:1px solid var(--mainColor);font-size:1.5rem;padding:6px}.dropdown[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{font-size:1.5rem}"]}),n})();var Mt=a(3271),Vt=a(6014);function Lt(n,i){if(1&n&&(t.TgZ(0,"div",32),t._uU(1),t.qZA()),2&n){const e=i.$implicit;t.xp6(1),t.hij(" ",e.value," ")}}function Nt(n,i){if(1&n&&(t.TgZ(0,"p",33),t._uU(1),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Oqu(null==e.serverValidation?null:e.serverValidation.project_phase[0])}}function kt(n,i){if(1&n&&(t.TgZ(0,"p",33),t._uU(1),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Oqu(null==e.serverValidation?null:e.serverValidation.construction_name[0])}}function Dt(n,i){if(1&n&&(t.TgZ(0,"p",33),t._uU(1),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Oqu(null==e.serverValidation?null:e.serverValidation.work_types[0])}}function Jt(n,i){if(1&n&&(t.TgZ(0,"p",33),t._uU(1),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.Oqu(null==e.serverValidation?null:e.serverValidation.clauses[0])}}function Ft(n,i){if(1&n&&(t.TgZ(0,"p",33),t._uU(1),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.Oqu(null==e.serverValidation?null:e.serverValidation.units[0])}}function It(n,i){if(1&n&&(t.TgZ(0,"p",33),t._uU(1),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.Oqu(null==e.serverValidation?null:e.serverValidation.category[0])}}function Qt(n,i){if(1&n&&(t.TgZ(0,"p",33),t._uU(1),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.Oqu(null==e.serverValidation?null:e.serverValidation.price[0])}}function Yt(n,i){if(1&n&&(t.TgZ(0,"p",33),t._uU(1),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.Oqu(null==e.serverValidation?null:e.serverValidation.quantity[0])}}function Gt(n,i){if(1&n&&(t.TgZ(0,"p",33),t._uU(1),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.Oqu(null==e.serverValidation?null:e.serverValidation.ratio[0])}}function Et(n,i){if(1&n&&(t.TgZ(0,"p",33),t._uU(1),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.Oqu(null==e.serverValidation?null:e.serverValidation.quantity[0])}}function Bt(n,i){if(1&n){const e=t.EpF();t.ynx(0,34),t.TgZ(1,"div",11),t._UZ(2,"app-text",35),t.ALo(3,"translate"),t.YNc(4,Jt,2,1,"p",13),t.qZA(),t.TgZ(5,"div",11),t._UZ(6,"app-text",36),t.ALo(7,"translate"),t.YNc(8,Ft,2,1,"p",13),t.qZA(),t.TgZ(9,"div",11),t._UZ(10,"app-text",35),t.ALo(11,"translate"),t.YNc(12,It,2,1,"p",13),t.qZA(),t.TgZ(13,"div",11),t._UZ(14,"app-text",37),t.ALo(15,"translate"),t.YNc(16,Qt,2,1,"p",13),t.qZA(),t.TgZ(17,"div",11),t._UZ(18,"app-text",38),t.ALo(19,"translate"),t.YNc(20,Yt,2,1,"p",13),t.qZA(),t.TgZ(21,"div",11),t._UZ(22,"app-text",38),t.ALo(23,"translate"),t.YNc(24,Gt,2,1,"p",13),t.qZA(),t.TgZ(25,"div",25),t._UZ(26,"app-text",38),t.ALo(27,"translate"),t.YNc(28,Et,2,1,"p",13),t.qZA(),t.TgZ(29,"h3",27),t.NdJ("click",function(){const g=t.CHM(e).index,x=t.oxw();return t.KtG(x.deleteProductFromList(g))}),t._UZ(30,"i",39),t._uU(31),t.ALo(32,"translate"),t.qZA(),t.BQk()}if(2&n){const e=i.$implicit,o=t.oxw();t.xp6(2),t.Tol("d-flex flex-column justify-content-between"),t.s9C("text",t.lcZ(3,43,"clauses")),t.Q6J("readOnly",!0)("value",null==e.value?null:e.value.clause_name),t.xp6(2),t.Q6J("ngIf",null==o.serverValidation?null:o.serverValidation.clauses),t.xp6(2),t.Tol("d-flex flex-column justify-content-between"),t.s9C("text",t.lcZ(7,45,"Units")),t.Q6J("readOnly",!0)("value",null==e.value?null:e.value.unit_name),t.xp6(2),t.Q6J("ngIf",null==o.serverValidation?null:o.serverValidation.units),t.xp6(2),t.Tol("d-flex flex-column justify-content-between"),t.s9C("text",t.lcZ(11,47,"category")),t.Q6J("readOnly",!0)("value",null==e.value?null:e.value.category_name),t.xp6(2),t.Q6J("ngIf",null==o.serverValidation?null:o.serverValidation.category),t.xp6(2),t.Tol("d-flex flex-column justify-content-between"),t.s9C("text",t.lcZ(15,49,"price")),t.Q6J("readOnly",!0)("value",null==e.value?null:e.value.price),t.xp6(2),t.Q6J("ngIf",null==o.serverValidation?null:o.serverValidation.price),t.xp6(2),t.Tol("d-flex flex-column justify-content-between"),t.s9C("text",t.lcZ(19,51,"quantity")),t.Q6J("readOnly",!0)("value",null==e.value?null:e.value.quantity),t.xp6(2),t.Q6J("ngIf",null==o.serverValidation?null:o.serverValidation.quantity),t.xp6(2),t.Tol("d-flex flex-column justify-content-between"),t.s9C("text",t.lcZ(23,53,"ratio")),t.Q6J("readOnly",!0)("value",null==e.value?null:e.value.ratio),t.xp6(2),t.Q6J("ngIf",null==o.serverValidation?null:o.serverValidation.ratio),t.xp6(2),t.Tol("d-flex flex-column justify-content-between"),t.s9C("text",t.lcZ(27,55,"notes")),t.Q6J("readOnly",!0)("value",null==e.value?null:e.value.notes),t.xp6(2),t.Q6J("ngIf",null==o.serverValidation?null:o.serverValidation.notes),t.xp6(3),t.hij(" ",t.lcZ(32,57,"delete")," ")}}function St(n,i){if(1&n&&(t.TgZ(0,"p",33),t._uU(1),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Oqu(null==e.serverValidation?null:e.serverValidation.clauses[0])}}function Rt(n,i){if(1&n&&(t.TgZ(0,"p",33),t._uU(1),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Oqu(null==e.serverValidation?null:e.serverValidation.units[0])}}function Wt(n,i){if(1&n&&(t.TgZ(0,"p",33),t._uU(1),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Oqu(null==e.serverValidation?null:e.serverValidation.category[0])}}function zt(n,i){if(1&n&&(t.TgZ(0,"p",33),t._uU(1),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Oqu(null==e.serverValidation?null:e.serverValidation.price[0])}}function Kt(n,i){if(1&n&&(t.TgZ(0,"p",33),t._uU(1),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Oqu(null==e.serverValidation?null:e.serverValidation.quantity[0])}}function $t(n,i){if(1&n&&(t.TgZ(0,"p",33),t._uU(1),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Oqu(null==e.serverValidation?null:e.serverValidation.ratio[0])}}function Xt(n,i){if(1&n&&(t.TgZ(0,"p",33),t._uU(1),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Oqu(null==e.serverValidation?null:e.serverValidation.notes[0])}}function Ht(n,i){if(1&n&&(t.TgZ(0,"p",33),t._uU(1),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.Oqu(null==e.serverValidation?null:e.serverValidation.deduction_options[0])}}function te(n,i){if(1&n&&(t.TgZ(0,"p",33),t._uU(1),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.Oqu(null==e.serverValidation?null:e.serverValidation.deduction_options[0])}}function ee(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"div",44)(1,"i",45),t.NdJ("click",function(){t.CHM(e);const c=t.oxw().index,g=t.oxw();return t.KtG(g.deleteItem(c))}),t.qZA()()}}function ne(n,i){if(1&n&&(t.TgZ(0,"div",40)(1,"div",11),t._UZ(2,"app-dropdown",41),t.YNc(3,Ht,2,1,"p",13),t.qZA(),t.TgZ(4,"div",11),t._UZ(5,"app-dropdown",42),t.YNc(6,te,2,1,"p",13),t.qZA(),t.YNc(7,ee,2,0,"div",43),t.qZA()),2&n){const e=i.index,o=t.oxw();t.Q6J("formGroupName",e),t.xp6(2),t.Tol("d-flex flex-column justify-content-between"),t.Q6J("data",o.deduction_optionsItems),t.xp6(1),t.Q6J("ngIf",null==o.serverValidation?null:o.serverValidation.deduction_options),t.xp6(2),t.Tol("d-flex flex-column justify-content-between"),t.Q6J("data",o.journal_entries),t.xp6(1),t.Q6J("ngIf",null==o.serverValidation?null:o.serverValidation.deduction_options),t.xp6(1),t.Q6J("ngIf",0!=e)}}let G=(()=>{class n{constructor(e,o,c,g,x,ge){this.fb=e,this.toaster=o,this.projectsService=c,this.route=g,this.router=x,this.categoriesService=ge,this.unsubscribe=new p.x,this.formGroup=this.initForm(),this.projectPhasesConfig=V.N,this.constructionNameConfig=Q.N,this.workTypeConfig=Mt.K,this.clausesConfig=I.N,this.categoryConfig=J.t,this.unitsConfig=F.R,this.deductionOptions=U.n,this.values=new FormData,this.projects=[],this.title=""}ngOnInit(){this.route.snapshot.paramMap.get("assignId")&&(this.title="update_assign",this.id=this.route.snapshot.paramMap.get("assignId"),this.route.data.pipe((0,f.R)(this.unsubscribe)).subscribe({next:e=>{this.data=e.assignment.data,this.fillDataToUpdate()},error:e=>{}})),this.route.snapshot.paramMap.get("id")&&(this.title="new_assign",this.id=this.route.snapshot.paramMap.get("id"),this.addItem()),this.projectsService.getCategories().pipe((0,f.R)(this.unsubscribe)).subscribe({next:e=>{this.categories=e.data},error:e=>{}}),this.projectsService.getUnits().pipe((0,f.R)(this.unsubscribe)).subscribe({next:e=>{this.units=e.data},error:e=>{}}),this.projectsService.getClauses().pipe((0,f.R)(this.unsubscribe)).subscribe({next:e=>{this.clauses=e.data},error:e=>{}}),this.projectsService.getConstructionName().pipe((0,f.R)(this.unsubscribe)).subscribe({next:e=>{this.contructionsName=e.data,this.getJournal_entries({value:this.data?.construction_name_id})},error:e=>{}}),this.projectsService.getDeduction_options().pipe((0,f.R)(this.unsubscribe)).subscribe({next:e=>{this.deduction_optionsItems=e.data},error:e=>{}})}deleteItem(e){this.deduction_options.removeAt(e)}addItem(){this.deduction_options.push(this.fb.group({deduction_option_id:this.fb.control("",s.kI.required),journal_entry_detail_id:this.fb.control("")}))}convertFormGroupToFormData(){this.values.set("id",this.id),this.values.set("work_type_id",this.formGroup.get("work_types")?.value),this.values.set("project_phase_id",this.formGroup.get("project_phase")?.value),this.values.set("construction_name_id",this.formGroup.get("construction_name")?.value);for(let e=0;e<this.workClauses.length;e++){const o=this.workClauses.at(e);this.values.set(`work_clauses[${e}][ratio]`,o.get("ratio")?.value),this.values.set(`work_clauses[${e}][project_management_category_id]`,o.get("category")?.value),this.values.set(`work_clauses[${e}][quantity]`,o.get("quantity")?.value),this.values.set(`work_clauses[${e}][notes]`,o.get("notes")?.value),this.values.set(`work_clauses[${e}][price]`,o.get("price")?.value),this.values.set(`work_clauses[${e}][clause_id]`,o.get("clauses")?.value),this.values.set(`work_clauses[${e}][unit_id]`,o.get("units")?.value)}this.values.delete("deduction_options"),this.formGroup.get("deduction_options")?.value.map((e,o)=>{this.values.set(`deduction_options[${o}][deduction_option_id]`,e.deduction_option_id),this.values.set(`deduction_options[${o}][journal_entry_detail_id]`,e.journal_entry_detail_id)})}get workClauses(){return this.formGroup.get("work_clauses")}get workClause(){return this.formGroup.get("work")}addWorkToList(){this.formGroup.get("work")?.invalid?this.formGroup.get("work")?.markAllAsTouched():(this.workClauses.push(this.fb.group({clauses:this.workClause?.value.clauses,clause_name:this.workClause?.value.clause_name,category:this.workClause?.value.category,category_name:this.workClause?.value.category_name,units:this.workClause?.value.units,unit_name:this.workClause?.value.unit_name,work_types:this.workClause?.value.work_types,notes:this.workClause?.value.notes,price:this.workClause?.value.price,quantity:this.workClause?.value.quantity,ratio:this.workClause?.value.ratio})),this.clearProductForm())}deleteProductFromList(e){this.workClauses.controls.forEach((o,c)=>{}),this.workClauses.removeAt(e)}reject(e){}listWorkClauses(e){for(const o of e)this.workClauses.push(this.fb.group({clauses:o.clause_id,clause_name:o.clause_name,category:o.project_management_category_id,category_name:o.project_management_category_name,units:o.unit_id,unit_name:o.unit_name,work_types:o.work_types,notes:o.notes,price:o.price,quantity:o.quantity,ratio:o.ratio}))}initForm(){return this.fb.group({id:[Number],construction_name:["",s.kI.required],project_phase:[""],work_types:["",s.kI.required],deduction_options:this.fb.array([]),work_clauses:this.fb.array([]),work:this.fb.group({category:[""],units:[""],clauses:["",s.kI.required],clause_name:[""],unit_name:[""],category_name:[""],price:["",s.kI.required],quantity:["",s.kI.required],notes:[""],ratio:["",[s.kI.max(100),s.kI.required]]})})}accept(){this.workClauses.length>0?(this.clearValidatorsForWorkClauseGroup(),this.formGroup.invalid?this.formGroup.markAllAsTouched():(this.convertFormGroupToFormData(),this.data?this.projectsService.updateAssign(this.values).subscribe(e=>{this.toaster.success(e.message),this.router.navigate(["/key/project-management/projects"])},e=>{this.errors=e.error.errors}):this.projectsService.assign(this.values).subscribe(e=>{this.toaster.success(e.message),this.router.navigate(["/key/project-management/projects"])},e=>{this.errors=e.error.errors}))):this.toaster.error("add one work clauses")}clearProductForm(){this.workClause?.patchValue({units:"",clauses:"",category:"",price:"",ratio:"",notes:"",quantity:""})}clearValidatorsForWorkClauseGroup(){this.workClause?.get("clauses")?.clearValidators(),this.workClause?.get("price")?.clearValidators(),this.workClause?.get("ratio")?.clearValidators(),this.workClause?.get("quantity")?.clearValidators(),this.workClause?.get("clauses")?.updateValueAndValidity(),this.workClause?.get("price")?.updateValueAndValidity(),this.workClause?.get("ratio")?.updateValueAndValidity(),this.workClause?.get("quantity")?.updateValueAndValidity()}getCategories(e){let o=this.categories.find(c=>c.id===e.value);this.formGroup.get("work")?.patchValue({category_name:o.name})}getUnits(e){let o=this.units.find(c=>c.id===e.value);this.formGroup.get("work")?.patchValue({unit_name:o.name})}getClauses(e){let o=this.clauses.find(c=>c.id===e.value);this.formGroup.get("work")?.patchValue({clause_name:o.name})}getIds(e){let o=[];for(const c of e)o.push(c.id);return o}getJournal_entries(e){let o=e.value;if(o){let c=this.contructionsName.find(g=>g.id===o);this.journal_entries=c.journal_entry_details}}fillDataToUpdate(){this.formGroup.patchValue({id:this.data?.id,project_phase:this.data?.project_phase_id,construction_name:this.data?.construction_name_id,work_types:this.data?.work_type_id}),this.data?.deduction_options.forEach(e=>{this.deduction_options.push(this.fb.group({deduction_option_id:e.id,journal_entry_detail_id:e.journal_entry_detail_id}))}),this.listWorkClauses(this.data?.work_clauses)}get deduction_options(){return this.formGroup.get("deduction_options")}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(s.qu),t.Y36(M._W),t.Y36(T),t.Y36(m.gz),t.Y36(m.F0),t.Y36(Vt.G))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-assign-project"]],decls:72,vars:100,consts:[[1,"container-sm","main","rounded"],[1,"header","row","justify-content-between","align-items-center"],["routerLink","/key/project-management/projects",1,"title","pointer","col-md-6"],[1,"d-flex","align-items-center","justify-content-end","g-2","col-md-6"],[1,"px-1"],["routerLink","/key/project-management/projects",1,"btn-cancel",3,"iconPos","icon","text"],[1,"btn-filter",3,"text","iconPos","icon","click"],[3,"formGroup","onSubmit"],["class","text-error",4,"ngFor","ngForOf"],[1,"row","mt-4"],[1,"fw-bold","mb-4"],[1,"col-md-4","col-12"],["optionLabel","name","optionValue","id","formControlName","project_phase","ngDefaultControl","","placeholder","select",3,"request","text"],["class","error",4,"ngIf"],["optionLabel","name","optionValue","id","formControlName","construction_name","ngDefaultControl","","placeholder","select",3,"data","text","onDropDownChange"],["optionLabel","name","optionValue","id","formControlName","work_types","ngDefaultControl","","placeholder","select",3,"request","text"],[1,"fw-bold","my-4"],["formArrayName","work_clauses",4,"ngFor","ngForOf"],["formGroupName","work",1,"row","mt-4"],["optionLabel","name","optionValue","id","formControlName","clauses","ngDefaultControl","","placeholder","select",3,"data","text","onDropDownChange"],["optionLabel","name","optionValue","id","formControlName","units","ngDefaultControl","","placeholder","select",3,"data","text","onDropDownChange"],["optionLabel","name","optionValue","id","formControlName","category","ngDefaultControl","","placeholder","select",3,"data","text","onDropDownChange"],["formControlName","price","ngDefaultControl","","placeholder","",3,"showButtons","mode","maxFractionDigits","minFractionDigits","text"],["formControlName","quantity","ngDefaultControl","","placeholder","",3,"showButtons","text"],["formControlName","ratio","ngDefaultControl","","placeholder","",3,"showButtons","mode","maxFractionDigits","minFractionDigits","max","text"],[1,"col-md-12","col-12"],["formControlName","notes","ngDefaultControl","","placeholder","",3,"text"],[1,"text-center","pointer",3,"click"],[1,"fa","fa-plus"],["formArrayName","deduction_options"],["class","row align-items-center gap-3 my-3",3,"formGroupName",4,"ngFor","ngForOf"],[1,"text-start","my-3","pointer",3,"click"],[1,"text-error"],[1,"error"],["formArrayName","work_clauses"],["optionLabel","name","optionValue","id","ngDefaultControl","","placeholder","",3,"text","readOnly","value"],["optionLabel","name","optionValue","id","ng","","DefaultControl","","placeholder","",3,"text","readOnly","value"],["DefaultControl","","placeholder","",3,"text","readOnly","value"],["ngDefaultControl","","placeholder","",3,"text","readOnly","value"],[1,"fa","fa-trash"],[1,"row","align-items-center","gap-3","my-3",3,"formGroupName"],["optionLabel","name","optionValue","id","text","deduction_options","placeholder","select","formControlName","deduction_option_id","ngDefaultControl","",3,"data"],["optionLabel","entry_no_credit","optionValue","id","text","journal_entry","placeholder","select","formControlName","journal_entry_detail_id","ngDefaultControl","",3,"data"],["class"," mt-4 col-md-2 col-12",4,"ngIf"],[1,"mt-4","col-md-2","col-12"],[1,"fa-solid","fa-trash","fs-4","text-danger","mx-2","pointer",3,"click"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"h5",2),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"div",3)(6,"div",4),t._UZ(7,"app-button",5),t.qZA(),t.TgZ(8,"div",4)(9,"app-button",6),t.NdJ("click",function(){return o.accept()}),t.qZA()()()(),t.TgZ(10,"app-form",7),t.NdJ("onSubmit",function(){return o.accept()}),t.YNc(11,Lt,2,1,"div",8),t.ALo(12,"keyvalue"),t.TgZ(13,"div",9)(14,"h3",10),t._uU(15),t.ALo(16,"translate"),t.qZA(),t.TgZ(17,"div",11),t._UZ(18,"app-dropdown",12),t.ALo(19,"translate"),t.YNc(20,Nt,2,1,"p",13),t.qZA(),t.TgZ(21,"div",11)(22,"app-dropdown",14),t.NdJ("onDropDownChange",function(g){return o.getJournal_entries(g)}),t.ALo(23,"translate"),t.qZA(),t.YNc(24,kt,2,1,"p",13),t.qZA(),t.TgZ(25,"div",11),t._UZ(26,"app-dropdown",15),t.ALo(27,"translate"),t.YNc(28,Dt,2,1,"p",13),t.qZA(),t.TgZ(29,"h3",16),t._uU(30),t.ALo(31,"translate"),t.qZA(),t.YNc(32,Bt,33,59,"ng-container",17),t.qZA(),t.TgZ(33,"div",18)(34,"div",11)(35,"app-dropdown",19),t.NdJ("onDropDownChange",function(g){return o.getClauses(g)}),t.ALo(36,"translate"),t.qZA(),t.YNc(37,St,2,1,"p",13),t.qZA(),t.TgZ(38,"div",11)(39,"app-dropdown",20),t.NdJ("onDropDownChange",function(g){return o.getUnits(g)}),t.ALo(40,"translate"),t.qZA(),t.YNc(41,Rt,2,1,"p",13),t.qZA(),t.TgZ(42,"div",11)(43,"app-dropdown",21),t.NdJ("onDropDownChange",function(g){return o.getCategories(g)}),t.ALo(44,"translate"),t.qZA(),t.YNc(45,Wt,2,1,"p",13),t.qZA(),t.TgZ(46,"div",11),t._UZ(47,"app-number-input",22),t.YNc(48,zt,2,1,"p",13),t.qZA(),t.TgZ(49,"div",11),t._UZ(50,"app-number-input",23),t.YNc(51,Kt,2,1,"p",13),t.qZA(),t.TgZ(52,"div",11),t._UZ(53,"app-number-input",24),t.YNc(54,$t,2,1,"p",13),t.qZA(),t.TgZ(55,"div",25),t._UZ(56,"app-text",26),t.ALo(57,"translate"),t.YNc(58,Xt,2,1,"p",13),t.qZA()(),t.TgZ(59,"h3",27),t.NdJ("click",function(){return o.addWorkToList()}),t._UZ(60,"i",28),t._uU(61),t.ALo(62,"translate"),t.qZA(),t.TgZ(63,"h3",16),t._uU(64),t.ALo(65,"translate"),t.qZA(),t.TgZ(66,"div",29),t.YNc(67,ne,8,10,"div",30),t.qZA(),t.TgZ(68,"h5",31),t.NdJ("click",function(){return o.addItem()}),t._UZ(69,"i",28),t._uU(70),t.ALo(71,"translate"),t.qZA()()()),2&e&&(t.xp6(3),t.hij(" ",t.lcZ(4,72,"work_clause_assignments")," "),t.xp6(4),t.Q6J("iconPos","left")("icon","fa-solid fa-ban")("text","cancel"),t.xp6(2),t.Q6J("text","save")("iconPos","left")("icon","fa-solid fa-check"),t.xp6(1),t.Q6J("formGroup",o.formGroup),t.xp6(1),t.Q6J("ngForOf",t.lcZ(12,74,o.errors)),t.xp6(4),t.Oqu(t.lcZ(16,76,"project_assignment")),t.xp6(3),t.Tol("d-flex flex-column justify-content-between"),t.s9C("text",t.lcZ(19,78,"project_phase")),t.Q6J("request",o.projectPhasesConfig.api.get),t.xp6(2),t.Q6J("ngIf",null==o.serverValidation?null:o.serverValidation.project_phase),t.xp6(2),t.Tol("d-flex flex-column justify-content-between"),t.s9C("text",t.lcZ(23,80,"construction_name")),t.Q6J("data",o.contructionsName),t.xp6(2),t.Q6J("ngIf",null==o.serverValidation?null:o.serverValidation.construction_name),t.xp6(2),t.Tol("d-flex flex-column justify-content-between"),t.s9C("text",t.lcZ(27,82,"work_type")),t.Q6J("request",o.workTypeConfig.api.get),t.xp6(2),t.Q6J("ngIf",null==o.serverValidation?null:o.serverValidation.work_types),t.xp6(2),t.Oqu(t.lcZ(31,84,"work_clauses")),t.xp6(2),t.Q6J("ngForOf",o.workClauses.controls),t.xp6(3),t.Tol("d-flex flex-column justify-content-between"),t.s9C("text",t.lcZ(36,86,"clauses")),t.Q6J("data",o.clauses),t.xp6(2),t.Q6J("ngIf",null==o.serverValidation?null:o.serverValidation.clauses),t.xp6(2),t.Tol("d-flex flex-column justify-content-between"),t.s9C("text",t.lcZ(40,88,"Units")),t.Q6J("data",o.units),t.xp6(2),t.Q6J("ngIf",null==o.serverValidation?null:o.serverValidation.units),t.xp6(2),t.Tol("d-flex flex-column justify-content-between"),t.s9C("text",t.lcZ(44,90,"category")),t.Q6J("data",o.categories),t.xp6(2),t.Q6J("ngIf",null==o.serverValidation?null:o.serverValidation.category),t.xp6(2),t.Tol("d-flex flex-column justify-content-between"),t.s9C("text","price"),t.Q6J("showButtons",!1)("mode","decimal")("maxFractionDigits",3)("minFractionDigits",2),t.xp6(1),t.Q6J("ngIf",null==o.serverValidation?null:o.serverValidation.price),t.xp6(2),t.Tol("d-flex flex-column justify-content-between"),t.s9C("text","quantity"),t.Q6J("showButtons",!1),t.xp6(1),t.Q6J("ngIf",null==o.serverValidation?null:o.serverValidation.quantity),t.xp6(2),t.Tol("d-flex flex-column justify-content-between"),t.s9C("text","ratio"),t.Q6J("showButtons",!1)("mode","decimal")("maxFractionDigits",3)("minFractionDigits",2)("max",100),t.xp6(1),t.Q6J("ngIf",null==o.serverValidation?null:o.serverValidation.ratio),t.xp6(2),t.Tol("d-flex flex-column justify-content-between"),t.s9C("text",t.lcZ(57,92,"notes")),t.xp6(2),t.Q6J("ngIf",null==o.serverValidation?null:o.serverValidation.notes),t.xp6(3),t.hij(" ",t.lcZ(62,94,"add"),""),t.xp6(3),t.Oqu(t.lcZ(65,96,"reference_deduction")),t.xp6(3),t.Q6J("ngForOf",o.deduction_options.controls),t.xp6(3),t.hij(" ",t.lcZ(71,98,"add"),""))},dependencies:[r.sg,r.O5,m.rH,L.U,s.Fj,s.JJ,s.JL,s.sg,s.u,s.x0,s.CE,N.T,k.D,D.J,y.r,r.Nd,j.X$],styles:["[_nghost-%COMP%]   .main[_ngcontent-%COMP%]{background-color:var(--white);padding:2rem 2.8rem!important}[_nghost-%COMP%]   .main[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .import[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:1.5rem}[_nghost-%COMP%]   .main[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .import[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{font-size:1.5rem;height:30px}[_nghost-%COMP%]   .main[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .import[_ngcontent-%COMP%]   .error[_ngcontent-%COMP%]{color:var(--red);font-size:1.4rem}[_nghost-%COMP%]   .main[_ngcontent-%COMP%]   app-form[_ngcontent-%COMP%]   .entry-no[_ngcontent-%COMP%]{padding-right:1.5rem}[_nghost-%COMP%]   .main[_ngcontent-%COMP%]   app-form[_ngcontent-%COMP%]   .date[_ngcontent-%COMP%]{padding-left:1.5rem}[_nghost-%COMP%]   .main[_ngcontent-%COMP%]   app-form[_ngcontent-%COMP%]   .table-responsive[_ngcontent-%COMP%]{margin-top:3rem;margin-bottom:5rem}[_nghost-%COMP%]   .main[_ngcontent-%COMP%]   app-form[_ngcontent-%COMP%]   .table-responsive[_ngcontent-%COMP%]   .action[_ngcontent-%COMP%]{display:flex;padding:17px 5px;border:none}[_nghost-%COMP%]   .main[_ngcontent-%COMP%]   app-form[_ngcontent-%COMP%]   .table-responsive[_ngcontent-%COMP%]   .total[_ngcontent-%COMP%]{background-color:var(--mainColor)!important;color:var(--white);font-size:14px;padding:10px}h3.text-center[_ngcontent-%COMP%]{cursor:pointer;margin-top:10px!important;margin-bottom:10px!important}"]}),n})();const oe=[{path:"",component:At},{path:"create",component:P},{path:"view/:id",component:wt,resolve:{project:Y}},{path:"update/:id",component:P,resolve:{project:Y}},{path:"track/:id",component:Ut,resolve:{assignment:(()=>{class n{constructor(e){this.projectService=e}resolve(e){return this.projectService.getAssignmentByProjectId(e.params.id)}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(T))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})()}},{path:"assign/:id",component:G},{path:"assign/update/:assignId",component:G,resolve:{assignment:(()=>{class n{constructor(e){this.projectService=e}resolve(e){return this.projectService.getAssignmentById(e.params.assignId)}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(T))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})()}}];let ie=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[m.Bz.forChild(oe),m.Bz]}),n})();var ae=a(1383),re=a(4413),le=a(1890),se=a(1019),ce=a(2115),pe=a(8096),ue=a(1471);let de=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[r.ez,ie,ue.X,ce.u,re.e,le.f,se.i,pe.J,j.aw,ae.m]}),n})()},4896:(b,Z,a)=>{a.d(Z,{Y:()=>q});var r=a(9291),m=a(67),l=a(6223),_=a(6814),h=a(3999);function C(u,d){1&u&&r._UZ(0,"i",7)}function A(u,d){if(1&u&&(r.TgZ(0,"label",4),r._uU(1),r.ALo(2,"titlecase"),r.ALo(3,"translate"),r.TgZ(4,"span",5),r.YNc(5,C,1,0,"i",6),r.qZA()()),2&u){const t=r.oxw();r.xp6(1),r.hij("",r.lcZ(2,2,r.lcZ(3,4,t.label))," "),r.xp6(4),r.Q6J("ngIf",t.control&&(null==t.control.errors?null:t.control.errors.required))}}function v(u,d){if(1&u&&(r.TgZ(0,"p"),r._uU(1),r.ALo(2,"translate"),r.qZA()),2&u){const t=r.oxw();r.xp6(1),r.Oqu(r.lcZ(2,1,t.selectedFileCount+"files"))}}function O(u,d){if(1&u&&(r.TgZ(0,"p"),r._uU(1),r.ALo(2,"translate"),r.qZA()),2&u){const t=r.oxw();r.xp6(1),r.Oqu(t.selectedFileName?t.selectedFileName:r.lcZ(2,1,t.placeholder))}}let q=(()=>{class u extends m.t{set clear(t){t&&(this.selectedFileCount=0,this.selectedFileName="",this.value=null)}constructor(t){super(),this.formGroupDirective=t,this.uploadedFiles=[],this.multiple=!0,this.label="Upload",this.placeholder="drag_and_drop_you_file_or_Click_here_to_upload",this.accept=".jpg,.jpeg,.png,.pdf,.doc,.docx,.xls,.xlsx",this.onValueChange=new r.vpe,this.selectedFileName="",this.selectedFileCount=0}onFileSelected(t){this.onValueChange.emit(t),this.selectedFileName=t.target.files[0].name,t.target.files&&t.target.files.length>0&&(this.selectedFileCount=t.target.files.length)}onUpload(t){for(let s of t.files)this.uploadedFiles.push(s)}}return u.\u0275fac=function(t){return new(t||u)(r.Y36(l.sg,8))},u.\u0275cmp=r.Xpm({type:u,selectors:[["app-file-upload"]],inputs:{value:"value",multiple:"multiple",label:"label",placeholder:"placeholder",accept:"accept",clear:"clear"},outputs:{onValueChange:"onValueChange"},features:[r._Bn([{provide:l.JU,useExisting:u,multi:!0},{provide:l.Cf,useExisting:u,multi:!0}]),r.qOj],decls:5,vars:6,consts:[[1,"file-input"],["for","file",4,"ngIf"],[4,"ngIf"],["id","file","type","file","id","file",1,"form-control",3,"multiple","ngModel","accept","ngModelChange","change"],["for","file"],[1,"required-aster"],["class","fa-solid fa-asterisk",4,"ngIf"],[1,"fa-solid","fa-asterisk"]],template:function(t,s){1&t&&(r.TgZ(0,"div",0),r.YNc(1,A,6,6,"label",1),r.YNc(2,v,3,3,"p",2),r.YNc(3,O,3,3,"p",2),r.TgZ(4,"input",3),r.NdJ("ngModelChange",function(f){return s.value=f})("change",function(f){return s.onFileSelected(f)}),r.qZA()()),2&t&&(r.xp6(1),r.Q6J("ngIf",s.label),r.xp6(1),r.Q6J("ngIf",s.selectedFileCount>1),r.xp6(1),r.Q6J("ngIf",s.selectedFileCount<=1),r.xp6(1),r.Q6J("multiple",s.multiple)("ngModel",s.value)("accept",s.accept))},dependencies:[_.O5,l.Fj,l.JJ,l.On,_.rS,h.X$],styles:[".text-danger[_ngcontent-%COMP%]{font-size:14px}.file-input[_ngcontent-%COMP%]{position:relative}.file-input[_ngcontent-%COMP%]   input[type=file][_ngcontent-%COMP%]{position:absolute;left:0;top:0;opacity:0;width:100%;height:100%;min-width:200px!important}.file-input[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{display:block;padding:8px;border:1px dashed #7ca0c5;border-radius:8px;font-size:14px;cursor:pointer;min-width:200px!important;text-align:center;overflow:hidden}"]}),u})()},5304:(b,Z,a)=>{a.d(Z,{z:()=>u});var r=a(67),m=a(6223),l=a(9291),_=a(1732),h=a(6814),C=a(4055),A=a(3999);function v(d,t){1&d&&l._UZ(0,"i",6)}function O(d,t){if(1&d&&(l.TgZ(0,"label"),l._uU(1),l.ALo(2,"titlecase"),l.ALo(3,"translate"),l.TgZ(4,"span",4),l.YNc(5,v,1,0,"i",5),l.qZA()()),2&d){const s=l.oxw();l.xp6(1),l.hij("",l.lcZ(2,2,l.lcZ(3,4,s.text))," "),l.xp6(4),l.Q6J("ngIf",s.control&&(null==s.control.errors?null:s.control.errors.required))}}function q(d,t){if(1&d&&(l.TgZ(0,"span"),l._uU(1),l.ALo(2,"translate"),l.qZA()),2&d){const s=l.oxw();l.Tol("text-danger"),l.xp6(1),l.Oqu(l.lcZ(2,3,s.object.keys(s.control.errors)[0]))}}let u=(()=>{class d extends r.t{constructor(s,p){super(),this.formGroupDirective=s,this.http=p,this.valueToUpdate=[],this.readOnly=!1,this.placeholder="",this.filterBy="",this.class="d-flex justify-content-between align-items-center",this.filter=!0,this.filterMatchMode="contains",this.object=Object}ngOnInit(){!this.data&&this.request?this.http.getWithParam(this.request,{limit:"all"}).subscribe({next:s=>{this.data=s.data,this.writeValue(this.valueToUpdate)},error:s=>{}}):this.writeValue(this.valueToUpdate)}writeValue(s){this.data&&(this.value=s)}onValueChange(s){this.onChange(s.value),this.onTouched()}}return d.\u0275fac=function(s){return new(s||d)(l.Y36(m.sg,8),l.Y36(_.O))},d.\u0275cmp=l.Xpm({type:d,selectors:[["app-multiselect"]],inputs:{value:"value",text:"text",data:"data",optionLabel:"optionLabel",optionValue:"optionValue",editable:"editable",readOnly:"readOnly",placeholder:"placeholder",filterBy:"filterBy",request:"request",class:"class",filter:"filter",filterMatchMode:"filterMatchMode"},features:[l._Bn([{provide:m.JU,useExisting:d,multi:!0},{provide:m.Cf,useExisting:d,multi:!0}]),l.qOj],decls:5,vars:15,consts:[[3,"ngClass"],[4,"ngIf"],["appendTo","body",3,"options","ngModel","placeholder","optionLabel","optionValue","filterMatchMode","display","filter","filterBy","disabled","ngModelChange","onChange"],[3,"class",4,"ngIf"],[1,"required-aster"],["class","fa-solid fa-asterisk",4,"ngIf"],[1,"fa-solid","fa-asterisk"]],template:function(s,p){1&s&&(l.TgZ(0,"div",0),l.YNc(1,O,6,6,"label",1),l.TgZ(2,"p-multiSelect",2),l.NdJ("ngModelChange",function(w){return p.value=w})("onChange",function(w){return p.onValueChange(w)}),l.ALo(3,"translate"),l.qZA(),l.YNc(4,q,3,5,"span",3),l.qZA()),2&s&&(l.Q6J("ngClass",p.class),l.xp6(1),l.Q6J("ngIf",p.text),l.xp6(1),l.Q6J("options",p.data)("ngModel",p.value)("placeholder",l.lcZ(3,13,p.placeholder))("optionLabel",p.optionLabel)("optionValue",p.optionValue)("filterMatchMode",p.filterMatchMode)("display","chip")("filter",p.filter)("filterBy",p.optionLabel)("disabled",p.readOnly),l.xp6(2),l.Q6J("ngIf",p.control&&p.control.errors&&(p.control.touched||p.formGroupDirective.submitted)))},dependencies:[h.mk,h.O5,m.JJ,m.On,C.NU,h.rS,A.X$],styles:[".text-danger[_ngcontent-%COMP%]{font-size:14px}"]}),d})()},8718:(b,Z,a)=>{a.d(Z,{x:()=>r});const r={api:{create:"user/create",get:"user",getById:"user/",update:"user/update/",delete:"user/",exportCvs:"user/export/cvs",exportPdf:"user/export/pdf",import:"user/import",export:"user/data/export"},page:{list:"",view:"view/:id"}}},9773:(b,Z,a)=>{a.d(Z,{R:()=>h});var r=a(9360),m=a(8251),l=a(4829),_=a(2420);function h(C){return(0,r.e)((A,v)=>{(0,l.Xf)(C).subscribe((0,m.x)(v,()=>v.complete(),_.Z)),!v.closed&&A.subscribe(v)})}}}]);