"use strict";(self.webpackChunkkey=self.webpackChunkkey||[]).push([[5435],{4896:(b,C,c)=>{c.d(C,{Y:()=>g});var n=c(9291),A=c(67),t=c(6223),h=c(6814),x=c(3999);function v(_,m){1&_&&n._UZ(0,"i",7)}function Z(_,m){if(1&_&&(n.TgZ(0,"label",4),n._uU(1),n.ALo(2,"titlecase"),n.ALo(3,"translate"),n.TgZ(4,"span",5),n.YNc(5,v,1,0,"i",6),n.qZA()()),2&_){const s=n.oxw();n.xp6(1),n.hij("",n.lcZ(2,2,n.lcZ(3,4,s.label))," "),n.xp6(4),n.Q6J("ngIf",s.control&&(null==s.control.errors?null:s.control.errors.required))}}function T(_,m){if(1&_&&(n.TgZ(0,"p"),n._uU(1),n.ALo(2,"translate"),n.qZA()),2&_){const s=n.oxw();n.xp6(1),n.Oqu(n.lcZ(2,1,s.selectedFileCount+"files"))}}function u(_,m){if(1&_&&(n.TgZ(0,"p"),n._uU(1),n.ALo(2,"translate"),n.qZA()),2&_){const s=n.oxw();n.xp6(1),n.Oqu(s.selectedFileName?s.selectedFileName:n.lcZ(2,1,s.placeholder))}}let g=(()=>{class _ extends A.t{set clear(s){s&&(this.selectedFileCount=0,this.selectedFileName="",this.value=null)}constructor(s){super(),this.formGroupDirective=s,this.uploadedFiles=[],this.multiple=!0,this.label="Upload",this.placeholder="drag_and_drop_you_file_or_Click_here_to_upload",this.accept=".jpg,.jpeg,.png,.pdf,.doc,.docx,.xls,.xlsx",this.onValueChange=new n.vpe,this.selectedFileName="",this.selectedFileCount=0}onFileSelected(s){this.onValueChange.emit(s),this.selectedFileName=s.target.files[0].name,s.target.files&&s.target.files.length>0&&(this.selectedFileCount=s.target.files.length)}onUpload(s){for(let d of s.files)this.uploadedFiles.push(d)}}return _.\u0275fac=function(s){return new(s||_)(n.Y36(t.sg,8))},_.\u0275cmp=n.Xpm({type:_,selectors:[["app-file-upload"]],inputs:{value:"value",multiple:"multiple",label:"label",placeholder:"placeholder",accept:"accept",clear:"clear"},outputs:{onValueChange:"onValueChange"},features:[n._Bn([{provide:t.JU,useExisting:_,multi:!0},{provide:t.Cf,useExisting:_,multi:!0}]),n.qOj],decls:5,vars:6,consts:[[1,"file-input"],["for","file",4,"ngIf"],[4,"ngIf"],["id","file","type","file","id","file",1,"form-control",3,"multiple","ngModel","accept","ngModelChange","change"],["for","file"],[1,"required-aster"],["class","fa-solid fa-asterisk",4,"ngIf"],[1,"fa-solid","fa-asterisk"]],template:function(s,d){1&s&&(n.TgZ(0,"div",0),n.YNc(1,Z,6,6,"label",1),n.YNc(2,T,3,3,"p",2),n.YNc(3,u,3,3,"p",2),n.TgZ(4,"input",3),n.NdJ("ngModelChange",function(f){return d.value=f})("change",function(f){return d.onFileSelected(f)}),n.qZA()()),2&s&&(n.xp6(1),n.Q6J("ngIf",d.label),n.xp6(1),n.Q6J("ngIf",d.selectedFileCount>1),n.xp6(1),n.Q6J("ngIf",d.selectedFileCount<=1),n.xp6(1),n.Q6J("multiple",d.multiple)("ngModel",d.value)("accept",d.accept))},dependencies:[h.O5,t.Fj,t.JJ,t.On,h.rS,x.X$],styles:[".file-input[_ngcontent-%COMP%]{position:relative}.file-input[_ngcontent-%COMP%]   input[type=file][_ngcontent-%COMP%]{position:absolute;left:0;top:0;opacity:0;width:100%;height:100%;min-width:200px!important}.file-input[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{display:block;padding:8px;border:1px dashed #7ca0c5;border-radius:8px;font-size:14px;cursor:pointer;min-width:200px!important;text-align:center;overflow:hidden}"]}),_})()},5435:(b,C,c)=>{c.d(C,{f:()=>Q});var n=c(5861),A=c(8645),t=c(9291),h=c(8763),x=c(3999),v=c(8209),Z=c(3562),T=c(1732),u=c(6814),g=c(6223),_=c(707),m=c(4896);function s(o,r){if(1&o&&(t.TgZ(0,"div")(1,"p"),t._uU(2),t.qZA()()),2&o){const e=r.$implicit;t.xp6(2),t.Oqu(e.value)}}function d(o,r){if(1&o&&(t.TgZ(0,"div",16),t.YNc(1,s,3,1,"div",11),t.ALo(2,"keyvalue"),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",t.lcZ(2,1,e.errors))}}function U(o,r){if(1&o&&t._UZ(0,"img",25),2&o){const e=t.oxw(2).$implicit;t.Q6J("src",e.url,t.LSH)("alt",e.url)}}function f(o,r){if(1&o&&(t.TgZ(0,"p",26),t._uU(1),t.qZA()),2&o){const e=t.oxw(2).$implicit;t.xp6(1),t.Oqu(e.url)}}function M(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"div",27)(1,"app-file-upload",28),t.NdJ("onValueChange",function(l){t.CHM(e);const a=t.oxw(2),p=a.$implicit,O=a.index,P=t.oxw();return t.KtG(P.onFileSelected(l,p.id,O))}),t.qZA()()}2&o&&(t.xp6(1),t.Q6J("multiple",!1))}function w(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"div",29)(1,"button",30),t.NdJ("click",function(){t.CHM(e);const l=t.oxw(2).index,a=t.oxw();return t.KtG(a.showInputFile(l))}),t._UZ(2,"img",31),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"button",32),t.NdJ("click",function(){t.CHM(e);const l=t.oxw(2).$implicit,a=t.oxw();return t.KtG(a.deleteAttachment(l))}),t._UZ(6,"img",33),t.qZA()()}if(2&o){const e=t.oxw(2).$implicit;t.xp6(3),t.AsE(" ",t.lcZ(4,2,"change")," ",e.id,"")}}function I(o,r){if(1&o&&(t.TgZ(0,"div",18)(1,"div",19),t.YNc(2,U,1,2,"img",20),t.YNc(3,f,2,1,"p",21),t.qZA(),t.TgZ(4,"div",22),t.YNc(5,M,2,1,"div",23),t.YNc(6,w,7,4,"div",24),t.qZA()()),2&o){const e=t.oxw(),i=e.$implicit,l=e.index,a=t.oxw();t.xp6(2),t.Q6J("ngIf",!a.ids.includes(i.id)),t.xp6(1),t.Q6J("ngIf",a.ids.includes(i.id)),t.xp6(2),t.Q6J("ngIf",a.index==l),t.xp6(1),t.Q6J("ngIf",a.index!=l)}}function E(o,r){if(1&o&&(t.ynx(0),t.YNc(1,I,7,4,"div",17),t.BQk()),2&o){const e=r.$implicit;t.xp6(1),t.Q6J("ngIf",e.mime_type.includes("image"))}}function F(o,r){1&o&&(t.TgZ(0,"p",34),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"data_not_found")))}function J(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"div",27)(1,"app-file-upload",28),t.NdJ("onValueChange",function(l){t.CHM(e);const a=t.oxw(2),p=a.$implicit,O=a.index,P=t.oxw();return t.KtG(P.onFileSelected(l,p.id,O))}),t.qZA()()}2&o&&(t.xp6(1),t.Q6J("multiple",!1))}function y(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"div",29)(1,"button",30),t.NdJ("click",function(){t.CHM(e);const l=t.oxw(2).index,a=t.oxw();return t.KtG(a.showInputFile(l))}),t._UZ(2,"img",31),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"button",32),t.NdJ("click",function(){t.CHM(e);const l=t.oxw(2).$implicit,a=t.oxw();return t.KtG(a.deleteAttachment(l))}),t._UZ(6,"img",33),t.qZA()()}if(2&o){const e=t.oxw(2).$implicit;t.xp6(3),t.AsE(" ",t.lcZ(4,2,"change")," ",e.id,"")}}function L(o,r){if(1&o&&(t.TgZ(0,"div",18)(1,"div",35),t._UZ(2,"img",36),t.TgZ(3,"p",27),t._uU(4),t.qZA()(),t.TgZ(5,"div",22),t.YNc(6,J,2,1,"div",23),t.YNc(7,y,7,4,"div",24),t.qZA()()),2&o){const e=t.oxw(),i=e.$implicit,l=e.index,a=t.oxw();t.xp6(4),t.Oqu(i.url),t.xp6(2),t.Q6J("ngIf",a.index==l),t.xp6(1),t.Q6J("ngIf",a.index!=l)}}function N(o,r){if(1&o&&(t.ynx(0),t.YNc(1,L,8,3,"div",17),t.BQk()),2&o){const e=r.$implicit;t.xp6(1),t.Q6J("ngIf",!e.mime_type.includes("image"))}}function D(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"div",37)(1,"form",38)(2,"app-file-upload",28),t.NdJ("onValueChange",function(l){t.CHM(e);const a=t.oxw();return t.KtG(a.onFileSelectedNew(l))}),t.qZA()(),t.TgZ(3,"div",39)(4,"p-button",40),t.NdJ("click",function(){t.CHM(e);const l=t.oxw();return t.KtG(l.onSubmitNew())}),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"p-button",41),t.NdJ("click",function(){t.CHM(e);const l=t.oxw();return t.KtG(l.showImportForm=!1)}),t.ALo(7,"translate"),t.qZA()()()}2&o&&(t.xp6(2),t.Q6J("multiple",!0),t.xp6(2),t.Q6J("label",t.lcZ(5,3,"save")),t.xp6(2),t.Q6J("label",t.lcZ(7,5,"cancel")))}function k(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"div",42)(1,"p-button",7),t.NdJ("click",function(){t.CHM(e);const l=t.oxw();return t.KtG(l.showImportForm=!0)}),t.ALo(2,"translate"),t.qZA()()}2&o&&(t.xp6(1),t.Q6J("label",t.lcZ(2,1,"add")))}let Q=(()=>{class o{constructor(e,i,l,a,p){this.toastr=e,this.translateService=i,this.router=l,this.dynamicDialog=a,this.http=p,this.endPoint="",this.listPageRoute="",this.listPageTitle="",this.invoice_image=[],this.showImportForm=!1,this.filesIds=[],this.values=new FormData,this.fileName="",this.ids=[],this.unsubscribe=new A.x}ngOnInit(){this.activeId=this.data.id}onFileSelected(e,i,l){e.target.files[0]&&(this.ids.includes(i)||this.ids.push(i),this.values.set(`invoice_image[${i}]`,e.target.files[0]),this.ids.map((a,p)=>{this.values.set(`mediaId[${p}]`,a)})),this.data?.invoice_image.map((a,p)=>{this.index==p&&(a.url=e.target.files[0].name)})}onSubmit(){this.values.set("id",this.activeId),this.ids.length>0?this.http.post(this.endPoint,this.values).subscribe(e=>{this.toastr.success(e.message),this.clearAllForm(),this.router.navigate([this.listPageRoute])},e=>{this.errors=e.error.errors}):this.toastr.error(this.translateService.instant("no_file_changed"))}showInputFile(e){this.index=e}clearAllForm(){this.ids=[],this.filesIds=[],this.errors=null;for(const[e,i]of this.values)this.values.delete(e)}onFileSelectedNew(e){if(e.target.files[0])for(const[i,l]of Object.entries(e.target.files))this.values.set(`invoice_image[${i}]`,e.target.files[i]),this.filesIds.push(i)}onSubmitNew(){this.values.set("id",this.activeId),this.filesIds.length>0?this.http.post(this.endPoint,this.values).subscribe(e=>{this.toastr.success(e.message),this.clearAllForm(),this.router.navigate([this.listPageRoute])},e=>{this.errors=e.error.errors}):this.toastr.error(this.translateService.instant("no_file_changed"))}deleteAttachment(e){var i=this;return(0,n.Z)(function*(){i.values.set("id",i.activeId),i.values.set("mediaId[0]",e.id);const l={showHeader:!1,header:"delete",data:{message:"do_you_want_to_delete",acceptLabel:"delete",rejectLabel:"close",name:"url",data:{...e}},width:"300px",height:"164px"};(yield i.dynamicDialog.confirm(l))&&i.http.post(i.endPoint,i.values).subscribe(p=>{i.toastr.success(p.message),i.clearAllForm(),i.router.navigate([i.listPageRoute])},p=>{i.errors=p.error.errors})})()}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(h._W),t.Y36(x.sK),t.Y36(v.F0),t.Y36(Z.U),t.Y36(T.O))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-update-attachment"]],inputs:{data:"data",endPoint:"endPoint",listPageRoute:"listPageRoute",listPageTitle:"listPageTitle"},decls:33,vars:29,consts:[[1,"page-card"],[1,"header","row","justify-content-between","align-items-center"],[1,"title","pointer","col-md-6",3,"routerLink"],[1,"fa-solid","fa-arrow-left","me-2"],[1,"d-flex","align-items-center","justify-content-end","g-2","col-md-6"],[1,"px-1"],["styleClass","btn-cancel",3,"routerLink","label"],["styleClass","btn-filter",3,"label","click"],["class","alert alert-danger text-center fs-5",4,"ngIf"],[1,"row","items"],[1,"fa-solid","fa-qrcode"],[4,"ngFor","ngForOf"],["class","text-center alert-danger alert ",4,"ngIf"],[1,"addNew"],["class","import",4,"ngIf"],["class","px-1","style","width: 100px; margin-top: 20px;",4,"ngIf"],[1,"alert","alert-danger","text-center","fs-5"],["class","col-md-3",4,"ngIf"],[1,"col-md-3"],[1,"img"],["class","w-100",3,"src","alt",4,"ngIf"],["class","text-center",4,"ngIf"],[1,"d-flex","justify-content-center"],["class","",4,"ngIf"],["class","btns",4,"ngIf"],[1,"w-100",3,"src","alt"],[1,"text-center"],[1,""],["label","",3,"multiple","onValueChange"],[1,"btns"],[1,"btn-change",3,"click"],["src","assets/images/image.svg","alt",""],[1,"btn-delete",3,"click"],["src","assets/images/delete.svg","alt",""],[1,"text-center","alert-danger","alert"],[1,"file"],["src","assets/images/Frame.svg","alt","",1,""],[1,"import"],[1,"my-3"],[1,"d-flex","gap-2","align-items-center"],["styleClass","class",3,"label","click"],["styleClass","btn-cancel",3,"label","click"],[1,"px-1",2,"width","100px","margin-top","20px"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"h5",2),t._UZ(3,"i",3),t._uU(4),t.ALo(5,"titlecase"),t.ALo(6,"translate"),t.qZA(),t.TgZ(7,"div",4)(8,"div",5),t._UZ(9,"p-button",6),t.ALo(10,"translate"),t.qZA(),t.TgZ(11,"div",5)(12,"p-button",7),t.NdJ("click",function(){return i.onSubmit()}),t.ALo(13,"translate"),t.qZA()()()(),t.YNc(14,d,3,3,"div",8),t.TgZ(15,"div",9)(16,"p"),t._UZ(17,"i",10),t._uU(18),t.ALo(19,"titlecase"),t.ALo(20,"translate"),t.qZA(),t.YNc(21,E,2,1,"ng-container",11),t.qZA(),t.TgZ(22,"div",9)(23,"p"),t._UZ(24,"i",10),t._uU(25),t.ALo(26,"titlecase"),t.ALo(27,"translate"),t.qZA(),t.YNc(28,F,3,3,"p",12),t.YNc(29,N,2,1,"ng-container",11),t.qZA(),t.TgZ(30,"div",13),t.YNc(31,D,8,7,"div",14),t.YNc(32,k,3,3,"div",15),t.qZA()()),2&e&&(t.xp6(2),t.Q6J("routerLink",i.listPageRoute),t.xp6(2),t.hij("",t.lcZ(5,13,t.lcZ(6,15,i.listPageTitle))," "),t.xp6(5),t.Q6J("routerLink",i.listPageRoute)("label",t.lcZ(10,17,"cancel")),t.xp6(3),t.Q6J("label",t.lcZ(13,19,"save")),t.xp6(2),t.Q6J("ngIf",i.errors),t.xp6(4),t.hij(" ",t.lcZ(19,21,t.lcZ(20,23,"images_list"))," "),t.xp6(3),t.Q6J("ngForOf",null==i.data?null:i.data.invoice_image),t.xp6(4),t.hij(" ",t.lcZ(26,25,t.lcZ(27,27,"files_list"))," "),t.xp6(3),t.Q6J("ngIf",0==(null==i.data||null==i.data.invoice_image?null:i.data.invoice_image.length)),t.xp6(1),t.Q6J("ngForOf",null==i.data?null:i.data.invoice_image),t.xp6(2),t.Q6J("ngIf",i.showImportForm),t.xp6(1),t.Q6J("ngIf",!i.showImportForm))},dependencies:[u.sg,u.O5,g._Y,g.JL,g.F,_.zx,v.rH,m.Y,u.rS,u.Nd,x.X$],styles:[".items[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px;font-weight:600;line-height:24px;color:#101828;margin:30px 0;width:100%}.items[_ngcontent-%COMP%]   .img[_ngcontent-%COMP%]{height:200px;width:200px;border:1px solid var(--mainColor);border-radius:10px;overflow-x:auto;-ms-overflow-style:none;scrollbar-width:none}.items[_ngcontent-%COMP%]   .img[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.items[_ngcontent-%COMP%]   .img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:198px;border-radius:10px}.items[_ngcontent-%COMP%]   .file[_ngcontent-%COMP%]{width:200px;height:200px;border:1px solid var(--mainColor);border-radius:14px;display:flex;flex-direction:column;justify-content:center;align-items:center;overflow-x:auto;-ms-overflow-style:none;scrollbar-width:none}.items[_ngcontent-%COMP%]   .file[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.items[_ngcontent-%COMP%]   .file[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:10px 0;width:100%}.items[_ngcontent-%COMP%]   .btns[_ngcontent-%COMP%]{display:flex;gap:20px}.items[_ngcontent-%COMP%]   .btns[_ngcontent-%COMP%]   .btn-change[_ngcontent-%COMP%]{background:var(--white);color:var(--mainColor);border:1px solid var(--mainColor);border-radius:3px;margin:6px 0;padding:7px 0;font-size:14px;width:120px}.items[_ngcontent-%COMP%]   .btns[_ngcontent-%COMP%]   .btn-delete[_ngcontent-%COMP%]{background:var(--white);color:var(--danger);border:1px solid var(--red);border-radius:3px;margin:6px 0;padding:7px 0;font-size:14px;width:60px}.customFileInput[_ngcontent-%COMP%]::-webkit-file-upload-button{visibility:hidden}.import[_ngcontent-%COMP%]{padding:20px;border:2px solid var(--mainColor);border-radius:8px;margin:10px 0}"]}),o})()}}]);