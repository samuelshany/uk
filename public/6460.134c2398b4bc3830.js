"use strict";(self.webpackChunkkey=self.webpackChunkkey||[]).push([[6460],{6460:(K,v,o)=>{o.r(v),o.d(v,{FixedAssetModule:()=>k});var f=o(6814),x=o(2954),p=o(5861),u=function(i){return i.list="View Fixed Assets",i.create="Create Fixed Asset",i.update="Edit Fixed Asset",i.delete="Delete Fixed Asset",i}(u||{});const l={api:{create:"fixed-asset/create",get:"fixed-asset",getParents:"parents/accounts",getNotParents:"not-parents/accounts",getById:"fixed-asset/",update:"fixed-asset/update/",delete:"fixed-asset/",exportCvs:"fixed-asset/export/cvs",exportPdf:"fixed-asset/export/pdf",import:"fixed-asset/import"},page:{list:"",update:"update/:id",view:"view/:id",create:"new"}},y=i=>{return{cols:[{field:"code",label:"code",class:""},{field:"name",label:"name",class:""},{field:"description",label:"description",format:n=>n.description?n.description:"-"},{field:"depreciation_duration_type",label:"duration_type",class:""},{field:"depreciation_duration_value",label:"duration_value",class:""},{field:"acquisition_date",label:"acquisition_date",class:""},{field:"created_at",label:"created_at",class:""},{field:"creator",label:"created_by",class:""},{field:"depreciation_ratio",label:"ratio",format:n=>n.depreciation_ratio?n.depreciation_ratio:"-"},{label:"action",actions:[{id:u.delete,icon:"trash",class:"main-color",fun:(n=(0,p.Z)(function*(t){return yield i.fixedAssetService.delete(t)}),function(a){return n.apply(this,arguments)})},{id:u.update,icon:"pen-to-square",class:"main-color",fun:function(){var n=(0,p.Z)(function*(t){return yield i.fixedAssetService.openDialogToUpdate(t)});return function(a){return n.apply(this,arguments)}}()}]}],Request:l.api.get};var n};var c=o(6924),m=o(5946),e=o(9291),s=o(6223),Z=o(8763),C=o(5118),D=o(2525),J=o(8614),L=o(1904),U=o(3838),q=o(6098),N=o(1771),A=o(4779),g=o(3999);function Q(i,n){if(1&i&&(e.TgZ(0,"div")(1,"p",27),e._uU(2),e.qZA()()),2&i){const t=n.$implicit;e.xp6(2),e.hij(" ",t.value,"")}}let T=(()=>{class i{constructor(t,a,r,h,d,w){this.fb=t,this.toastr=a,this.config=r,this.dialogRef=h,this.fixedAssetService=d,this.groupService=w,this.formGroup=this.initForm(),this.fixedAssetConfig=l,this.permissions=u,this.depreciation_duration_types=[{id:"year",name:"year"},{id:"month",name:"month"}],this.config.data?.data&&this.fillDataToUpdate(this.config.data?.data)}ngOnInit(){this.fixedAssetService.getNotParents().subscribe(t=>{this.account_types=t.data})}initForm(){return this.fb.group({id:[Number],name:["",[s.kI.required,s.kI.pattern("^[\u0621-\u064a\u0660-\u0669a-zA-Z 0-9 ]+$")]],description:[""],acquisition_date:["",s.kI.required],acquisition_value:["",s.kI.required],depreciation_ratio:[""],depreciation_value:["",s.kI.required],depreciation_duration_value:[""],depreciation_duration_type:["",s.kI.required],parent_id:["",s.kI.required]})}setAccountId(t){let a=this.account_types.filter(r=>r.id==t.value)[0];this.formGroup.get("parent_coded")?.patchValue(a.code)}fillDataToUpdate(t){this.formGroup.patchValue({id:t.id,name:t?.name,description:t?.description,acquisition_date:t?.acquisition_date,acquisition_value:t.acquisition_value,depreciation_ratio:t?.depreciation_ratio,depreciation_value:t.depreciation_value,depreciation_duration_value:t.depreciation_duration_value,depreciation_duration_type:t.depreciation_duration_type,parent_id:t?.parent.id,parent_code:t.parent.code})}accept(){this.formGroup.invalid?this.formGroup.markAllAsTouched():this.config.data.data?this.fixedAssetService.update(this.formGroup.value).subscribe({next:t=>{this.toastr.success(t.message),this.closePopup(!0)},error:t=>{this.errors=t.error.errors,this.toastr.error(t.error.message)}}):this.fixedAssetService.create(this.formGroup.value).subscribe({next:t=>{this.toastr.success(t.message),this.closePopup(!0)},error:t=>{this.errors=t.error.errors,this.toastr.error(t.error.message)}})}closePopup(t){this.dialogRef.close(t)}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(s.qu),e.Y36(Z._W),e.Y36(C.S),e.Y36(C.E7),e.Y36(b),e.Y36(D.l))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-fixed-form"]],decls:40,vars:51,consts:[[1,"main"],[1,"header"],[1,"d-flex","justify-content-between"],[1,"icon"],["src","../assets/Tabs/Icon/Active/craete-bank.png","alt","img"],[3,"click"],[1,"fa-solid","fa-xmark","pointer","fs-1"],[1,"title"],[3,"formGroup"],[4,"ngFor","ngForOf"],[1,"row"],[1,"mb-5","col-sm-12"],["formControlName","name","ngDefaultControl","","placeholder","",3,"text"],["formControlName","description","ngDefaultControl","","placeholder","",3,"text"],[1,"mb-5","col-12"],["formControlName","acquisition_date","ngDefaultControl","","placeholder","",3,"text"],["formControlName","acquisition_value","ngDefaultControl","",3,"mode","showButtons","text"],["formControlName","depreciation_ratio","ngDefaultControl","",3,"text"],["formControlName","depreciation_value","ngDefaultControl","",3,"showButtons","mode","text"],[1,"mb-5","col-12","col-md-6"],["formControlName","depreciation_duration_value","ngDefaultControl","",3,"text"],["placeholder","select","optionLabel","name","optionValue","id","formControlName","depreciation_duration_type","ngDefaultControl","",3,"text","data"],[1,"mb-3","col-12"],["placeholder","select","optionLabel","name_code","optionValue","id","formControlName","parent_id",3,"text","filter","filterBy","request"],[1,"row","g-2","my-2"],[1,"col-6"],[3,"text","click"],[1,"text-error"]],template:function(t,a){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"span",3),e._UZ(4,"img",4),e.qZA(),e.TgZ(5,"span",5),e.NdJ("click",function(){return a.closePopup(!1)}),e._UZ(6,"i",6),e.qZA()(),e.TgZ(7,"p",7),e._uU(8),e.ALo(9,"translate"),e.qZA()(),e.TgZ(10,"app-form",8),e._uU(11),e.ALo(12,"json"),e.YNc(13,Q,3,1,"div",9),e.ALo(14,"keyvalue"),e.TgZ(15,"div",10)(16,"div",11),e._UZ(17,"app-text",12),e.qZA(),e.TgZ(18,"div",11),e._UZ(19,"app-text",13),e.qZA(),e.TgZ(20,"div",14),e._UZ(21,"app-date",15),e.qZA(),e.TgZ(22,"div",14),e._UZ(23,"app-number-input",16),e.qZA(),e.TgZ(24,"div",14),e._UZ(25,"app-number-input",17),e.qZA(),e.TgZ(26,"div",14),e._UZ(27,"app-number-input",18),e.qZA(),e.TgZ(28,"div",10)(29,"div",19),e._UZ(30,"app-number-input",20),e.qZA(),e.TgZ(31,"div",19),e._UZ(32,"app-dropdown",21),e.qZA()(),e.TgZ(33,"div",22),e._UZ(34,"app-dropdown",23),e.qZA()(),e.TgZ(35,"div",24)(36,"div",25)(37,"app-button",26),e.NdJ("click",function(){return a.closePopup(!1)}),e.qZA()(),e.TgZ(38,"div",25)(39,"app-button",26),e.NdJ("click",function(){return a.accept()}),e.qZA()()()()()),2&t){let r;e.xp6(8),e.Oqu(e.lcZ(9,45,null!==(r=a.config.header)&&void 0!==r?r:"")),e.xp6(2),e.Q6J("formGroup",a.formGroup),e.xp6(1),e.hij(" ",e.lcZ(12,47,a.formGroup.value)," "),e.xp6(2),e.Q6J("ngForOf",e.lcZ(14,49,a.errors)),e.xp6(4),e.Tol(""),e.Q6J("text","name"),e.xp6(2),e.Tol(""),e.Q6J("text","description"),e.xp6(2),e.Tol(""),e.Q6J("text","acquisition_date"),e.xp6(2),e.Tol(""),e.Q6J("mode","currency")("showButtons",!1)("text","acquisition_value"),e.xp6(2),e.Tol(""),e.Q6J("text","ratio"),e.xp6(2),e.Tol(""),e.Q6J("showButtons",!1)("mode","currency")("text","depreciation_value"),e.xp6(3),e.Tol(""),e.Q6J("text","depreciation_duration_value"),e.xp6(2),e.Tol(""),e.Q6J("text","deprecation_type")("data",a.depreciation_duration_types),e.xp6(2),e.Tol(""),e.Q6J("text","account_parent")("filter",!0)("filterBy","name_code")("request",a.fixedAssetConfig.api.getParents),e.xp6(3),e.Tol("btn-cancel"),e.Q6J("text","Cancel"),e.xp6(2),e.Tol("btn-filter"),e.Q6J("text",null==a.config.data?null:a.config.data.acceptLabel)}},dependencies:[f.sg,J.T,L.D,U.J,q.I,N.U,s.Fj,s.JJ,s.JL,s.sg,s.u,A.r,f.Ts,f.Nd,g.X$]}),i})();var S=o(1732),I=o(3562);let b=(()=>{class i{constructor(t,a,r){this.http=t,this.dynamicDialog=a,this.toastr=r}get(t){return this.http.get(l.api.get)}getParents(t){return this.http.get(l.api.getParents)}getNotParents(t){return this.http.get(l.api.getNotParents)}getById(t){return this.http.get(l.api.getById+t)}openDialogToCreate(){var t=this;return(0,p.Z)(function*(){return yield t.dynamicDialog.showDialogWithComponent({showHeader:!1,header:"add_fixed_asset",data:{acceptLabel:"Add",rejectLabel:"Cancel"},width:"480px",height:"h-100"},T)})()}create(t){return this.http.post(l.api.create,t)}delete(t){var a=this;return(0,p.Z)(function*(){const r={showHeader:!1,header:"delete",data:{message:"do_you_want_to_delete",acceptLabel:"delete",rejectLabel:"close",data:{...t}},width:"480px",height:"auto"};if(!(yield a.dynamicDialog.confirm(r)))return!1;try{const d=yield a.http.delete(l.api.delete+t.id).toPromise();return a.toastr.success(d.message),d}catch(d){return a.toastr.error(d.error.message),d}})()}openDialogToUpdate(t){var a=this;return(0,p.Z)(function*(){const r={showHeader:!1,header:"update_fixed_asset",data:{acceptLabel:"update",rejectLabel:"Cancel",data:{...t}},height:"auto",width:"500px",styleClass:"financial-dialog"};return yield a.dynamicDialog.showDialogWithComponent(r,T)})()}update(t){return this.http.post(l.api.update+t.id,t)}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(S.O),e.LFG(I.U),e.LFG(Z._W))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();var G=o(2377),B=o(359),j=o(5077),P=o(3826);const W=[{path:"",component:(()=>{class i{constructor(t){this.fixedAssetService=t,this.tableConfig=y(this),this.permissions=u,this.showImportForm=!1,this.isLoading=!1,this.financialFilterConfig=[{field:"search",label:"search",type:c.W.TEXT,placeholder:"search_by_name_or_description"},{field:"acquisition_value",label:"acquisition_value",type:c.W.TEXT,placeholder:""},{field:"depreciation_ratio",label:"depreciation_ratio",type:c.W.TEXT,placeholder:""},{field:"depreciation_value",label:"depreciation_value",type:c.W.TEXT,placeholder:""},{field:"acquisition_date",label:"acquisition_date",type:c.W.DATE},{field:"from",label:"from",type:c.W.DATE,placeholder:"From"},{field:"to",label:"to",type:c.W.DATE}],this.sortConfig=[{optionLabel:"label",optionValue:"field",key:"sort_by",placeholder:"sort_by",data:[{label:"name",field:"name"},{label:"created_at",field:"created_at"},{label:"creator",field:"creator_id"},{label:"code",field:"code"},{label:"acquisition_value",field:"acquisition_value"},{label:"acquisition_date",field:"acquisition_date"},{label:"depreciation_ratio",field:"depreciation_ratio"},{label:"parent",field:"parent_id"},{label:"depreciation_value",field:"depreciation_value"}]},{optionLabel:"label",optionValue:"field",key:"sort_type",placeholder:"sort_type",data:[{label:m.q.asc,field:m.q.asc},{label:m.q.desc,field:m.q.desc}]}],this.importError=[]}openDialogToCreate(){var t=this;return(0,p.Z)(function*(){(yield t.fixedAssetService.openDialogToCreate())&&(t.tableConfig=y(t))})()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(b))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-fixed-list"]],decls:18,vars:9,consts:[[1,"page-card"],[1,"d-flex","justify-content-between","align-items-center"],[1,"title"],[1,"d-flex","align-items-center"],["text","new",3,"click"],[1,"d-flex","justify-content-between","my-3"],[3,"SortConfig"],["sort",""],[1,"d-flex","g-2"],[3,"config"],["filter",""],[1,"table"],[3,"tableConfig","pagination","filter","sort"],[1,"d-flex","align-items-center","justify-content-center"],["pagination",""]],template:function(t,a){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"h5",2),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"div",3)(6,"app-button",4),e.NdJ("click",function(){return a.openDialogToCreate()}),e.qZA()()(),e.TgZ(7,"div",5),e._UZ(8,"ukt-sort",6,7),e.TgZ(10,"div",8),e._UZ(11,"ukt-filter",9,10),e.qZA()(),e.TgZ(13,"div",11),e._UZ(14,"app-table",12),e.qZA(),e.TgZ(15,"div",13),e._UZ(16,"ukt-pagination",null,14),e.qZA()()),2&t){const r=e.MAs(9),h=e.MAs(12),d=e.MAs(17);e.xp6(3),e.Oqu(e.lcZ(4,7,"list_all_of_fixed_asset")),e.xp6(5),e.Q6J("SortConfig",a.sortConfig),e.xp6(3),e.Q6J("config",a.financialFilterConfig),e.xp6(3),e.Q6J("tableConfig",a.tableConfig)("pagination",d)("filter",h)("sort",r)}},dependencies:[G.a,B.Q,A.r,j.z,P.x,g.X$]}),i})()}];let E=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[x.Bz.forChild(W),x.Bz]}),i})();var M=o(1471),O=o(9293),X=o(9624),Y=o(4413),V=o(2115),z=o(1383),R=o(1890),$=o(1019),H=o(8096);let k=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[f.ez,E,z.m,g.aw,M.X,O.Q,X.U,V.u,Y.e,R.f,$.i,H.J,g.aw]}),i})()}}]);