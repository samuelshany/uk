"use strict";(self.webpackChunkkey=self.webpackChunkkey||[]).push([[1229],{7563:(M,m,e)=>{e.d(m,{c:()=>l});const l={api:{create:"role/create",get:"role",getById:"role/",update:"role/update/",delete:"role/"},page:{listRole:"",updateRole:"update/:id",viewRole:"view/:id",createRole:"new"}}},6145:(M,m,e)=>{e.d(m,{n:()=>p});var l=e(6814),i=e(4819),f=e(1890),o=e(9624),t=e(3999),h=e(9291);let p=(()=>{class g{}return g.\u0275fac=function(x){return new(x||g)},g.\u0275mod=h.oAB({type:g}),g.\u0275inj=h.cJS({imports:[l.ez,i.O,o.U,f.f,t.aw]}),g})()},7824:(M,m,e)=>{e.d(m,{o:()=>l});var l=function(i){return i.export="export",i.import="import",i.print="print",i}(l||{})},1771:(M,m,e)=>{e.d(m,{U:()=>o});var l=e(9291),i=e(6223);const f=["*"];let o=(()=>{class t{constructor(){this.onSubmit=new l.vpe}ngOnChanges(p){}getFormData(){return"function"==typeof this.formData?this.formData(this.formGroup.value):{...this.formGroup.value}}reset(){this.formGroup.reset()}submit(){if(this.formGroup.markAllAsTouched(),this.formGroup.invalid)return;const p=this.getFormData();this.onSubmit.emit(p)}ngAfterContentInit(){}ngAfterContentChecked(){}ngOnDestroy(){}}return t.\u0275fac=function(p){return new(p||t)},t.\u0275cmp=l.Xpm({type:t,selectors:[["app-form"]],inputs:{formGroup:"formGroup",formData:"formData"},outputs:{onSubmit:"onSubmit"},features:[l.TTD],ngContentSelectors:f,decls:2,vars:1,consts:[[3,"formGroup","ngSubmit"]],template:function(p,g){1&p&&(l.F$t(),l.TgZ(0,"form",0),l.NdJ("ngSubmit",function(){return g.submit()}),l.Hsn(1),l.qZA()),2&p&&l.Q6J("formGroup",g.formGroup)},dependencies:[i._Y,i.JL,i.sg]}),t})()},8718:(M,m,e)=>{e.d(m,{x:()=>l});const l={api:{create:"user/create",get:"user",getById:"user/",update:"user/update/",delete:"user/",exportCvs:"user/export/cvs",exportPdf:"user/export/pdf",import:"user/import",export:"user/data/export"},page:{list:"",view:"view/:id"}}},7165:(M,m,e)=>{e.d(m,{f:()=>A});var l=e(5861),i=e(6223),f=e(8718),o=e(7563),t=e(9291),h=e(8763),p=e(5118),g=e(6814),y=e(1771),x=e(8614),Z=e(3838),P=e(4779),E=e(3999);function U(c,T){if(1&c&&(t.TgZ(0,"div",12),t._UZ(1,"app-dropdown",19),t.qZA()),2&c){const n=t.oxw();t.xp6(1),t.Tol(""),t.Q6J("text","parent")("request",n.userRequest)("optionLabel","name")("optionValue","id")}}const S=function(){return{type:"name",length:1}};let b=(()=>{class c{constructor(n,s,u,D,C){this.formBuilder=n,this.usersService=s,this.toastr=u,this.dynamiconfig=D,this.dialogRef=C,this.formGroup=this.initForm(),this.rolesRequest=o.c.api.get,this.userRequest=f.x.api.get,this.status=[{key:"Active",value:"Active"},{key:"Suspended",value:"Suspended"},{key:"Disable",value:"Disable"}],this.dynamiconfig.data?.data&&this.patchData(this.dynamiconfig.data.data)}accept(){this.formGroup.markAllAsTouched(),this.formGroup.invalid||(this.dynamiconfig.data.data?this.usersService.update(this.formGroup.value).subscribe({next:n=>{this.toastr.success(n.message),this.close(!0)},error:n=>{this.toastr.error(n.error.message)}}):this.usersService.create(this.formGroup.value).subscribe({next:n=>{this.toastr.success(n.message),this.close(!0)},error:n=>{this.toastr.error(n.error.message)}}))}close(n){this.dialogRef.close(n)}patchData(n){this.formGroup.patchValue({...n})}initForm(){return this.formBuilder.group({id:[""],name:["",[i.kI.required]],email:["",[i.kI.required,i.kI.pattern("^[A-Za-z0-9.%-]+@[A-Za-z0-9.%-]+\\.[a-z]{2,3}$")]],status:["",[i.kI.required]],phone:["",[i.kI.required,i.kI.pattern("^[0-9]{11}$")]],parent_id:[""],role_id:[""]})}addValidators(){this.formGroup.get("parent_id").setValidators([i.kI.required])}}return c.\u0275fac=function(n){return new(n||c)(t.Y36(i.qu),t.Y36(A),t.Y36(h._W),t.Y36(p.S),t.Y36(p.E7))},c.\u0275cmp=t.Xpm({type:c,selectors:[["app-users-update"]],decls:27,vars:34,consts:[[1,"header"],[1,"d-flex","justify-content-between"],[1,"icon"],["src","../assets/Tabs/Icon/Active/Users.png","alt","img"],[3,"click"],[1,"fa-solid","fa-xmark","pointer","fs-1"],[1,"title"],[3,"formGroup"],[1,"row"],[1,"col-12"],["formControlName","name","placeholder","Name",3,"patternMessage","text"],["formControlName","email","placeholder","Email",3,"text"],[1,"col-6"],["formControlName","phone","placeholder","Phone",3,"text"],["formControlName","status","placeholder","Status",3,"text","data","optionLabel","optionValue"],["formControlName","role_id","placeholder","Role",3,"text","request","optionLabel","optionValue"],["class","col-6",4,"ngIf"],[1,"row","g-2","my-2"],[3,"text","click"],["formControlName","parent_id","placeholder","parent",3,"text","request","optionLabel","optionValue"]],template:function(n,s){if(1&n&&(t.TgZ(0,"div",0)(1,"div",1)(2,"span",2),t._UZ(3,"img",3),t.qZA(),t.TgZ(4,"span",4),t.NdJ("click",function(){return s.close(!1)}),t._UZ(5,"i",5),t.qZA()(),t.TgZ(6,"p",6),t._uU(7),t.ALo(8,"translate"),t.qZA()(),t.TgZ(9,"app-form",7)(10,"div",8)(11,"div",9),t._UZ(12,"app-text",10),t.qZA(),t.TgZ(13,"div",9),t._UZ(14,"app-text",11),t.qZA(),t.TgZ(15,"div",12),t._UZ(16,"app-text",13),t.qZA(),t.TgZ(17,"div",12),t._UZ(18,"app-dropdown",14),t.qZA(),t.TgZ(19,"div",12),t._UZ(20,"app-dropdown",15),t.qZA(),t.YNc(21,U,2,6,"div",16),t.qZA(),t.TgZ(22,"div",17)(23,"div",12)(24,"app-button",18),t.NdJ("click",function(){return s.close(!1)}),t.qZA()(),t.TgZ(25,"div",12)(26,"app-button",18),t.NdJ("click",function(){return s.accept()}),t.qZA()()()()),2&n){let u;t.xp6(7),t.Oqu(t.lcZ(8,31,null!==(u=s.dynamiconfig.header)&&void 0!==u?u:"")),t.xp6(2),t.Q6J("formGroup",s.formGroup),t.xp6(3),t.Tol(""),t.Q6J("patternMessage",t.DdM(33,S))("text","Name"),t.xp6(2),t.Tol(""),t.Q6J("text","Email"),t.xp6(2),t.Tol(""),t.Q6J("text","Phone"),t.xp6(2),t.Tol(""),t.Q6J("text","Status")("data",s.status)("optionLabel","key")("optionValue","value"),t.xp6(2),t.Tol(""),t.Q6J("text","Role")("request",s.rolesRequest)("optionLabel","name")("optionValue","id"),t.xp6(1),t.Q6J("ngIf",null==s.dynamiconfig.data?null:s.dynamiconfig.data.data),t.xp6(3),t.Tol("btn-cancel"),t.Q6J("text","Cancel"),t.xp6(2),t.Tol("btn-filter"),t.Q6J("text",null==s.dynamiconfig.data?null:s.dynamiconfig.data.acceptLabel)}},dependencies:[g.O5,y.U,i.JJ,i.JL,i.sg,i.u,x.T,Z.J,P.r,E.X$]}),c})();var _=e(1732),L=e(3562);let A=(()=>{class c{constructor(n,s,u){this.http=n,this.dynamicDialog=s,this.toastr=u}get(){return this.http.get(f.x.api.get)}export(){return this.http.get(f.x.api.export)}openDialogToCreateUser(){var n=this;return(0,l.Z)(function*(){return n.dynamicDialog.showDialogWithComponent({showHeader:!1,header:"add_user",data:{acceptLabel:"add",rejectLabel:"cancel"},width:"500px",height:"auto"},b)})()}create(n){return this.http.post(f.x.api.create,n)}getById(n){return this.http.get(f.x.api.getById+n)}delete(n){var s=this;return(0,l.Z)(function*(){const u={showHeader:!1,header:"delete",closable:!0,data:{message:"do_you_want_to_delete",acceptLabel:"delete",rejectLabel:"close",data:{...n}},width:"300px",height:"164px"};if(!(yield s.dynamicDialog.confirm(u)))return!1;try{const C=yield s.http.delete(f.x.api.delete+n.id).toPromise();return s.toastr.success(C.message),C}catch(C){throw s.toastr.error(C.error.message),C}})()}openDialogToUpdateUser(n){var s=this;return(0,l.Z)(function*(){const u={showHeader:!1,header:"update",data:{message:"do_you_want_to_delete",acceptLabel:"update",rejectLabel:"cancel",data:{...n}},width:"480px",height:"auto"};return yield s.dynamicDialog.showDialogWithComponent(u,b)})()}update(n){return this.http.post(f.x.api.update+n.id,n)}}return c.\u0275fac=function(n){return new(n||c)(t.LFG(_.O),t.LFG(L.U),t.LFG(h._W))},c.\u0275prov=t.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"}),c})()},1229:(M,m,e)=>{e.r(m),e.d(m,{UsersModule:()=>V});var l=e(1383),i=e(6814),f=e(2954),o=e(9291),t=e(1882),h=e(5861),p=e(5946),y=e(8718),x=function(r){return r.list="View Users",r.create="Create User",r.update="Edit User",r.delete="Delete User",r.export="Export Users",r}(x||{});const Z=r=>{return{cols:[{field:"id",label:"id",class:"title"},{field:"name",label:"Name",class:"title"},{field:"email",label:"Email",class:"title"},{field:"status",label:"Status",class:"title"},{field:"role",label:"Role",class:"title",format:d=>d.role.name},{field:"parent",label:"Parent",class:"title",format:d=>d.parent?d.parent:"-"},{label:"action",class:"title",actions:[{icon:"trash",class:"main-color",fun:(d=(0,h.Z)(function*(a){return yield r.usersService.delete(a,"delete-role")}),function(v){return d.apply(this,arguments)}),id:x.delete},{icon:"pen-to-square",class:"main-color",fun:function(){var d=(0,h.Z)(function*(a){return yield r.usersService.openDialogToUpdateUser(a)});return function(v){return d.apply(this,arguments)}}(),id:x.delete}]}],Request:y.x.api.get};var d};var P=e(7824),U=e(6924),b=e(5219),_=e(7165),L=e(4372),A=e(6223),c=e(4858),T=e(2377),n=e(5077),s=e(4811),u=e(359),D=e(4779),C=e(3999);let R=(()=>{class r{constructor(a,v,O,J){this.usersService=a,this.authService=v,this.formBuilder=O,this.permissionsService=J,this.fileConfig={fileName:"Role",fileOption:[P.o.export,P.o.print],export:{type:[{key:"Pdf",value:"Pdf"},{key:"Csv",value:"Csv"},{key:"Exil",value:"Exil"}]},print:{}},this.tableConfig=Z(this),this.filtersConfig=[{label:"search",field:"search",type:U.W.TEXT,placeholder:"search"},{label:"From",field:"from",type:U.W.DATE,placeholder:"From"},{label:"To",field:"to",type:U.W.DATE,placeholder:"To"},{label:"Created By",field:"creator_id",type:U.W.SELECT,options:{value:"id",label:"name"},request:y.x.api.get,placeholder:"Created By"}],this.sortConfig=[{optionLabel:"label",optionValue:"field",key:"sort_by",placeholder:"sort_by",data:[{label:"name",field:"name"},{label:"role",field:"role"},{label:"status",field:"status"}]},{optionLabel:"label",optionValue:"field",key:"sort_type",placeholder:"sort_by",data:[{label:p.q.asc,field:p.q.asc},{label:p.q.desc,field:p.q.desc}]}],this.icon=b.dv}openToCreate(){var a=this;return(0,h.Z)(function*(){(yield a.usersService.openDialogToCreateUser())&&(a.tableConfig=Z(a))})()}export(){this.usersService.export().subscribe({next:a=>{window.open(a.file_path)},error:a=>{}})}}return r.\u0275fac=function(a){return new(a||r)(o.Y36(_.f),o.Y36(L.e),o.Y36(A.qu),o.Y36(c.q))},r.\u0275cmp=o.Xpm({type:r,selectors:[["app-users-table"]],decls:18,vars:10,consts:[[1,"d-flex","justify-content-between","pb-5"],[1,"title"],["text","new",3,"icon","click"],[1,"d-flex","justify-content-end","my-2"],["text","export",3,"click"],[1,"d-flex","justify-content-between"],[3,"SortConfig"],["sort",""],[3,"config"],["filter",""],[1,"table"],[3,"tableConfig","pagination","filter","sort"],["table",""],[1,"d-flex","align-items-center","justify-content-center"],["pagination",""]],template:function(a,v){if(1&a&&(o.TgZ(0,"div",0)(1,"h5",1),o._uU(2),o.ALo(3,"translate"),o.qZA(),o.TgZ(4,"app-button",2),o.NdJ("click",function(){return v.openToCreate()}),o.qZA()(),o.TgZ(5,"div",3)(6,"app-button",4),o.NdJ("click",function(){return v.export()}),o.qZA()(),o.TgZ(7,"div",5),o._UZ(8,"ukt-sort",6,7)(10,"ukt-filter",8,9),o.qZA(),o.TgZ(12,"div",10),o._UZ(13,"app-table",11,12),o.qZA(),o.TgZ(15,"div",13),o._UZ(16,"ukt-pagination",null,14),o.qZA()),2&a){const O=o.MAs(9),J=o.MAs(11),j=o.MAs(17);o.xp6(2),o.Oqu(o.lcZ(3,8,"list_of_users")),o.xp6(2),o.Q6J("icon",v.icon.PLUS),o.xp6(4),o.Q6J("SortConfig",v.sortConfig),o.xp6(2),o.Q6J("config",v.filtersConfig),o.xp6(3),o.Q6J("tableConfig",v.tableConfig)("pagination",j)("filter",J)("sort",O)}},dependencies:[T.a,n.z,s.x,u.Q,D.r,C.X$],styles:["[_nghost-%COMP%]{font-size:1.6rem}[_nghost-%COMP%]   select[_ngcontent-%COMP%]   option[_ngcontent-%COMP%], [_nghost-%COMP%]   button[_ngcontent-%COMP%], [_nghost-%COMP%]   a[_ngcontent-%COMP%], [_nghost-%COMP%]   h5[_ngcontent-%COMP%]{font-size:1.6rem}[_nghost-%COMP%]   .table-head[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#fff;color:#979797;font-size:1.5rem;font-weight:400!important;min-width:180px!important}[_nghost-%COMP%]   .t-body[_ngcontent-%COMP%]{font-family:var(--Roboto);font-size:1.4rem;color:#2e2e2e;background-color:var(--lightGray)}[_nghost-%COMP%]   .t-body[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .action[_ngcontent-%COMP%]{color:var(--mainColor)!important}[_nghost-%COMP%]   .t-body[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .delete[_ngcontent-%COMP%]{color:var(--red)}@media screen and (max-width: 992px){[_nghost-%COMP%]   .actions[_ngcontent-%COMP%]{width:auto}}[_nghost-%COMP%]   form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], [_nghost-%COMP%]   form[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{font-size:16px}[_nghost-%COMP%]   .modal.fade[_ngcontent-%COMP%]{z-index:1100!important}[_nghost-%COMP%]   .modal-content[_ngcontent-%COMP%], [_nghost-%COMP%]   .modal-dialog[_ngcontent-%COMP%]{z-index:1099!important}"]}),r})();const F=[{path:"",component:(()=>{class r{constructor(a){this.sharedService=a}ngOnInit(){}}return r.\u0275fac=function(a){return new(a||r)(o.Y36(t.F))},r.\u0275cmp=o.Xpm({type:r,selectors:[["app-users"]],decls:3,vars:0,consts:[[1,"col"],[1,"page-card","bg-white"]],template:function(a,v){1&a&&(o.TgZ(0,"div",0)(1,"div",1),o._UZ(2,"app-users-table"),o.qZA()())},dependencies:[R]}),r})()}];let G=(()=>{class r{}return r.\u0275fac=function(a){return new(a||r)},r.\u0275mod=o.oAB({type:r}),r.\u0275inj=o.cJS({imports:[f.Bz.forChild(F),f.Bz]}),r})();var I=e(1471),B=e(4413),N=e(1019),z=e(8096),Q=e(2115),W=e(6145),Y=e(1890);let V=(()=>{class r{constructor(){}}return r.\u0275fac=function(a){return new(a||r)},r.\u0275mod=o.oAB({type:r}),r.\u0275inj=o.cJS({imports:[i.ez,I.X,N.i,z.J,Q.u,W.n,B.e,Y.f,G,l.m,C.aw]}),r})()}}]);