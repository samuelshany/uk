"use strict";(self.webpackChunkkey=self.webpackChunkkey||[]).push([[7294],{7294:(x,d,n)=>{n.r(d),n.d(d,{SafeMovementModule:()=>ie});var s=n(6814),g=n(2954),e=n(9291),u=n(5861);const l={api:{create:"safe-movement/create",get:"safe-movement",getUsers:"user",getCurrencies:"currency",getTypes:"safe-movement/types/list",getById:"safe-movement/",update:"safe-movement/update/",delete:"safe-movement/",exportCvs:"safe-movement/export/cvs",exportPdf:"safe-movement/export/pdf",importAccount:"safe-movement/import"},page:{list:"",update:"",create:"",view:"payment/view/:id"}};var f=function(o){return o.list="View Safe Movements",o.create="Create Safe Movement",o.update="Edit Safe Movement",o.delete="Delete Safe Movement",o}(f||{});const p=o=>{return{cols:[{field:"id",label:"id",class:""},{field:"date",label:"date",class:""},{field:"assets_involved",label:"assets_involved",format:i=>i.assets_involved?i.assets_involved:"-"},{field:"description",label:"description",format:i=>i.description?i.description:"-"},{field:"amount",label:"amount",class:""},{label:"action",actions:[{id:f.delete,icon:"trash",class:"main-color",fun:(i=(0,u.Z)(function*(t){return yield o.safeMovementService.delete(t)}),function(a){return i.apply(this,arguments)})},{id:f.update,icon:"pen-to-square",class:"main-color",fun:function(){var i=(0,u.Z)(function*(t){return yield o.safeMovementService.openDialogToUpdate(t)});return function(a){return i.apply(this,arguments)}}()}]}],Request:l.api.get};var i};var v=n(6924),S=n(8718),h=n(5946),L=n(5219),c=n(6223),J=n(68),T=n(8763),Z=n(5118),U=n(8614),G=n(1904),P=n(3838),N=n(6098),Q=n(1771),b=n(4779),y=n(3999);function E(o,i){if(1&o&&(e.TgZ(0,"div",23),e._uU(1),e.qZA()),2&o){const t=i.$implicit;e.xp6(1),e.hij(" ",t.value," ")}}let A=(()=>{class o{constructor(t,a,r,C,m){this.fb=t,this.toastr=a,this.dynamicDialogConfig=r,this.dialogRef=C,this.safeMovementService=m,this.accountConfig=J.a,this.safeConfig=l,this.formGroup=this.initForm(),this.bankConfig=l,this.permissions=f,this.dynamicDialogConfig.data?.data&&this.fillDataToUpdate(this.dynamicDialogConfig.data?.data)}ngOnInit(){this.safeMovementService.get().subscribe(t=>{this.users=t.data})}fillDataToUpdate(t){this.formGroup.patchValue({id:t.id,date:t.date,description:t?.description,source_id:t.source_safe_id,destination_id:t.destination_safe_id,amount:t.amount,assets_involved:t?.assets_involved})}initForm(){return this.fb.group({id:[Number],date:[(new Date).toLocaleDateString("en-CA"),[c.kI.required]],description:[""],source_id:["",[c.kI.required]],destination_id:["",[c.kI.required]],amount:["",[c.kI.required]],assets_involved:[""]})}accept(){this.formGroup.invalid?this.formGroup.markAllAsTouched():this.dynamicDialogConfig.data.data?this.safeMovementService.update(this.formGroup.value).subscribe({next:t=>{this.toastr.success(t.message),this.closePopup(!0)},error:t=>{this.errors=t.error.errors,this.toastr.error(t.error.message)}}):this.safeMovementService.create(this.formGroup.value).subscribe({next:t=>{this.toastr.success(t.message),this.closePopup(!0)},error:t=>{this.errors=t.error.errors,this.toastr.error(t.error.message)}})}closePopup(t){this.dialogRef.close(t)}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(c.qu),e.Y36(T._W),e.Y36(Z.S),e.Y36(Z.E7),e.Y36(D))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-safe-form"]],decls:31,vars:37,consts:[[1,"main"],[1,"header"],[1,"d-flex","justify-content-between"],[1,"icon"],["src","../assets/Tabs/Icon/Active/craete-bank.png","alt","img"],[3,"click"],[1,"fa-solid","fa-xmark","pointer","fs-1"],[1,"title"],[3,"formGroup"],["class","text-error",4,"ngFor","ngForOf"],[1,"row"],[1,"mb-3","col-sm-12"],["formControlName","assets_involved","placeholder","",3,"text"],[1,"mb-5","col-sm-12"],["formControlName","date","ngDefaultControl","","placeholder","",3,"text"],["formControlName","amount","placeholder","",3,"mode","showButtons","text"],[1,"mb-3","col-12"],["formControlName","description","ngDefaultControl","","placeholder","",3,"text"],["filterBy","name_code","placeholder","select","optionLabel","name_code","optionValue","id","formControlName","source_id","ngDefaultControl","",3,"filter","text","request"],["filterBy","name_code","placeholder","select","optionLabel","name_code","optionValue","id","formControlName","destination_id",3,"filter","text","request"],[1,"row","g-2","my-2"],[1,"col-6"],[3,"text","click"],[1,"text-error"]],template:function(t,a){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"span",3),e._UZ(4,"img",4),e.qZA(),e.TgZ(5,"span",5),e.NdJ("click",function(){return a.closePopup(!1)}),e._UZ(6,"i",6),e.qZA()(),e.TgZ(7,"p",7),e._uU(8),e.ALo(9,"translate"),e.qZA()(),e.TgZ(10,"app-form",8),e.YNc(11,E,2,1,"div",9),e.ALo(12,"keyvalue"),e.TgZ(13,"div",10)(14,"div",11),e._UZ(15,"app-text",12),e.qZA(),e.TgZ(16,"div",13),e._UZ(17,"app-date",14),e.qZA(),e.TgZ(18,"div",11),e._UZ(19,"app-number-input",15),e.qZA(),e.TgZ(20,"div",16),e._UZ(21,"app-text",17),e.qZA(),e.TgZ(22,"div",16),e._UZ(23,"app-dropdown",18),e.qZA(),e.TgZ(24,"div",11),e._UZ(25,"app-dropdown",19),e.qZA()(),e.TgZ(26,"div",20)(27,"div",21)(28,"app-button",22),e.NdJ("click",function(){return a.closePopup(!1)}),e.qZA()(),e.TgZ(29,"div",21)(30,"app-button",22),e.NdJ("click",function(){return a.accept()}),e.qZA()()()()()),2&t){let r;e.xp6(8),e.Oqu(e.lcZ(9,33,null!==(r=a.dynamicDialogConfig.header)&&void 0!==r?r:"")),e.xp6(2),e.Q6J("formGroup",a.formGroup),e.xp6(1),e.Q6J("ngForOf",e.lcZ(12,35,a.errors)),e.xp6(4),e.Tol(""),e.Q6J("text","assets_involved"),e.xp6(2),e.Tol(""),e.Q6J("text","date"),e.xp6(2),e.Tol(""),e.Q6J("mode","currency")("showButtons",!1)("text","amount"),e.xp6(2),e.Tol(""),e.Q6J("text","description"),e.xp6(2),e.Tol(""),e.Q6J("filter",!0)("text","source_safe")("request",a.accountConfig.api.getNotParent),e.xp6(2),e.Tol(""),e.Q6J("filter",!0)("text","destination_safe")("request",a.accountConfig.api.getNotParent),e.xp6(3),e.Tol("btn-cancel"),e.Q6J("text","Cancel"),e.xp6(2),e.Tol("btn-filter"),e.Q6J("text",null==a.dynamicDialogConfig.data?null:a.dynamicDialogConfig.data.acceptLabel)}},dependencies:[s.sg,c.Fj,c.JJ,c.JL,c.sg,c.u,U.T,G.D,P.J,N.I,Q.U,b.r,s.Nd,y.X$]}),o})();var O=n(1732),I=n(3562);let D=(()=>{class o{constructor(t,a,r){this.http=t,this.dynamicDialog=a,this.toastr=r}get(t){return this.http.get(l.api.get)}openDialogToCreate(){return this.dynamicDialog.showDialogWithComponent({showHeader:!1,header:"add_safe_movement",data:{acceptLabel:"add",rejectLabel:"cancel"},width:"500px",height:"auto"},A)}create(t){return this.http.post(l.api.create,t)}delete(t){var a=this;return(0,u.Z)(function*(){const r={showHeader:!1,header:"delete",data:{message:"do_you_want_to_delete",acceptLabel:"delete",rejectLabel:"close",data:{...t}},width:"300px",height:"164px"};return!!(yield a.dynamicDialog.confirm(r))&&a.http.delete(l.api.delete+t.id).toPromise().then(m=>(a.toastr.success(m.message),m)).catch(m=>(a.toastr.error(m.error.message),m))})()}openDialogToUpdate(t){var a=this;return(0,u.Z)(function*(){const r={showHeader:!1,header:"update_safe_movement",data:{acceptLabel:"update",rejectLabel:"cancel",data:{...t}},width:"480px",height:"auto"};return yield a.dynamicDialog.showDialogWithComponent(r,A)})()}update(t){return this.http.post(l.api.update+t.id,t)}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(O.O),e.LFG(I.U),e.LFG(T._W))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var B=n(8275),j=n(2377),W=n(359),Y=n(5077),X=n(3826);function R(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"app-button",13),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.openDialogToCreate())}),e.qZA()}if(2&o){const t=e.oxw();e.Tol("btn-filter"),e.Q6J("text","new")("icon",t.icon.PLUS)("iconPos","left")}}const V=function(o){return[o]};let z=(()=>{class o{constructor(t){this.safeMovementService=t,this.isSubmitted=!1,this.tableConfig=p(this),this.filtersConfig=[{field:"search",label:"search",type:v.W.TEXT,placeholder:"search"},{field:"creator_id",label:"creator",type:v.W.SELECT,options:{value:"id",label:"name"},request:S.x.api.get,placeholder:"select"},{field:"from",label:"from",type:v.W.DATE,placeholder:"From"},{field:"to",label:"to",type:v.W.DATE}],this.sortConfig=[{optionLabel:"label",optionValue:"field",key:"sort_by",placeholder:"sort_by",data:[{label:"date",field:"date"},{label:"amount",field:"amount"},{label:"id",field:"id"}]},{optionLabel:"label",optionValue:"field",key:"sort_type",placeholder:"sort_type",data:[{label:h.q.asc,field:h.q.asc},{label:h.q.desc,field:h.q.desc}]}],this.permissions=f,this.icon=L.dv}openDialogToCreate(){var t=this;return(0,u.Z)(function*(){(yield t.safeMovementService.openDialogToCreate())&&(t.tableConfig=p(t))})()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(D))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-safe-list"]],decls:16,vars:12,consts:[[1,"d-flex","align-items-center","justify-content-between"],[1,"title"],[1,"d-flex"],[3,"text","class","icon","iconPos","click",4,"hasPermissions"],[1,"d-flex","flex-row","align-items-center","justify-content-between"],[3,"SortConfig"],["sort",""],[3,"config"],["filter",""],[1,"table"],[3,"filter","sort","tableConfig","pagination"],[1,"d-flex","align-items-center","justify-content-center"],["pagination",""],[3,"text","icon","iconPos","click"]],template:function(t,a){if(1&t&&(e.TgZ(0,"div",0)(1,"h5",1),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"div",2),e.YNc(5,R,1,5,"app-button",3),e.qZA()(),e.TgZ(6,"div",4),e._UZ(7,"ukt-sort",5,6)(9,"ukt-filter",7,8),e.qZA(),e.TgZ(11,"div",9),e._UZ(12,"app-table",10),e.qZA(),e.TgZ(13,"div",11),e._UZ(14,"ukt-pagination",null,12),e.qZA()),2&t){const r=e.MAs(8),C=e.MAs(10),m=e.MAs(15);e.xp6(2),e.Oqu(e.lcZ(3,8,"list_of__safe_movement")),e.xp6(3),e.Q6J("hasPermissions",e.VKq(10,V,a.permissions.create)),e.xp6(2),e.Q6J("SortConfig",a.sortConfig),e.xp6(2),e.Q6J("config",a.filtersConfig),e.xp6(3),e.Q6J("filter",C)("sort",r)("tableConfig",a.tableConfig)("pagination",m)}},dependencies:[B.z,b.r,j.a,W.Q,Y.z,X.x,y.X$]}),o})();const $=[{path:"",component:(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-safe-movement"]],decls:2,vars:0,consts:[[1,"page-card"]],template:function(t,a){1&t&&(e.TgZ(0,"div",0),e._UZ(1,"app-safe-list"),e.qZA())},dependencies:[z]}),o})(),canActivate:[n(2127).t],data:{permission:"View Safe Movements"}}];let w=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[g.Bz.forChild($),g.Bz]}),o})();var _=n(9624),q=n(4413),k=n(1890),ee=n(1471),te=n(2115),oe=n(1019),ne=n(8096),ae=n(1383);let ie=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[s.ez,w,c.UX,ae.m,_.U,q.e,k.f,y.aw,ee.X,te.u,oe.i,ne.J]}),o})()},68:(x,d,n)=>{n.d(d,{a:()=>s});const s={api:{create:"account/create",get:"account",getNotParent:"not-parents/accounts",getParent:"parents/accounts",getById:"account/",update:"account/update/",delete:"account/",exportExample:"account/export/example",exportExampleSub:"account/export/example/sub",exportCvs:"account/export/cvs",exportPdf:"account/export/pdf",importAccount:"account/import",importAccountSub:"account/import/sub"},page:{}}},1771:(x,d,n)=>{n.d(d,{U:()=>u});var s=n(9291),g=n(6223);const e=["*"];let u=(()=>{class l{constructor(){this.onSubmit=new s.vpe}ngOnChanges(p){}getFormData(){return"function"==typeof this.formData?this.formData(this.formGroup.value):{...this.formGroup.value}}reset(){this.formGroup.reset()}submit(){if(this.formGroup.markAllAsTouched(),this.formGroup.invalid)return;const p=this.getFormData();this.onSubmit.emit(p)}ngAfterContentInit(){}ngAfterContentChecked(){}ngOnDestroy(){}}return l.\u0275fac=function(p){return new(p||l)},l.\u0275cmp=s.Xpm({type:l,selectors:[["app-form"]],inputs:{formGroup:"formGroup",formData:"formData"},outputs:{onSubmit:"onSubmit"},features:[s.TTD],ngContentSelectors:e,decls:2,vars:1,consts:[[3,"formGroup","ngSubmit"]],template:function(p,v){1&p&&(s.F$t(),s.TgZ(0,"form",0),s.NdJ("ngSubmit",function(){return v.submit()}),s.Hsn(1),s.qZA()),2&p&&s.Q6J("formGroup",v.formGroup)},dependencies:[g._Y,g.JL,g.sg]}),l})()},8718:(x,d,n)=>{n.d(d,{x:()=>s});const s={api:{create:"user/create",get:"user",getById:"user/",update:"user/update/",delete:"user/",exportCvs:"user/export/cvs",exportPdf:"user/export/pdf",import:"user/import",export:"user/data/export"},page:{list:"",view:"view/:id"}}}}]);