"use strict";(self.webpackChunkkey=self.webpackChunkkey||[]).push([[9658],{7619:(Z,m,a)=>{a.d(m,{t:()=>s});const s={api:{create:"category/create",get:"category",getById:"category/",update:"category/update/",delete:"category/",exportCvs:"category/export/cvs",exportPdf:"category/export/pdf",importAccount:"category/import"},page:{list:"/categories/list",update:"/categories/update",create:"/categories/create",view:"/categories/view",delete:"/categories/delete"}}},3673:(Z,m,a)=>{a.d(m,{G:()=>F});var s=a(5861),p=a(7619),t=a(6223),C=a(8645),e=a(9291),v=a(8763),d=a(5118),g=a(6814),b=a(1771),D=a(8614),l=a(3838),_=a(5253),n=a(4779),c=a(3999);function O(r,f){if(1&r&&(e.TgZ(0,"div",19),e._uU(1),e.qZA()),2&r){const o=f.$implicit;e.xp6(1),e.hij(" ",o.value," ")}}function x(r,f){if(1&r&&(e.TgZ(0,"p",20),e._uU(1),e.qZA()),2&r){const o=e.oxw();e.xp6(1),e.Oqu(null==o.serverValidation?null:o.serverValidation.name[0])}}function L(r,f){if(1&r&&(e.TgZ(0,"p",20),e._uU(1),e.qZA()),2&r){const o=e.oxw();e.xp6(1),e.Oqu(null==o.serverValidation?null:o.serverValidation.description[0])}}let A=(()=>{class r{constructor(o,i,u,h,T){this.fb=o,this.toaster=i,this.categoriesService=u,this.config=h,this.dialogRef=T,this.unsubscribe=new C.x,this.formGroup=this.initForm(),this.isLoading=!1,this.categories=[],this.config.data?.data&&this.fillDataToUpdate()}ngOnInit(){this.categoriesService.getCategories().subscribe(o=>{this.categories=o.data})}reject(o){this.dialogRef.close(o)}initForm(){return this.fb.group({id:[Number],name:["",[t.kI.required,t.kI.minLength(1),t.kI.maxLength(50)]],description:["",t.kI.required],parent_id:[null],prefix:[""]})}accept(){this.formGroup.invalid?this.formGroup.markAllAsTouched():(this.isLoading=!0,this.config.data.data?this.categoriesService.update(this.formGroup.value).subscribe(o=>{this.toaster.success(o.message),this.dialogRef.close(!0)},o=>{this.errors=o.error.errors,this.isLoading=!1}):this.categoriesService.create(this.formGroup.value).subscribe(o=>{this.toaster.success(o.message),this.dialogRef.close(!0)},o=>{this.errors=o.error.errors,this.isLoading=!1}))}fillDataToUpdate(){this.formGroup.patchValue({id:this.config.data.data?.id,name:this.config.data.data?.name,description:this.config.data.data?.description,parent_id:this.config.data.data?.parent_id,prefix:this.config.data.data?.prefix})}ngOnDestroy(){this.unsubscribe.next(!0),this.unsubscribe.complete()}}return r.\u0275fac=function(o){return new(o||r)(e.Y36(t.qu),e.Y36(v._W),e.Y36(F),e.Y36(d.S),e.Y36(d.E7))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-categories-form"]],decls:28,vars:30,consts:[[1,"main"],[1,"header"],[1,"d-flex","justify-content-between"],[1,"icon"],["src","assets/Tabs/Icon/Active/inventory-icon.png","alt","img"],[3,"click"],[1,"fa-solid","fa-xmark","pointer","fs-1"],["translate","",1,"title"],[3,"formGroup","onSubmit"],["class","text-error",4,"ngFor","ngForOf"],["text","name","formControlName","name","ngDefaultControl","","placeholder","",3,"type"],["class","error",4,"ngIf"],["text","description","formControlName","description","ngDefaultControl","","placeholder","",3,"type"],["text","parent","formControlName","parent_id","ngDefaultControl","","placeholder","",3,"data","optionValue","optionLabel","placeholder"],[1,"col-md-12"],["text","prefix","formControlName","prefix","ngDefaultControl","","placeholder","",3,"type"],[1,"row","g-2","my-2"],[1,"col-6"],[3,"text","click"],[1,"text-error"],[1,"error"]],template:function(o,i){if(1&o&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"span",3),e._UZ(4,"img",4),e.qZA(),e.TgZ(5,"span",5),e.NdJ("click",function(){return i.reject(!1)}),e._UZ(6,"i",6),e.qZA()(),e.TgZ(7,"p",7),e._uU(8),e.ALo(9,"translate"),e.qZA()(),e.TgZ(10,"app-form",8),e.NdJ("onSubmit",function(){return i.accept()}),e.YNc(11,O,2,1,"div",9),e.ALo(12,"keyvalue"),e.TgZ(13,"div"),e._UZ(14,"app-text",10),e.YNc(15,x,2,1,"p",11),e.qZA(),e.TgZ(16,"div"),e._UZ(17,"app-textarea",12),e.YNc(18,L,2,1,"p",11),e.qZA(),e.TgZ(19,"div"),e._UZ(20,"app-dropdown",13),e.qZA(),e.TgZ(21,"div",14),e._UZ(22,"app-text",15),e.qZA(),e.TgZ(23,"div",16)(24,"div",17)(25,"app-button",18),e.NdJ("click",function(){return i.reject(!1)}),e.qZA()(),e.TgZ(26,"div",17)(27,"app-button",18),e.NdJ("click",function(){return i.accept()}),e.qZA()()()()()),2&o){let u;e.xp6(8),e.Oqu(e.lcZ(9,26,null!==(u=i.config.header)&&void 0!==u?u:"")),e.xp6(2),e.Q6J("formGroup",i.formGroup),e.xp6(1),e.Q6J("ngForOf",e.lcZ(12,28,i.errors)),e.xp6(3),e.Tol("d-flex flex-column justify-content-between"),e.Q6J("type","text"),e.xp6(1),e.Q6J("ngIf",null==i.serverValidation?null:i.serverValidation.name),e.xp6(2),e.Tol("d-flex flex-column justify-content-between"),e.Q6J("type","text"),e.xp6(1),e.Q6J("ngIf",null==i.serverValidation?null:i.serverValidation.description),e.xp6(2),e.Tol("d-flex flex-column justify-content-between"),e.Q6J("data",i.categories)("optionValue","id")("optionLabel","name")("placeholder","select"),e.xp6(2),e.Tol("d-flex flex-column justify-content-between mt-2"),e.Q6J("type","prefix"),e.xp6(3),e.Tol("btn-cancel"),e.Q6J("text","Cancel"),e.xp6(2),e.Tol("btn-filter"),e.Q6J("text",null==i.config.data?null:i.config.data.acceptLabel)}},dependencies:[g.sg,g.O5,b.U,t.Fj,t.JJ,t.JL,t.sg,t.u,D.T,l.J,_.R,n.r,c.Pi,g.Nd,c.X$]}),r})();var J=a(1732),I=a(3562);let F=(()=>{class r{constructor(o,i,u){this.http=o,this.dynamicDialog=i,this.toastr=u}getCategories(o){return this.http.get(p.t.api.get)}openDialogToCreateCategory(){return this.dynamicDialog.showDialogWithComponent({showHeader:!1,header:"add_category",data:{acceptLabel:"Add",rejectLabel:"Cancel"},width:"500px",height:"auto"},A)}create(o){return this.http.post(p.t.api.create,o)}delete(o,i,u){var h=this;return(0,s.Z)(function*(){const T={showHeader:!1,header:"delete",data:{message:"do_you_want_to_delete",acceptLabel:"delete",rejectLabel:"close",data:{...o},name:"name"},width:"500px",height:"auto"};if(yield h.dynamicDialog.confirm(T))try{const y=yield h.http.delete(p.t.api.delete+o.id).toPromise();return h.toastr.success(y.message),y}catch(y){throw h.toastr.error(y.error.message),y}return!1})()}openDialogToUpdateCategory(o,i,u){var h=this;return(0,s.Z)(function*(){const T={showHeader:!1,header:"update_category",data:{acceptLabel:"update",rejectLabel:"cancel",data:{...o}},height:"330px",width:"auto"};return yield h.dynamicDialog.showDialogWithComponent(T,A)})()}update(o){return this.http.post(p.t.api.update+o.id,o)}}return r.\u0275fac=function(o){return new(o||r)(e.LFG(J.O),e.LFG(I.U),e.LFG(v._W))},r.\u0275prov=e.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})()},1771:(Z,m,a)=>{a.d(m,{U:()=>C});var s=a(9291),p=a(6223);const t=["*"];let C=(()=>{class e{constructor(){this.onSubmit=new s.vpe}ngOnChanges(d){}getFormData(){return"function"==typeof this.formData?this.formData(this.formGroup.value):{...this.formGroup.value}}reset(){this.formGroup.reset()}submit(){if(this.formGroup.markAllAsTouched(),this.formGroup.invalid)return;const d=this.getFormData();this.onSubmit.emit(d)}ngAfterContentInit(){}ngAfterContentChecked(){}ngOnDestroy(){}}return e.\u0275fac=function(d){return new(d||e)},e.\u0275cmp=s.Xpm({type:e,selectors:[["app-form"]],inputs:{formGroup:"formGroup",formData:"formData"},outputs:{onSubmit:"onSubmit"},features:[s.TTD],ngContentSelectors:t,decls:2,vars:1,consts:[[3,"formGroup","ngSubmit"]],template:function(d,g){1&d&&(s.F$t(),s.TgZ(0,"form",0),s.NdJ("ngSubmit",function(){return g.submit()}),s.Hsn(1),s.qZA()),2&d&&s.Q6J("formGroup",g.formGroup)},dependencies:[p._Y,p.JL,p.sg]}),e})()},5253:(Z,m,a)=>{a.d(m,{R:()=>D});var s=a(67),p=a(6223),t=a(9291),C=a(6814),e=a(6218),v=a(3999);function d(l,_){1&l&&t._UZ(0,"i",6)}function g(l,_){if(1&l&&(t.TgZ(0,"label"),t._uU(1),t.ALo(2,"translate"),t.TgZ(3,"span",4),t.YNc(4,d,1,0,"i",5),t.qZA()()),2&l){const n=t.oxw();t.xp6(1),t.hij("",t.lcZ(2,2,n.text)," "),t.xp6(3),t.Q6J("ngIf",n.control&&(null==n.control.errors?null:n.control.errors.required))}}function b(l,_){if(1&l&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&l){const n=t.oxw();t.Tol("text-danger"),t.xp6(1),t.Oqu(n.object.keys(n.control.errors)[0])}}let D=(()=>{class l extends s.t{constructor(n){super(),this.formGroupDirective=n,this.placeholder="",this.rows="2",this.cols="",this.readOnly=!1,this.class="d-flex flex-column justify-content-between",this.object=Object}writeValue(n){this.value=n}onValueChange(n){this.onChange(n.target.value),this.onTouched()}}return l.\u0275fac=function(n){return new(n||l)(t.Y36(p.sg,8))},l.\u0275cmp=t.Xpm({type:l,selectors:[["app-textarea"]],inputs:{value:"value",text:"text",placeholder:"placeholder",rows:"rows",cols:"cols",readOnly:"readOnly",class:"class",type:"type"},features:[t._Bn([{provide:p.JU,useExisting:l,multi:!0},{provide:p.Cf,useExisting:l,multi:!0}]),t.qOj],decls:4,vars:8,consts:[[3,"ngClass"],[4,"ngIf"],["pInputTextarea","",3,"rows","cols","ngModel","placeholder","disabled","ngModelChange","input"],[3,"class",4,"ngIf"],[1,"required-aster"],["class","fa-solid fa-asterisk",4,"ngIf"],[1,"fa-solid","fa-asterisk"]],template:function(n,c){1&n&&(t.TgZ(0,"div",0),t.YNc(1,g,5,4,"label",1),t.TgZ(2,"textarea",2),t.NdJ("ngModelChange",function(x){return c.value=x})("input",function(x){return c.onValueChange(x)}),t.qZA(),t.YNc(3,b,2,3,"span",3),t.qZA()),2&n&&(t.Q6J("ngClass",c.class),t.xp6(1),t.Q6J("ngIf",c.text),t.xp6(1),t.Q6J("rows",c.rows)("cols",c.cols)("ngModel",c.value)("placeholder",c.placeholder)("disabled",c.readOnly),t.xp6(1),t.Q6J("ngIf",c.control&&c.control.errors&&(c.control.touched||c.formGroupDirective.submitted)))},dependencies:[C.mk,C.O5,p.Fj,p.JJ,p.On,e.g,v.X$]}),l})()},8718:(Z,m,a)=>{a.d(m,{x:()=>s});const s={api:{create:"user/create",get:"user",getById:"user/",update:"user/update/",delete:"user/",exportCvs:"user/export/cvs",exportPdf:"user/export/pdf",import:"user/import",export:"user/data/export"},page:{list:"",view:"view/:id"}}}}]);