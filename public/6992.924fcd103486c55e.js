"use strict";(self.webpackChunkkey=self.webpackChunkkey||[]).push([[6992],{68:(M,A,a)=>{a.d(A,{a:()=>r});const r={api:{create:"account/create",get:"account/with-group/all",getNotParent:"not-parents/accounts",getParent:"parents/accounts",getProfitLossParent:"profit-loss/parent-accounts",getExpensesParent:"account/parent/expenses",getRevenueParent:"account/parent/revenue",getAssetsParent:"account/parent/assets",getById:"account/",update:"account/update/",delete:"account/",exportExample:"account/export/example",exportExampleSub:"account/export/example/sub",export:"account/export/parent",exportPdf:"account/export/pdf",importAccount:"account/import",importAccountSub:"account/import/sub"},page:{}}},6674:(M,A,a)=>{a.r(A),a.d(A,{JournalEntryModule:()=>Ut});var r=a(6814),g=a(8209),t=a(9291),y=a(5861),d=a(1087),f=function(o){return o.list="View Journal Entry",o.create="Create Journal Entry",o.update="Edit Journal Entry",o.delete="Delete Journal Entry",o.exportPdf="Export Journal Entry",o.exportCsv="Export Journal Entry",o.import="View Journal Entry",o}(f||{});const J=o=>{return{cols:[{field:"id",label:"id",class:""},{field:"date",label:"date",class:""},{field:"entry_no",label:"entry_no",class:""},{field:"title",label:"title"},{field:"total_credit",label:"amounts",class:"",format:l=>l.total_credit?l.total_credit:"-"},{field:"type",label:"type",class:"text-center",format:l=>l.type?l.type:"direct",custom_class_cel:l=>"direct"==l.type?"text-non-active":"text-active"},{label:"action",actions:[{id:f.delete,icon:"trash",class:"main-color",fun:(l=(0,y.Z)(function*(e){return yield o.journalService.delete(e,"delete journal")}),function(n){return l.apply(this,arguments)}),classCondition:"d-none",hideBasedOnCondition:!0,condition:l=>0==l.editable},{id:f.update,icon:"pen-to-square",class:"main-color",route:"update"},{id:f.list,icon:"eye",class:"main-color",route:"view"}]}],Request:d.X.api.get,titleRow:"title"};var l};var v=a(6924),T=a(8718),p=a(5946),s=a(5619),m=a(5118),h=a(3999);function P(o,l){if(1&o&&(t.TgZ(0,"li")(1,"a",20),t._UZ(2,"i",21),t._uU(3),t.qZA()()),2&o){const e=l.$implicit;t.xp6(1),t.Q6J("href",null==e?null:e.path,t.LSH),t.xp6(2),t.hij(" ",e.path,"")}}let S=(()=>{class o{constructor(e,n){this.dialogRef=e,this.config=n,this.data=this.config.data.item,console.log(this.data)}closePopup(e){this.dialogRef.close(e)}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(m.E7),t.Y36(m.S))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-view-account"]],decls:42,vars:13,consts:[[1,"main"],[1,"pb-3"],[1,"d-flex","justify-content-between"],[1,"icon"],["src","../assets/Tabs/Icon/Active/purchase -2.png","alt","img"],[3,"click"],[1,"fa-solid","fa-xmark","pointer","fs-1"],[1,"title","pb-2","fs-2"],[1,"d-flex","gap-5"],[1,"mt-3"],["translate","account_name",1,"fs-3","fw-bold"],[1,"px-4","fs-4"],["translate","account_code",1,"fs-3","fw-bold"],["translate","account_type",1,"fs-3","fw-bold"],["translate","credit",1,"fs-3","fw-bold"],["translate","debit",1,"fs-3","fw-bold"],[1,"mt-5"],["translate","description",1,"fs-3","fw-bold"],[1,"invoice_image","mt-4"],[4,"ngFor","ngForOf"],["target","_blank",3,"href"],[1,"fa-solid","fa-square-arrow-up-right","px-2"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"span",3),t._UZ(4,"img",4),t.qZA(),t.TgZ(5,"span",5),t.NdJ("click",function(){return n.closePopup(!1)}),t._UZ(6,"i",6),t.qZA()(),t.TgZ(7,"p",7),t._uU(8),t.ALo(9,"translate"),t.qZA(),t.TgZ(10,"div",8)(11,"div",9),t._UZ(12,"p",10),t.TgZ(13,"span",11),t._uU(14),t.qZA()(),t.TgZ(15,"div",9),t._UZ(16,"p",12),t.TgZ(17,"span",11),t._uU(18),t.qZA()(),t.TgZ(19,"div",9),t._UZ(20,"p",13),t.TgZ(21,"span",11),t._uU(22),t.qZA()()(),t.TgZ(23,"div",8)(24,"div",9),t._UZ(25,"p",14),t.TgZ(26,"span",11),t._uU(27),t.qZA()(),t.TgZ(28,"div",9),t._UZ(29,"p",15),t.TgZ(30,"span",11),t._uU(31),t.qZA()()(),t.TgZ(32,"div",16),t._UZ(33,"p",17),t.TgZ(34,"span",11),t._uU(35),t.qZA()(),t.TgZ(36,"div",18)(37,"h3"),t._uU(38),t.ALo(39,"translate"),t.qZA(),t.TgZ(40,"ul"),t.YNc(41,P,4,2,"li",19),t.qZA()()()()),2&e&&(t.xp6(8),t.Oqu(t.lcZ(9,9,"account_details")),t.xp6(6),t.Oqu(null==n.data?null:n.data.account.name),t.xp6(4),t.Oqu(null==n.data?null:n.data.account.code),t.xp6(4),t.Oqu(null==n.data?null:n.data.account.account_type),t.xp6(5),t.Oqu(null==n.data?null:n.data.credit),t.xp6(4),t.Oqu(null==n.data?null:n.data.debit),t.xp6(4),t.Oqu(null==n.data?null:n.data.description),t.xp6(3),t.Oqu(t.lcZ(39,11,"attachment_list")),t.xp6(3),t.Q6J("ngForOf",n.data.files))},dependencies:[r.sg,h.Pi,h.X$],styles:[".invoice_image[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:16px;font-weight:600;line-height:24px;color:#101828;margin-bottom:30px}.invoice_image[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{font-size:14px;font-weight:400;line-height:24px;color:#00778a;margin-bottom:10px}a[_ngcontent-%COMP%]:focus-visible{outline:-webkit-focus-ring-color auto 0px}"]}),o})();var N=a(1732),k=a(3562),w=a(8763);let b=(()=>{class o{constructor(e,n,i){this.http=e,this.dynamicDialog=n,this.toastr=i,this.latestJournals=new s.X([])}getJournals(e){return this.http.get(d.X.api.get)}create(e){return this.http.post(d.X.api.create,e)}delete(e,n,i){var u=this;return(0,y.Z)(function*(){const C={showHeader:!1,header:"delete",data:{message:"do_you_want_to_delete",acceptLabel:"delete",rejectLabel:"close",data:{...e}},width:"300px",height:"164px"};if(!(yield u.dynamicDialog.confirm(C)))return!1;try{const Z=yield u.http.delete(d.X.api.delete+e.id).toPromise();return u.toastr.success(Z.message),Z}catch(Z){throw u.toastr.error(Z.error.message),Z}})()}openDialog(e){return this.dynamicDialog.showDialogWithComponent({showHeader:!1,header:"add_customer",data:{item:e},width:"500px",height:"auto"},S)}update(e){return this.http.post(d.X.api.update+e.get("id"),e)}updateFiles(e){return this.http.post(d.X.api.updateFiles,e)}getJournalById(e){return this.http.get(d.X.api.getById+e)}exportCsv(e){return this.http.get(e?d.X.api.exportSingleEntryCsv+e+"/export":d.X.api.exportCsv)}exportPdf(){return this.http.get(d.X.api.exportPdf)}openDialogToImport(){}}return o.\u0275fac=function(e){return new(e||o)(t.LFG(N.O),t.LFG(k.U),t.LFG(w._W))},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var V=a(2377),Q=a(991),Y=a(359),X=a(5077),G=a(3826);function z(o,l){if(1&o){const e=t.EpF();t.TgZ(0,"div")(1,"app-import-data",10),t.NdJ("onlCoseSectionImport",function(i){t.CHM(e);const u=t.oxw();return t.KtG(u.closeSectionToImport(i))}),t.qZA()()}if(2&o){const e=t.oxw();t.xp6(1),t.Q6J("endPoint",e.fileConfig.api.import)}}let R=(()=>{class o{constructor(e){this.journalService=e,this.sortConfig=[{optionLabel:"label",optionValue:"field",key:"sort_by",placeholder:"sort_by",data:[{label:"title",field:"title"},{label:"id",field:"id"},{label:"entry_no",field:"entry_no"},{label:"created_at",field:"created_at"},{label:"date",field:"date"},{label:"description",field:"description"}]},{optionLabel:"label",optionValue:"field",key:"sort_type",placeholder:"sort_type",data:[{label:p.q.asc,field:p.q.asc},{label:p.q.desc,field:p.q.desc}]}],this.tableConfig=J(this),this.filtersConfig=[{field:"entry_no",label:"entry_number",type:v.W.TEXT,placeholder:"entry_number"},{field:"date",label:"date",type:v.W.TEXT,placeholder:"date"},{field:"title",label:"title",type:v.W.TEXT,placeholder:"title"},{field:"total_credit",label:"amounts",type:v.W.TEXT,placeholder:"amounts"},{field:"from",label:"from",type:v.W.DATE,placeholder:"from"},{field:"to",label:"to",type:v.W.DATE,placeholder:"to"},{field:"creator_id",label:"creator",type:v.W.SELECT,options:{value:"id",label:"name"},request:T.x.api.get,placeholder:"select"}],this.permissions=f,this.showImportForm=!1,this.fileConfig=d.X}openSectionToImport(){this.showImportForm=!0}closeSectionToImport(e){e?(this.showImportForm=!1,this.tableConfig=J(this)):this.showImportForm=!1}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(b))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-list-journal"]],decls:11,vars:7,consts:[[4,"ngIf"],[1,"d-flex","flex-row","align-items-center","justify-content-between"],[3,"SortConfig"],["sort",""],[3,"config"],["filter",""],[1,"table"],[3,"tableConfig","pagination","filter","sort"],[1,"d-flex","align-items-center","justify-content-center"],["pagination",""],[3,"endPoint","onlCoseSectionImport"]],template:function(e,n){if(1&e&&(t.YNc(0,z,2,1,"div",0),t.TgZ(1,"div",1),t._UZ(2,"ukt-sort",2,3)(4,"ukt-filter",4,5),t.qZA(),t.TgZ(6,"div",6),t._UZ(7,"app-table",7),t.qZA(),t.TgZ(8,"div",8),t._UZ(9,"ukt-pagination",null,9),t.qZA()),2&e){const i=t.MAs(3),u=t.MAs(5),C=t.MAs(10);t.Q6J("ngIf",n.showImportForm),t.xp6(2),t.Q6J("SortConfig",n.sortConfig),t.xp6(2),t.Q6J("config",n.filtersConfig),t.xp6(3),t.Q6J("tableConfig",n.tableConfig)("pagination",C)("filter",u)("sort",i)}},dependencies:[r.O5,V.a,Q.M,Y.Q,X.z,G.x],styles:["[_nghost-%COMP%]   .main[_ngcontent-%COMP%]{background-color:var(--white);padding:2rem 2.8rem!important}[_nghost-%COMP%]   .main[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .dropdown[_ngcontent-%COMP%]{background-color:transparent!important}[_nghost-%COMP%]   .main[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .dropdown[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:5px 0;width:85px}[_nghost-%COMP%]   .main[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .dropdown[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{font-size:1.5rem}[_nghost-%COMP%]   .main[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .import[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:1.5rem}[_nghost-%COMP%]   .main[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .import[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{font-size:1.5rem;height:30px}[_nghost-%COMP%]   .main[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .import[_ngcontent-%COMP%]   .error[_ngcontent-%COMP%]{color:var(--red);font-size:1.4rem}"]}),o})();var I=a(5219),B=a(8275),q=a(4779);function W(o,l){if(1&o){const e=t.EpF();t.TgZ(0,"app-button",5),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.export("csv"))}),t.qZA()}2&o&&(t.Tol("btn-filter"),t.Q6J("text","export"))}function $(o,l){if(1&o&&t._UZ(0,"app-button",6),2&o){const e=t.oxw();t.Tol("btn-filter"),t.Q6J("text","new")("icon",e.icon.PLUS)("iconPos","left")}}const F=function(o){return[o]};let K=(()=>{class o{constructor(e,n){this.journalService=e,this.toastr=n,this.permissions=f,this.icon=I.dv}export(e){"csv"==e?this.journalService.exportCsv().subscribe(n=>{window.open(n.file_path)}):this.journalService.exportPdf().subscribe(n=>{this.toastr.error(n.message)})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(b),t.Y36(w._W))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-header-journal"]],decls:8,vars:11,consts:[[1,"d-flex","justify-content-between","align-items-center"],[1,"title"],[1,"d-flex","align-items-center","gap-3"],[3,"text","class","click",4,"hasPermissions"],["routerLink","/key/accounting/journal-entry/new",3,"text","class","icon","iconPos",4,"hasPermissions"],[3,"text","click"],["routerLink","/key/accounting/journal-entry/new",3,"text","icon","iconPos"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"h5",1),t._uU(2),t.ALo(3,"titlecase"),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"div",2),t.YNc(6,W,1,3,"app-button",3),t.YNc(7,$,1,5,"app-button",4),t.qZA()()),2&e&&(t.xp6(2),t.Oqu(t.lcZ(3,3,t.lcZ(4,5,"list_of_journal_entries"))),t.xp6(4),t.Q6J("hasPermissions",t.VKq(7,F,n.permissions.exportCsv)),t.xp6(1),t.Q6J("hasPermissions",t.VKq(9,F,n.permissions.create)))},dependencies:[g.rH,B.z,q.r,r.rS,h.X$],styles:["[_nghost-%COMP%]   .dropdown[_ngcontent-%COMP%]{background-color:transparent!important}[_nghost-%COMP%]   .dropdown[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:5px 0;width:85px}[_nghost-%COMP%]   .dropdown[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{font-size:1.5rem}[_nghost-%COMP%]   .import[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:1.5rem}[_nghost-%COMP%]   .import[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{font-size:1.5rem;height:30px}[_nghost-%COMP%]   .import[_ngcontent-%COMP%]   .error[_ngcontent-%COMP%]{color:var(--red);font-size:1.4rem}"]}),o})(),H=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-journal-entry"]],decls:3,vars:0,consts:[[1,"page-card"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0),t._UZ(1,"app-header-journal")(2,"app-list-journal"),t.qZA())},dependencies:[R,K]}),o})();var x=a(6223),E=a(8645),U=a(9773),tt=a(68),et=a(5566),nt=a(8614),ot=a(1904),at=a(3838),rt=a(6098),lt=a(5253),it=a(4896),ct=a(1771);function st(o,l){if(1&o&&(t.TgZ(0,"div",6),t._UZ(1,"app-button",36),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.Q6J("text","update_attachment")("iconPos","left")("icon","fa-solid fa-check")("routerLink","/key/accounting/journal-entry/update-attachment/"+e.activeId)}}function ut(o,l){if(1&o&&(t.TgZ(0,"p"),t._uU(1),t.qZA()),2&o){const e=l.$implicit;t.xp6(1),t.hij(" ",e.value," ")}}function pt(o,l){if(1&o&&(t.TgZ(0,"div",37),t.YNc(1,ut,2,1,"p",38),t.ALo(2,"keyvalue"),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",t.lcZ(2,1,e.errors))}}function dt(o,l){if(1&o){const e=t.EpF();t.TgZ(0,"div",15)(1,"app-file-upload",39),t.NdJ("onValueChange",function(i){t.CHM(e);const u=t.oxw();return t.KtG(u.onFileSelected(i))}),t.qZA()()}}function mt(o,l){if(1&o&&t._UZ(0,"app-text",42),2&o){const e=t.oxw().$implicit;t.Q6J("readOnly",!0)("value",(null==e.value.files?null:e.value.files.length)+"files")("text","")("placeholder","")}}function gt(o,l){if(1&o){const e=t.EpF();t.TgZ(0,"td",32)(1,"i",45),t.NdJ("click",function(){t.CHM(e);const i=t.oxw().index,u=t.oxw();return t.KtG(u.deleteAccountFromJournalEntry(i))}),t.qZA(),t.TgZ(2,"i",46),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(),u=i.$implicit,C=i.index,O=t.oxw();return t.KtG(O.fillDataToUpdateAccountOnJournalEntry(u.value,C))}),t.qZA()()}}function _t(o,l){if(1&o&&(t.TgZ(0,"tr",40)(1,"td"),t._UZ(2,"app-text",41),t.qZA(),t.TgZ(3,"td"),t._UZ(4,"app-text",42),t.qZA(),t.TgZ(5,"td"),t._UZ(6,"app-text",42),t.qZA(),t.TgZ(7,"td"),t.YNc(8,mt,1,4,"app-text",43),t.qZA(),t.TgZ(9,"td"),t._UZ(10,"app-text",42),t.qZA(),t.TgZ(11,"td"),t._UZ(12,"app-text",42),t.qZA(),t.TgZ(13,"td"),t._UZ(14,"app-text",42),t.qZA(),t.YNc(15,gt,3,0,"td",44),t.qZA()),2&o){const e=l.$implicit;t.xp6(2),t.Q6J("readOnly",!0)("value",e.value.account_name),t.xp6(2),t.Q6J("readOnly",!0)("value",e.value.debit)("text","")("placeholder",""),t.xp6(2),t.Q6J("readOnly",!0)("value",e.value.credit)("text","")("placeholder",""),t.xp6(2),t.Q6J("ngIf",!e.value.saved),t.xp6(2),t.Q6J("readOnly",!0)("value",e.value.currency_name)("text","")("placeholder",""),t.xp6(2),t.Q6J("readOnly",!0)("value",e.value.currency_rate)("text","")("placeholder",""),t.xp6(2),t.Q6J("readOnly",!0)("value",e.value.description)("text","")("placeholder",""),t.xp6(1),t.Q6J("ngIf",!e.value.saved)}}const ht=function(){return{type:"name",length:3}};let L=(()=>{class o{constructor(e,n,i,u,C,O,Z){this.http=e,this.fb=n,this.router=i,this.route=u,this.journalService=C,this.toastr=O,this.translateService=Z,this.accountsConfig=tt.a,this.currencyConfig=et.w,this.permissions=f,this.showImportForm=!1,this.isLoading=!1,this.importError=[],this.accounts=[],this.currencies=[],this.unsubscribe=new E.x,this.formGroup=this.initForm(),this.title="add_new_journal_entry",this.actionJournal="create",this.creditAccountsValue=0,this.debitAccountsValue=0,this.accountAction="create",this.savedAccounts=[],this.index=0,this.messageError="",this.values=new FormData,this.fileName="",this.clearInput=!1,this.maxDate=new Date}ngOnInit(){this.route.snapshot.paramMap.get("id")&&(this.activeId=this.route.snapshot.paramMap.get("id"),this.title="update_journal_entry",this.actionJournal="update",this.route.data.pipe((0,U.R)(this.unsubscribe)).subscribe({next:e=>{this.data=e,this.fillForm(this.data.journal.data)},error:e=>{}})),this.http.getWithParam(this.accountsConfig.api.getNotParent,{limit:"all"}).subscribe({next:e=>{this.accounts=e.data},error:e=>{this.accounts=[]}}),this.http.getWithParam(this.currencyConfig.api.get,{limit:"all"}).subscribe({next:e=>{this.currencies=e.data},error:e=>{this.currencies=[]}})}initForm(){return this.fb.group({id:[Number],title:["",[x.kI.required]],date:[(new Date).toLocaleDateString("en-CA"),[x.kI.required]],invoice_image:[""],description:[""],details:this.fb.array([]),account:this.fb.group({id:[Number],credit:[0],debit:[0],account_id:[""],description:[""],account_type:[""],account_name:[""],files:this.fb.array([]),currency_id:[""],currency_name:[""],currency_rate:[""],change_currency:[""],saved:[0]})})}get accountsAtJournal(){return this.formGroup.get("details")}get accountAtJournal(){return this.formGroup.get("account")}get files(){return this.accountAtJournal?.get("files")}onSubmit(){new FormData,this.formGroup.invalid?this.formGroup.markAllAsTouched():this.accountsAtJournal.length>=2?this.debitAccountsValue==this.creditAccountsValue&&0!=this.creditAccountsValue?(this.convertFormGroupToFormData(),"create"==this.actionJournal?this.journalService.create(this.values).subscribe(n=>{this.toastr.success(n.message),this.errors=null,this.clearAllForm(),this.router.navigate(["/key/accounting/journal-entry"])},n=>{this.errors=n.error.errors,this.toastr.error(n.error.message)}):this.journalService.update(this.values).subscribe(n=>{this.toastr.success(n.message),this.errors=null,this.clearAllForm(),this.router.navigate(["/key/accounting/journal-entry"])},n=>{this.errors=n.error.errors})):this.toastr.error(this.translateService.instant("credit_amount_and_debit_amount_must_be_equal_and_more_than_zero")):this.toastr.error(this.translateService.instant("accounts_at_journal_must_be_at_least_2_account"))}convertFormGroupToFormData(){this.values.set("id",this.formGroup.get("id")?.value),this.values.set("title",this.formGroup.get("title")?.value),this.values.set("date",this.formGroup.get("date")?.value),this.values.set("description",this.formGroup.get("description")?.value);let e=this.formGroup.get("details");for(let n=0;n<e.length;n++){const i=e.at(n);let u=null;i.get("id")?.value&&(u=i.get("id")?.value);const C=i.get("currency_rate")?.value;let O="";i.get("currency_id")?.value&&(O=i.get("currency_id")?.value);const Z=i.get("credit")?.value,Dt=i.get("debit")?.value,Nt=i.get("account_id")?.value,It=i.get("description")?.value,j=i.get("files")?.value,Ft=i.get("saved")?.value;this.values.set(`details[${n}][id]`,u),this.values.set(`details[${n}][credit]`,Z),this.values.set(`details[${n}][debit]`,Dt),this.values.set(`details[${n}][account_id]`,Nt),this.values.set(`details[${n}][description]`,It),this.values.set(`details[${n}][currency_rate]`,C),this.values.set(`details[${n}][saved]`,Ft),this.values.set(`details[${n}][currency_id]`,O),j&&Object.entries(j).forEach(([Lt,jt])=>{this.values.set(`details[${n}][files][${Lt}]`,jt)})}}getAccountType(e){this.account=this.accounts.filter(n=>n.id==e.value)[0],this.formGroup.get("account")?.patchValue({account_name:this.account?.name,account_type:this.account?.account_type,change_currency:this.account?.change_currency,currency_rate:"",currency_id:"",account_id:e.value})}getSelectedCurrency(e){this.currency=this.currencies.filter(n=>n.id==e.value)[0],this.formGroup.get("account")?.patchValue({currency_name:this.currency?.name,currency_rate:this.currency?.price,currency_Id:e.value})}deleteAccountFromJournalEntry(e){this.accountsAtJournal.controls.forEach((n,i)=>{i==e&&(this.debitAccountsValue-=parseInt(n.value.debit),this.creditAccountsValue-=parseInt(n.value.credit))}),this.accountsAtJournal.removeAt(e)}addAccountToJournalEntry(){"update"==this.accountAction&&this.deleteAccountFromJournalEntry(this.index);this.accountAtJournal?.value.account_id&&""!=this.accountAtJournal?.value.account_id?(this.accountsAtJournal.controls.map(n=>n.value.account_id),console.log(this.accountAtJournal?.value.files),this.accountsAtJournal.push(this.fb.group({id:this.accountAtJournal?.value.id,credit:this.accountAtJournal?.value.credit,debit:this.accountAtJournal?.value.debit,account_id:this.accountAtJournal?.value.account_id,description:this.accountAtJournal?.value.description,account_type:this.accountAtJournal?.value.account_type,account_name:this.accountAtJournal?.value.account_name,files:this.fb.control(this.accountAtJournal?.value.files),currency_id:this.accountAtJournal?.value.currency_id,currency_name:this.accountAtJournal?.value.currency_name,currency_rate:this.accountAtJournal?.value.currency_rate,change_currency:this.accountAtJournal?.value.change_currency,saved:this.accountAtJournal?.value.saved})),this.clearAccountForm()):this.toastr.error(this.translateService.instant("select_account")),this.calcTotal()}calcTotal(){this.debitAccountsValue=0,this.creditAccountsValue=0,this.accountsAtJournal.controls.forEach(e=>{this.debitAccountsValue+=parseFloat(e.value.debit),this.creditAccountsValue+=parseFloat(e.value.credit)})}fillForm(e){this.formGroup.patchValue({title:e.title,id:e.id,entry_no:e.entry_no,date:e.date,description:e.description,details:e.details}),e.details.forEach(n=>{this.accountsAtJournal.push(this.fb.group({id:n.id,account_id:n.account_id,account_name:n.account.name,account_type:n?.account?.account_type,currency_id:n?.currency_id,currency_rate:n?.currency_rate,currency_name:n?.currency_name,change_currency:n?.account?.change_currency,files:n?.files,description:n?.description,credit:n.credit,debit:n.debit,saved:n.saved}))}),this.creditAccountsValue=e.total_credit,this.debitAccountsValue=e.total_debit}fillDataToUpdateAccountOnJournalEntry(e,n){this.clearInput=!1,this.index=n,this.accountAction="update",this.formGroup.get("account")?.patchValue({id:e.id,credit:e.credit,debit:e.debit,account_id:e.account_id,account_name:e.account_name,account_type:e.account_type,description:e.description,currency_name:e.currency_name,currency_rate:e.currency_rate,change_currency:e.change_currency,currency_id:e.currency_id,saved:e.saved})}clearAccountForm(){this.clearInput=!0,this.accountAction="create",this.files.clear(),this.accountAtJournal?.patchValue({currency_id:[""],credit:[0],debit:[0],account_id:[""],description:[""],account_type:[0],account_name:[""],currency_name:[""],currency_rate:[""]})}clearAllForm(){for(;0!==this.accountsAtJournal.length;)this.accountsAtJournal.removeAt(0);this.formGroup.reset(),this.creditAccountsValue=0,this.debitAccountsValue=0;for(const[e,n]of this.values)this.values.delete(e)}onFileSelected(e){if(e.target.files[0]){for(const[n,i]of Object.entries(e.target.files))this.values.set(`invoice_image[${n}]`,e.target.files[n]);this.fileName=e.target.files[0].name}}onFileSelectedDetails(e){if(this.files.clear(),e.target.files[0]){for(const[n,i]of Object.entries(e.target.files))this.files?.push(this.fb.control(e.target.files[n]));this.fileName=e.target.files[0].name,this.clearInput=!1}}ngOnDestroy(){this.unsubscribe.next(!0),this.unsubscribe.complete()}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(N.O),t.Y36(x.qu),t.Y36(g.F0),t.Y36(g.gz),t.Y36(b),t.Y36(w._W),t.Y36(h.sK))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-new-journal"]],decls:88,vars:94,consts:[[1,"container-sm","main","rounded"],[1,"header","row","justify-content-between","align-items-center"],["routerLink","/key/accounting/journal-entry",1,"title","pointer","col-md-6"],[1,"fa-solid","fa-arrow-left","me-2"],[1,"d-flex","align-items-center","justify-content-end","g-2","col-md-6"],["class","px-1",4,"ngIf"],[1,"px-1"],["routerLink","/key/accounting/journal-entry",1,"btn-cancel",3,"iconPos","icon","text"],[1,"btn-filter",3,"text","iconPos","icon","click"],["class","alert alert-danger text-center fs-5",4,"ngIf"],[3,"formGroup","onSubmit"],[1,"mb-2"],["ngDefaultControl","","formControlName","title",3,"patternMessage","text","placeholder"],[1,"row"],["class","col-md-6 mb-2",4,"ngIf"],[1,"col-md-6","mb-2"],["ngDefaultControl","","formControlName","date",3,"maxDate","text"],[1,"col-md-12","mb-2"],["ngDefaultControl","","formControlName","description",3,"text","placeholder"],[1,"table-responsive"],[1,"table"],[1,"table-head"],["scope","col"],["formArrayName","details",4,"ngFor","ngForOf"],["formGroupName","account"],["formControlName","account_id","placeholder","select",3,"readOnly","optionLabel","data","optionValue","filter","keydown.enter","onDropDownChange"],["formControlName","debit",3,"mode","maxFractionDigits","minFractionDigits","showButtons","readOnly","text","placeholder","keydown.enter"],["formControlName","credit",3,"mode","maxFractionDigits","minFractionDigits","showButtons","readOnly","text","placeholder","keydown.enter"],["label","","placeholder","select",3,"clear","onValueChange"],["formControlName","currency_id","placeholder","select",3,"readOnly","request","optionLabel","optionValue","showClear","keydown.enter","onDropDownChange"],["formControlName","currency_rate",3,"showButtons","readOnly","text","placeholder","keydown.enter"],["formControlName","description",3,"readOnly","text","placeholder","keydown.enter"],[1,"action"],[1,"fa-solid","fa-plus","fs-4","main-color","pointer",3,"click"],[1,"fa-solid","fa-cancel","fs-4","text-danger","mx-2","pointer",3,"click"],[1,"total"],[1,"btn-cancel",3,"text","iconPos","icon","routerLink"],[1,"alert","alert-danger","text-center","fs-5"],[4,"ngFor","ngForOf"],["label","file",3,"onValueChange"],["formArrayName","details"],[3,"readOnly","value"],[3,"readOnly","value","text","placeholder"],[3,"readOnly","value","text","placeholder",4,"ngIf"],["class","action",4,"ngIf"],[1,"fa-solid","fa-trash","fs-4","text-danger","mx-2","pointer",3,"click"],[1,"fa-solid","fa-pen-to-square","fs-4","main-color","mx-2","pointer",3,"click"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"h5",2),t._UZ(3,"i",3),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"div",4),t.YNc(7,st,2,4,"div",5),t.TgZ(8,"div",6),t._UZ(9,"app-button",7),t.qZA(),t.TgZ(10,"div",6)(11,"app-button",8),t.NdJ("click",function(){return n.onSubmit()}),t.qZA()()()(),t.YNc(12,pt,3,3,"div",9),t.TgZ(13,"app-form",10),t.NdJ("onSubmit",function(){return n.onSubmit()}),t.TgZ(14,"div",11),t._UZ(15,"app-text",12),t.qZA(),t.TgZ(16,"div",13),t.YNc(17,dt,2,0,"div",14),t.TgZ(18,"div",15),t._UZ(19,"app-date",16),t.qZA(),t.TgZ(20,"div",17),t._UZ(21,"app-textarea",18),t.qZA()(),t.TgZ(22,"div",19)(23,"table",20)(24,"thead",21)(25,"tr")(26,"th",22),t._uU(27),t.ALo(28,"translate"),t.qZA(),t.TgZ(29,"th",22),t._uU(30),t.ALo(31,"translate"),t.qZA(),t.TgZ(32,"th",22),t._uU(33),t.ALo(34,"translate"),t.qZA(),t.TgZ(35,"th",22),t._uU(36),t.ALo(37,"translate"),t.qZA(),t.TgZ(38,"th",22),t._uU(39),t.ALo(40,"translate"),t.qZA(),t.TgZ(41,"th",22),t._uU(42),t.ALo(43,"translate"),t.qZA(),t.TgZ(44,"th",22),t._uU(45),t.ALo(46,"translate"),t.qZA(),t.TgZ(47,"th",22),t._uU(48),t.ALo(49,"translate"),t.qZA()()(),t.TgZ(50,"tbody"),t.YNc(51,_t,16,24,"tr",23),t.TgZ(52,"tr",24)(53,"td")(54,"app-dropdown",25),t.NdJ("keydown.enter",function(){return n.addAccountToJournalEntry()})("onDropDownChange",function(u){return n.getAccountType(u)}),t.qZA()(),t.TgZ(55,"td")(56,"app-number-input",26),t.NdJ("keydown.enter",function(){return n.addAccountToJournalEntry()}),t.qZA()(),t.TgZ(57,"td")(58,"app-number-input",27),t.NdJ("keydown.enter",function(){return n.addAccountToJournalEntry()}),t.qZA()(),t.TgZ(59,"td")(60,"app-file-upload",28),t.NdJ("onValueChange",function(u){return n.onFileSelectedDetails(u)}),t.qZA()(),t.TgZ(61,"td")(62,"app-dropdown",29),t.NdJ("keydown.enter",function(){return n.addAccountToJournalEntry()})("onDropDownChange",function(u){return n.getSelectedCurrency(u)}),t.qZA()(),t.TgZ(63,"td")(64,"app-number-input",30),t.NdJ("keydown.enter",function(){return n.addAccountToJournalEntry()}),t.qZA()(),t.TgZ(65,"td")(66,"app-text",31),t.NdJ("keydown.enter",function(){return n.addAccountToJournalEntry()}),t.qZA()(),t.TgZ(67,"td",32)(68,"i",33),t.NdJ("click",function(){return n.addAccountToJournalEntry()}),t.qZA(),t.TgZ(69,"i",34),t.NdJ("click",function(){return n.clearAccountForm()}),t.qZA()()(),t.TgZ(70,"tr")(71,"th",35),t._uU(72),t.ALo(73,"translate"),t.qZA(),t.TgZ(74,"th",35),t._uU(75),t.qZA(),t.TgZ(76,"th",35),t._uU(77),t.qZA(),t.TgZ(78,"th",35),t._uU(79),t.qZA(),t.TgZ(80,"th",35),t._uU(81),t.qZA(),t.TgZ(82,"th",35),t._uU(83),t.qZA(),t.TgZ(84,"th",35),t._uU(85),t.qZA(),t.TgZ(86,"th",35),t._uU(87),t.qZA()()()()()()()),2&e&&(t.xp6(4),t.hij("",t.lcZ(5,73,n.title)," "),t.xp6(3),t.Q6J("ngIf","update_journal_entry"==n.title),t.xp6(2),t.Q6J("iconPos","left")("icon","fa-solid fa-ban")("text","cancel"),t.xp6(2),t.Q6J("text","save")("iconPos","left")("icon","fa-solid fa-check"),t.xp6(1),t.Q6J("ngIf",n.errors),t.xp6(1),t.Q6J("formGroup",n.formGroup),t.xp6(2),t.Tol("d-flex flex-column justify-content-between "),t.Q6J("patternMessage",t.DdM(93,ht))("text","title")("placeholder",""),t.xp6(2),t.Q6J("ngIf","add_new_journal_entry"==n.title),t.xp6(2),t.Tol("d-flex flex-column justify-content-between "),t.Q6J("maxDate",n.maxDate)("text","date"),t.xp6(2),t.Tol("d-flex flex-column justify-content-between "),t.Q6J("text","description")("placeholder",""),t.xp6(6),t.Oqu(t.lcZ(28,75,"accounts")),t.xp6(3),t.Oqu(t.lcZ(31,77,"de_amount")),t.xp6(3),t.Oqu(t.lcZ(34,79,"cr_amount")),t.xp6(3),t.Oqu(t.lcZ(37,81,"files")),t.xp6(3),t.Oqu(t.lcZ(40,83,"currency")),t.xp6(3),t.Oqu(t.lcZ(43,85,"currency_rate")),t.xp6(3),t.Oqu(t.lcZ(46,87,"description")),t.xp6(3),t.Oqu(t.lcZ(49,89,"actions")),t.xp6(3),t.Q6J("ngForOf",n.accountsAtJournal.controls),t.xp6(3),t.Q6J("readOnly","update"==n.accountAction)("optionLabel","name_code")("data",n.accounts)("optionValue","id")("filter",!0),t.xp6(2),t.Q6J("mode","decimal")("maxFractionDigits",3)("minFractionDigits",2)("showButtons",!1)("readOnly","debit"==(null==n.accountAtJournal||null==n.accountAtJournal.value?null:n.accountAtJournal.value.account_type)||""==(null==n.accountAtJournal||null==n.accountAtJournal.value?null:n.accountAtJournal.value.account_id)||null==(null==n.accountAtJournal||null==n.accountAtJournal.value?null:n.accountAtJournal.value.account_id)||(null==n.accountAtJournal||null==n.accountAtJournal.value?null:n.accountAtJournal.value.credit)>0)("text","")("placeholder",""),t.xp6(2),t.Q6J("mode","decimal")("maxFractionDigits",3)("minFractionDigits",2)("showButtons",!1)("readOnly","credit"==(null==n.accountAtJournal||null==n.accountAtJournal.value?null:n.accountAtJournal.value.account_type)||""==(null==n.accountAtJournal||null==n.accountAtJournal.value?null:n.accountAtJournal.value.account_id)||null==(null==n.accountAtJournal||null==n.accountAtJournal.value?null:n.accountAtJournal.value.account_id)||(null==n.accountAtJournal||null==n.accountAtJournal.value?null:n.accountAtJournal.value.debit)>0)("text","")("placeholder",""),t.xp6(2),t.Q6J("clear",n.clearInput),t.xp6(2),t.Q6J("readOnly",""==(null==n.accountAtJournal||null==n.accountAtJournal.value?null:n.accountAtJournal.value.account_id)||null==(null==n.accountAtJournal||null==n.accountAtJournal.value?null:n.accountAtJournal.value.account_id)||0==(null==n.accountAtJournal||null==n.accountAtJournal.value?null:n.accountAtJournal.value.change_currency))("request",n.currencyConfig.api.get)("optionLabel","name")("optionValue","id")("showClear",!0),t.xp6(2),t.Q6J("showButtons",!1)("readOnly",null==(null==n.accountAtJournal||null==n.accountAtJournal.value?null:n.accountAtJournal.value.currency_id)||""==(null==n.accountAtJournal||null==n.accountAtJournal.value?null:n.accountAtJournal.value.currency_id))("text","")("placeholder",""),t.xp6(2),t.Q6J("readOnly",""==(null==n.accountAtJournal||null==n.accountAtJournal.value?null:n.accountAtJournal.value.account_id)||null==(null==n.accountAtJournal||null==n.accountAtJournal.value?null:n.accountAtJournal.value.account_id))("text","")("placeholder",""),t.xp6(6),t.Oqu(t.lcZ(73,91,"total")),t.xp6(3),t.Oqu(n.debitAccountsValue),t.xp6(2),t.Oqu(n.creditAccountsValue),t.xp6(2),t.Oqu(""),t.xp6(2),t.Oqu(""),t.xp6(2),t.Oqu(""),t.xp6(2),t.Oqu(""),t.xp6(2),t.Oqu(""))},dependencies:[r.sg,r.O5,g.rH,nt.T,ot.D,at.J,rt.I,lt.R,it.Y,ct.U,x.Fj,x.JJ,x.JL,x.sg,x.u,x.x0,x.CE,q.r,r.Nd,h.X$],styles:["[_nghost-%COMP%]   .main[_ngcontent-%COMP%]{background-color:var(--white);padding:2rem 2.8rem!important}[_nghost-%COMP%]   .main[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .import[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:1.5rem}[_nghost-%COMP%]   .main[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .import[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{font-size:1.5rem;height:30px}[_nghost-%COMP%]   .main[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .import[_ngcontent-%COMP%]   .error[_ngcontent-%COMP%]{color:var(--red);font-size:1.4rem}[_nghost-%COMP%]   .main[_ngcontent-%COMP%]   app-form[_ngcontent-%COMP%]   .entry-no[_ngcontent-%COMP%]{padding-right:1.5rem}[_nghost-%COMP%]   .main[_ngcontent-%COMP%]   app-form[_ngcontent-%COMP%]   .date[_ngcontent-%COMP%]{padding-left:1.5rem}[_nghost-%COMP%]   .main[_ngcontent-%COMP%]   app-form[_ngcontent-%COMP%]   .table-responsive[_ngcontent-%COMP%]{margin-top:3rem;margin-bottom:5rem}[_nghost-%COMP%]   .main[_ngcontent-%COMP%]   app-form[_ngcontent-%COMP%]   .table-responsive[_ngcontent-%COMP%]   .action[_ngcontent-%COMP%]{display:flex;padding:17px 5px;border:none}[_nghost-%COMP%]   .main[_ngcontent-%COMP%]   app-form[_ngcontent-%COMP%]   .table-responsive[_ngcontent-%COMP%]   .total[_ngcontent-%COMP%]{background-color:var(--mainColor)!important;color:var(--white);font-size:14px;padding:10px}"]}),o})();function ft(o,l){if(1&o){const e=t.EpF();t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.qZA(),t.TgZ(11,"td")(12,"i",16),t.NdJ("click",function(){const u=t.CHM(e).$implicit,C=t.oxw();return t.KtG(C.openDialog(u))}),t.qZA()()()}if(2&o){const e=l.$implicit;t.xp6(2),t.Oqu(null==e||null==e.account?null:e.account.name),t.xp6(2),t.Oqu(null==e||null==e.account?null:e.account.code),t.xp6(2),t.Oqu(e.debit),t.xp6(2),t.Oqu(e.credit),t.xp6(2),t.Oqu(e.description)}}function vt(o,l){if(1&o&&(t.TgZ(0,"li")(1,"a",17),t._UZ(2,"i",18),t._uU(3),t.qZA()()),2&o){const e=l.$implicit;t.xp6(1),t.Q6J("href",null==e?null:e.url,t.LSH),t.xp6(2),t.hij(" ",e.url,"")}}let Ct=(()=>{class o{constructor(e,n,i){this.journalService=e,this.route=n,this.toastr=i,this.icon=I.dv,this.unsubscribe=new E.x}ngOnInit(){this.route.data.pipe((0,U.R)(this.unsubscribe)).subscribe({next:e=>{this.data=e.journal.data},error:e=>{}})}export(){this.route.paramMap.subscribe(e=>{this.journalService.exportCsv(e.params.id).subscribe({next:n=>{window.open(n.file_path)},error:n=>{this.toastr.error(n.message)}})})}ngOnDestroy(){this.unsubscribe.next(!0),this.unsubscribe.complete()}openDialog(e){var n=this;return(0,y.Z)(function*(){yield n.journalService.openDialog(e)})()}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(b),t.Y36(g.gz),t.Y36(w._W))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-view-journal"]],decls:72,vars:55,consts:[[1,"page-card"],[1,"title","d-flex","align-items-center"],["routerLink","/key/accounting/journal-entry",1,"fa-solid","fa-arrow-left","me-2","pointer"],[1,"d-flex","justify-content-end","align-items-center","g-2"],[1,"mx-2"],[3,"iconPos","icon","text","click"],[1,"sup-title"],[1,""],[1,"d-flex","justify-content-between","align-items-center"],[1,"table-responsive"],[1,"table"],["scope","col"],["translate","actions","scope","col"],[4,"ngFor","ngForOf"],[1,"total"],[1,"invoice_image"],[1,"fa-solid","fa-eye","show",3,"click"],["target","_blank",3,"href"],[1,"fa-solid","fa-square-arrow-up-right","px-2"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"p",1),t._UZ(2,"i",2),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"div",3)(6,"p",4)(7,"app-button",5),t.NdJ("click",function(){return n.export()}),t.qZA()()(),t.TgZ(8,"div")(9,"p",6),t._uU(10),t.qZA(),t.TgZ(11,"p",7),t._uU(12),t.qZA()(),t.TgZ(13,"div",8)(14,"div",7)(15,"p",7),t._uU(16),t.ALo(17,"translate"),t.qZA()(),t.TgZ(18,"div",7)(19,"p",7),t._uU(20),t.ALo(21,"translate"),t.qZA(),t.TgZ(22,"p",7),t._uU(23),t.ALo(24,"translate"),t.qZA(),t.TgZ(25,"p",7),t._uU(26),t.ALo(27,"translate"),t.qZA()()(),t.TgZ(28,"div",9)(29,"table",10)(30,"thead")(31,"tr")(32,"th",11),t._uU(33),t.ALo(34,"translate"),t.qZA(),t.TgZ(35,"th",11),t._uU(36),t.ALo(37,"translate"),t.qZA(),t.TgZ(38,"th",11),t._uU(39),t.ALo(40,"translate"),t.qZA(),t.TgZ(41,"th",11),t._uU(42),t.ALo(43,"translate"),t.qZA(),t.TgZ(44,"th",11),t._uU(45),t.ALo(46,"translate"),t.qZA(),t._UZ(47,"th",12),t.qZA()(),t.TgZ(48,"tbody"),t.YNc(49,ft,13,5,"tr",13),t.TgZ(50,"tr")(51,"th",14),t._uU(52),t.ALo(53,"translate"),t.qZA(),t.TgZ(54,"th",14),t._uU(55),t.qZA(),t.TgZ(56,"th",14),t._uU(57),t.qZA(),t.TgZ(58,"th",14),t._uU(59),t.qZA(),t.TgZ(60,"th",14),t._uU(61),t.qZA(),t.TgZ(62,"th",14),t._uU(63),t.qZA(),t.TgZ(64,"th",14),t._uU(65),t.qZA()()()()(),t.TgZ(66,"div",15)(67,"h3"),t._uU(68),t.ALo(69,"translate"),t.qZA(),t.TgZ(70,"ul"),t.YNc(71,vt,4,2,"li",13),t.qZA()()()),2&e&&(t.xp6(3),t.hij(" ",t.lcZ(4,31,"journal_entry")," "),t.xp6(4),t.Tol("btn-filter "),t.Q6J("iconPos","left")("icon",n.icon.FILE_EXPORT)("text","export"),t.xp6(3),t.Oqu(n.data.title),t.xp6(2),t.Oqu(n.data.description),t.xp6(4),t.AsE("",t.lcZ(17,33,"created_by")," :",null==n.data||null==n.data.creator?null:n.data.creator.name,""),t.xp6(4),t.AsE("",t.lcZ(21,35,"entry_no")," : ",n.data.entry_no,""),t.xp6(3),t.AsE("",t.lcZ(24,37,"date"),": ",n.data.date,""),t.xp6(3),t.AsE("",t.lcZ(27,39,"last_edited")," :",n.data.updated_at,""),t.xp6(7),t.Oqu(t.lcZ(34,41,"accounts")),t.xp6(3),t.Oqu(t.lcZ(37,43,"code")),t.xp6(3),t.Oqu(t.lcZ(40,45,"de_amount")),t.xp6(3),t.Oqu(t.lcZ(43,47,"cr_amount")),t.xp6(3),t.Oqu(t.lcZ(46,49,"description")),t.xp6(4),t.Q6J("ngForOf",null==n.data?null:n.data.details),t.xp6(3),t.Oqu(t.lcZ(53,51,"total")),t.xp6(3),t.Oqu(""),t.xp6(2),t.Oqu(n.data.total_debit),t.xp6(2),t.Oqu(n.data.total_credit),t.xp6(2),t.Oqu(""),t.xp6(2),t.Oqu(""),t.xp6(2),t.Oqu(""),t.xp6(3),t.Oqu(t.lcZ(69,53,"attachment_list")),t.xp6(3),t.Q6J("ngForOf",n.data.invoice_image))},dependencies:[r.sg,g.rH,h.Pi,q.r,h.X$],styles:["[_nghost-%COMP%]{font-size:1.6rem}[_nghost-%COMP%]   .table-responsive[_ngcontent-%COMP%]{margin-top:3rem;margin-bottom:5rem}[_nghost-%COMP%]   .table-responsive[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{min-width:200px}[_nghost-%COMP%]   .table-responsive[_ngcontent-%COMP%]   .show[_ngcontent-%COMP%]{cursor:pointer}[_nghost-%COMP%]   .table-responsive[_ngcontent-%COMP%]   .total[_ngcontent-%COMP%]{background-color:var(--mainColor)!important;color:var(--white);font-size:14px;padding:10px}[_nghost-%COMP%]   .invoice_image[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:16px;font-weight:600;line-height:24px;color:#101828;margin-bottom:30px}[_nghost-%COMP%]   .invoice_image[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{font-size:14px;font-weight:400;line-height:24px;color:#00778a;margin-bottom:10px}"]}),o})(),D=(()=>{class o{constructor(e){this.journalService=e}resolve(e){return this.journalService.getJournalById(e.params.id)}}return o.\u0275fac=function(e){return new(e||o)(t.LFG(b))},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var At=a(5435);const xt=[{path:d.X.page.list,component:H},{path:d.X.page.create,component:L},{path:d.X.page.view,component:Ct,resolve:{journal:D}},{path:d.X.page.update,component:L,resolve:{journal:D}},{path:d.X.page.updateAttachment,component:(()=>{class o{constructor(e,n){this.journalService=e,this.route=n,this.journalConfig=d.X,this.unsubscribe=new E.x}ngOnInit(){this.route.data.pipe((0,U.R)(this.unsubscribe)).subscribe({next:e=>{this.data=e.journal.data},error:e=>{}})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(b),t.Y36(g.gz))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-attachment-journal-edit"]],decls:1,vars:5,consts:[[3,"data","filesName","listPageRoute","listPageTitle","endPoint"]],template:function(e,n){1&e&&t._UZ(0,"app-update-attachment",0),2&e&&t.Q6J("data",n.data)("filesName","invoice_image")("listPageRoute","/key/accounting/journal-entry")("listPageTitle","list_of_journal_entries")("endPoint",n.journalConfig.api.updateFiles)},dependencies:[At.f],styles:[".items[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px;font-weight:600;line-height:24px;color:#101828;margin:30px 0;width:100%}.items[_ngcontent-%COMP%]   .img[_ngcontent-%COMP%]{height:200px;width:200px;border:1px solid var(--mainColor);border-radius:10px;overflow-x:auto;-ms-overflow-style:none;scrollbar-width:none}.items[_ngcontent-%COMP%]   .img[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.items[_ngcontent-%COMP%]   .img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:198px;border-radius:10px}.items[_ngcontent-%COMP%]   .file[_ngcontent-%COMP%]{width:200px;height:200px;border:1px solid var(--mainColor);border-radius:14px;display:flex;flex-direction:column;justify-content:center;align-items:center;overflow-x:auto;-ms-overflow-style:none;scrollbar-width:none}.items[_ngcontent-%COMP%]   .file[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.items[_ngcontent-%COMP%]   .file[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:10px 0;width:100%}.items[_ngcontent-%COMP%]   .btns[_ngcontent-%COMP%]{display:flex;gap:20px}.items[_ngcontent-%COMP%]   .btns[_ngcontent-%COMP%]   .btn-change[_ngcontent-%COMP%]{background:var(--white);color:var(--mainColor);border:1px solid var(--mainColor);border-radius:3px;margin:6px 0;padding:7px 0;font-size:14px;width:120px}.items[_ngcontent-%COMP%]   .btns[_ngcontent-%COMP%]   .btn-delete[_ngcontent-%COMP%]{background:var(--white);color:var(--danger);border:1px solid var(--red);border-radius:3px;margin:6px 0;padding:7px 0;font-size:14px;width:60px}.customFileInput[_ngcontent-%COMP%]::-webkit-file-upload-button{visibility:hidden}.import[_ngcontent-%COMP%]{padding:20px;border:2px solid var(--mainColor);border-radius:8px;margin:10px 0}"]}),o})(),resolve:{journal:D}}];let Zt=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[g.Bz.forChild(xt),g.Bz]}),o})();var Ot=a(1383),Jt=a(1471),bt=a(9293),Tt=a(9624),Pt=a(2115),Mt=a(4413),wt=a(1890),qt=a(1019),Et=a(8096);let Ut=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[r.ez,Zt,Ot.m,h.aw,Jt.X,bt.Q,Tt.U,Pt.u,Mt.e,wt.f,qt.i,Et.J]}),o})()},991:(M,A,a)=>{a.d(A,{M:()=>T});var r=a(9291),g=a(8763),t=a(1732),y=a(3999),d=a(6814),f=a(707),J=a(4896);function v(_,p){if(1&_&&(r.TgZ(0,"div")(1,"span",6),r._uU(2),r.qZA(),r.TgZ(3,"span",6),r._uU(4),r.qZA()()),2&_){const c=p.$implicit;r.xp6(2),r.hij(" row :",c.row_number," "),r.xp6(2),r.Oqu(c.error)}}let T=(()=>{class _{constructor(c,s,m){this.toastr=c,this.http=s,this.translateService=m,this.endPoint="",this.onDataLoaded=new r.vpe,this.onlCoseSectionImport=new r.vpe,this.showImportForm=!1,this.importErrors=[],this.fileName="",this.values=new FormData,this.clear=!1}onFileSelected(c){console.log(c.target),c.target.files[0]&&(this.fileName=c.target.files[0].name,this.values.set("file",c.target.files[0]))}import(){this.fileName?this.http.post(this.endPoint,this.values).subscribe(c=>{this.toastr.success(c.message),this.closeSectionToImport(!0)},c=>{this.importErrors=c.error.errors,this.clear=!0,this.fileName="",c.error.message&&this.toastr.error(c.error.message)}):this.toastr.error(this.translateService.instant("select_file")),this.clear=!1}closeSectionToImport(c){this.fileName="",this.importErrors=[],this.onlCoseSectionImport.emit(c)}}return _.\u0275fac=function(c){return new(c||_)(r.Y36(g._W),r.Y36(t.O),r.Y36(y.sK))},_.\u0275cmp=r.Xpm({type:_,selectors:[["app-import-data"]],inputs:{endPoint:"endPoint"},outputs:{onDataLoaded:"onDataLoaded",onlCoseSectionImport:"onlCoseSectionImport"},decls:10,vars:15,consts:[[1,"import"],[4,"ngFor","ngForOf"],[3,"multiple","accept","label","clear","onValueChange"],[1,"d-flex","gap-2","align-items-center","mt-3"],[3,"label","onClick"],["styleClass","btn-cancel",3,"label","onClick"],[1,"text-error"]],template:function(c,s){1&c&&(r.TgZ(0,"div",0),r.YNc(1,v,5,2,"div",1),r.TgZ(2,"app-file-upload",2),r.NdJ("onValueChange",function(h){return s.onFileSelected(h)}),r.qZA(),r.TgZ(3,"div",3)(4,"p-button",4),r.NdJ("onClick",function(){return s.import()}),r.ALo(5,"titlecase"),r.ALo(6,"translate"),r.qZA(),r.TgZ(7,"p-button",5),r.NdJ("onClick",function(){return s.closeSectionToImport(!1)}),r.ALo(8,"titlecase"),r.ALo(9,"translate"),r.qZA()()()),2&c&&(r.xp6(1),r.Q6J("ngForOf",s.importErrors),r.xp6(1),r.Q6J("multiple",!1)("accept",".csv,.xls,.xlsx")("label","import")("clear",s.clear),r.xp6(2),r.Q6J("label",r.lcZ(5,7,r.lcZ(6,9,"save"))),r.xp6(3),r.Q6J("label",r.lcZ(8,11,r.lcZ(9,13,"cancel"))))},dependencies:[d.sg,f.zx,J.Y,d.rS,y.X$],styles:[".import[_ngcontent-%COMP%]{padding:20px;border:2px solid var(--mainColor);border-radius:8px;margin:10px 0}"]}),_})()},5253:(M,A,a)=>{a.d(A,{R:()=>_});var r=a(67),g=a(6223),t=a(9291),y=a(6814),d=a(6218),f=a(3999);function J(p,c){1&p&&t._UZ(0,"i",6)}function v(p,c){if(1&p&&(t.TgZ(0,"label"),t._uU(1),t.ALo(2,"titlecase"),t.ALo(3,"translate"),t.TgZ(4,"span",4),t.YNc(5,J,1,0,"i",5),t.qZA()()),2&p){const s=t.oxw();t.xp6(1),t.hij("",t.lcZ(2,2,t.lcZ(3,4,s.text))," "),t.xp6(4),t.Q6J("ngIf",s.control&&(null==s.control.errors?null:s.control.errors.required))}}function T(p,c){if(1&p&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&p){const s=t.oxw();t.Tol("text-danger"),t.xp6(1),t.Oqu(s.object.keys(s.control.errors)[0])}}let _=(()=>{class p extends r.t{constructor(s){super(),this.formGroupDirective=s,this.placeholder="",this.rows="2",this.cols="",this.readOnly=!1,this.class="d-flex flex-column justify-content-between",this.object=Object}writeValue(s){this.value=s}onValueChange(s){this.onChange(s.target.value),this.onTouched()}}return p.\u0275fac=function(s){return new(s||p)(t.Y36(g.sg,8))},p.\u0275cmp=t.Xpm({type:p,selectors:[["app-textarea"]],inputs:{value:"value",text:"text",placeholder:"placeholder",rows:"rows",cols:"cols",readOnly:"readOnly",class:"class",type:"type"},features:[t._Bn([{provide:g.JU,useExisting:p,multi:!0},{provide:g.Cf,useExisting:p,multi:!0}]),t.qOj],decls:4,vars:8,consts:[[3,"ngClass"],[4,"ngIf"],["pInputTextarea","",3,"rows","cols","ngModel","placeholder","disabled","ngModelChange","input"],[3,"class",4,"ngIf"],[1,"required-aster"],["class","fa-solid fa-asterisk",4,"ngIf"],[1,"fa-solid","fa-asterisk"]],template:function(s,m){1&s&&(t.TgZ(0,"div",0),t.YNc(1,v,6,6,"label",1),t.TgZ(2,"textarea",2),t.NdJ("ngModelChange",function(P){return m.value=P})("input",function(P){return m.onValueChange(P)}),t.qZA(),t.YNc(3,T,2,3,"span",3),t.qZA()),2&s&&(t.Q6J("ngClass",m.class),t.xp6(1),t.Q6J("ngIf",m.text),t.xp6(1),t.Q6J("rows",m.rows)("cols",m.cols)("ngModel",m.value)("placeholder",m.placeholder)("disabled",m.readOnly),t.xp6(1),t.Q6J("ngIf",m.control&&m.control.errors&&(m.control.touched||m.formGroupDirective.submitted)))},dependencies:[y.mk,y.O5,g.Fj,g.JJ,g.On,d.g,y.rS,f.X$],styles:[".text-danger[_ngcontent-%COMP%]{font-size:14px}"]}),p})()},8718:(M,A,a)=>{a.d(A,{x:()=>r});const r={api:{create:"user/create",get:"user",getById:"user/",update:"user/update/",delete:"user/",exportCvs:"user/export/cvs",exportPdf:"user/export/pdf",import:"user/import",export:"user/data/export"},page:{list:"",view:"view/:id"}}}}]);