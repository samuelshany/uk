"use strict";(self.webpackChunkkey=self.webpackChunkkey||[]).push([[6460],{6460:(ne,v,a)=>{a.r(v),a.d(v,{FixedAssetModule:()=>ie});var m=a(6814),_=a(8209),c=a(5861),f=function(i){return i.list="View Fixed Assets",i.create="Create Fixed Asset",i.update="Edit Fixed Asset",i.delete="Delete Fixed Asset",i}(f||{});const s={api:{create:"fixed-asset/create",get:"fixed-asset",getParents:"parents/accounts",getNotParents:"not-parents/accounts",getById:"fixed-asset/",update:"fixed-asset/update/",delete:"fixed-asset/",export:"fixed-asset/export",exportExample:"fixed-asset/export/example",import:"fixed-asset/import"},page:{list:"",update:"update/:id",view:"view/:id",create:"new"}},h=i=>{return{cols:[{field:"code",label:"code",class:""},{field:"name",label:"name",class:""},{field:"description",label:"description",format:n=>n.description?n.description:"-"},{field:"depreciation_duration_type",label:"duration_type",class:"",format:n=>n.depreciation_duration_type?n.depreciation_duration_type:"-"},{field:"depreciation_duration_value",label:"duration_value",class:"",format:n=>n.depreciation_duration_value?n.depreciation_duration_value:"-"},{field:"acquisition_date",label:"acquisition_date",class:"",format:n=>n.acquisition_date?n.acquisition_date:"-"},{field:"created_at",label:"created_at",class:"",format:n=>n.created_at?n.created_at:"-"},{field:"creator",label:"created_by",class:"",format:n=>n.creator?n.creator:"-"},{field:"depreciation_ratio",label:"ratio",format:n=>n.depreciation_ratio?n.depreciation_ratio:"-"},{label:"action",actions:[{id:f.delete,icon:"trash",class:"main-color",fun:(n=(0,c.Z)(function*(t){return yield i.fixedAssetService.delete(t)}),function(o){return n.apply(this,arguments)})},{id:f.update,icon:"pen-to-square",class:"main-color",fun:function(){var n=(0,c.Z)(function*(t){return yield i.fixedAssetService.openDialogToUpdate(t)});return function(o){return n.apply(this,arguments)}}()}]}],Request:s.api.get,titleRow:"name"};var n};var p=a(6924),g=a(5946),e=a(9291),l=a(6223),C=a(8763),Z=a(5118),D=a(2525),L=a(8614),J=a(1904),q=a(3838),I=a(6098),S=a(1771),T=a(4779),x=a(3999);function U(i,n){if(1&i&&(e.TgZ(0,"div")(1,"p",27),e._uU(2),e.qZA()()),2&i){const t=n.$implicit;e.xp6(2),e.Oqu(t.value)}}let y=(()=>{class i{constructor(t,o,r,u,d,oe){this.fb=t,this.toastr=o,this.config=r,this.dialogRef=u,this.fixedAssetService=d,this.groupService=oe,this.formGroup=this.initForm(),this.fixedAssetConfig=s,this.permissions=f,this.depreciation_duration_types=[{id:"year",name:"year"},{id:"month",name:"month"}],this.maxDate=new Date,this.config.data?.data&&this.fillDataToUpdate(this.config.data?.data)}ngOnInit(){this.fixedAssetService.getNotParents().subscribe(t=>{this.account_types=t.data})}initForm(){return this.fb.group({id:[Number],name:["",[l.kI.required]],description:[""],acquisition_date:["",l.kI.required],acquisition_value:["",l.kI.required],depreciation_ratio:[""],depreciation_value:[""],depreciation_duration_value:["",l.kI.min(1)],depreciation_duration_type:["",l.kI.required],parent_id:["",l.kI.required]})}setAccountId(t){let o=this.account_types.filter(r=>r.id==t.value)[0];this.formGroup.get("parent_coded")?.patchValue(o.code)}fillDataToUpdate(t){this.formGroup.patchValue({id:t.id,name:t?.name,description:t?.description,acquisition_date:t?.acquisition_date,acquisition_value:t.acquisition_value,depreciation_ratio:t?.depreciation_ratio,depreciation_value:t.depreciation_value,depreciation_duration_value:t.depreciation_duration_value,depreciation_duration_type:t.depreciation_duration_type,parent_id:t?.parent.id,parent_code:t.parent.code})}accept(){this.formGroup.invalid?this.formGroup.markAllAsTouched():this.config.data.data?this.fixedAssetService.update(this.formGroup.value).subscribe({next:t=>{this.toastr.success(t.message),this.closePopup(!0)},error:t=>{this.errors=t.error.errors,this.toastr.error(t.error.message)}}):this.fixedAssetService.create(this.formGroup.value).subscribe({next:t=>{this.toastr.success(t.message),this.closePopup(!0)},error:t=>{this.errors=t.error.errors,this.toastr.error(t.error.message)}})}closePopup(t){this.dialogRef.close(t)}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(l.qu),e.Y36(C._W),e.Y36(Z.S),e.Y36(Z.E7),e.Y36(F),e.Y36(D.l))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-fixed-form"]],decls:38,vars:53,consts:[[1,"main"],[1,"header"],[1,"d-flex","justify-content-between"],[1,"icon"],["src","../assets/Tabs/Icon/Active/craete-bank.png","alt","img"],[3,"click"],[1,"fa-solid","fa-xmark","pointer","fs-1"],[1,"title"],[3,"formGroup"],[4,"ngFor","ngForOf"],[1,"row"],[1,"mb-5","col-sm-12"],["formControlName","name","ngDefaultControl","","placeholder","",3,"text"],["formControlName","description","ngDefaultControl","","placeholder","",3,"text"],[1,"mb-5","col-12"],["formControlName","acquisition_date","ngDefaultControl","","placeholder","",3,"text","maxDate"],["formControlName","acquisition_value","ngDefaultControl","",3,"mode","maxFractionDigits","minFractionDigits","showButtons","text"],["formControlName","depreciation_ratio","ngDefaultControl","",3,"text"],["formControlName","depreciation_value","ngDefaultControl","",3,"mode","maxFractionDigits","minFractionDigits","showButtons","text"],[1,"mb-5","col-12","col-md-6"],["formControlName","depreciation_duration_value","ngDefaultControl","",3,"text"],["placeholder","select","optionLabel","name","optionValue","id","formControlName","depreciation_duration_type","ngDefaultControl","",3,"text","data"],[1,"mb-3","col-12"],["placeholder","select","optionLabel","name_code","optionValue","id","formControlName","parent_id",3,"text","filter","filterBy","request"],[1,"row","g-2","my-2"],[1,"col-6"],[3,"text","click"],[1,"text-error"]],template:function(t,o){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"span",3),e._UZ(4,"img",4),e.qZA(),e.TgZ(5,"span",5),e.NdJ("click",function(){return o.closePopup(!1)}),e._UZ(6,"i",6),e.qZA()(),e.TgZ(7,"p",7),e._uU(8),e.ALo(9,"translate"),e.qZA()(),e.TgZ(10,"app-form",8),e.YNc(11,U,3,1,"div",9),e.ALo(12,"keyvalue"),e.TgZ(13,"div",10)(14,"div",11),e._UZ(15,"app-text",12),e.qZA(),e.TgZ(16,"div",11),e._UZ(17,"app-text",13),e.qZA(),e.TgZ(18,"div",14),e._UZ(19,"app-date",15),e.qZA(),e.TgZ(20,"div",14),e._UZ(21,"app-number-input",16),e.qZA(),e.TgZ(22,"div",14),e._UZ(23,"app-number-input",17),e.qZA(),e.TgZ(24,"div",14),e._UZ(25,"app-number-input",18),e.qZA(),e.TgZ(26,"div",10)(27,"div",19),e._UZ(28,"app-number-input",20),e.qZA(),e.TgZ(29,"div",19),e._UZ(30,"app-dropdown",21),e.qZA()(),e.TgZ(31,"div",22),e._UZ(32,"app-dropdown",23),e.qZA()(),e.TgZ(33,"div",24)(34,"div",25)(35,"app-button",26),e.NdJ("click",function(){return o.closePopup(!1)}),e.qZA()(),e.TgZ(36,"div",25)(37,"app-button",26),e.NdJ("click",function(){return o.accept()}),e.qZA()()()()()),2&t){let r;e.xp6(8),e.Oqu(e.lcZ(9,49,null!==(r=o.config.header)&&void 0!==r?r:"")),e.xp6(2),e.Q6J("formGroup",o.formGroup),e.xp6(1),e.Q6J("ngForOf",e.lcZ(12,51,o.errors)),e.xp6(4),e.Tol(""),e.Q6J("text","name"),e.xp6(2),e.Tol(""),e.Q6J("text","description"),e.xp6(2),e.Tol(""),e.Q6J("text","acquisition_date")("maxDate",o.maxDate),e.xp6(2),e.Tol(""),e.Q6J("mode","decimal")("maxFractionDigits",3)("minFractionDigits",2)("showButtons",!1)("text","acquisition_value"),e.xp6(2),e.Tol(""),e.Q6J("text","ratio"),e.xp6(2),e.Tol(""),e.Q6J("mode","decimal")("maxFractionDigits",3)("minFractionDigits",2)("showButtons",!1)("text","depreciation_value"),e.xp6(3),e.Tol(""),e.Q6J("text","depreciation_duration_value"),e.xp6(2),e.Tol(""),e.Q6J("text","deprecation_type")("data",o.depreciation_duration_types),e.xp6(2),e.Tol(""),e.Q6J("text","account_parent")("filter",!0)("filterBy","name_code")("request",o.fixedAssetConfig.api.getParents),e.xp6(3),e.Tol("btn-cancel"),e.Q6J("text","Cancel"),e.xp6(2),e.Tol("btn-filter"),e.Q6J("text",null==o.config.data?null:o.config.data.acceptLabel)}},dependencies:[m.sg,L.T,J.D,q.J,I.I,S.U,l.Fj,l.JJ,l.JL,l.sg,l.u,T.r,m.Nd,x.X$]}),i})();var N=a(1732),M=a(3562);let F=(()=>{class i{constructor(t,o,r){this.http=t,this.dynamicDialog=o,this.toastr=r}get(t){return this.http.get(s.api.get)}getParents(t){return this.http.get(s.api.getParents)}getNotParents(t){return this.http.get(s.api.getNotParents)}getById(t){return this.http.get(s.api.getById+t)}openDialogToCreate(){var t=this;return(0,c.Z)(function*(){return yield t.dynamicDialog.showDialogWithComponent({showHeader:!1,header:"add_fixed_asset",data:{acceptLabel:"Add",rejectLabel:"Cancel"},width:"480px",height:"h-100"},y)})()}create(t){return this.http.post(s.api.create,t)}delete(t){var o=this;return(0,c.Z)(function*(){const r={showHeader:!1,header:"delete",data:{message:"do_you_want_to_delete",acceptLabel:"delete",rejectLabel:"close",data:{...t}},width:"480px",height:"auto"};if(!(yield o.dynamicDialog.confirm(r)))return!1;try{const d=yield o.http.delete(s.api.delete+t.id).toPromise();return o.toastr.success(d.message),d}catch(d){return o.toastr.error(d.error.message),d}})()}openDialogToUpdate(t){var o=this;return(0,c.Z)(function*(){const r={showHeader:!1,header:"update_fixed_asset",data:{acceptLabel:"update",rejectLabel:"Cancel",data:{...t}},height:"auto",width:"500px",styleClass:"financial-dialog"};return yield o.dynamicDialog.showDialogWithComponent(r,y)})()}update(t){return this.http.post(s.api.update+t.id,t)}import(t){return this.http.post(s.api.import,t)}export(){return this.http.get(s.api.export)}exportExample(){return this.http.get(s.api.exportExample)}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(N.O),e.LFG(M.U),e.LFG(C._W))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();var Q=a(8275),P=a(2377),O=a(991),w=a(359),E=a(5077),G=a(3826);function B(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"div",18)(1,"button",19),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"ul",20)(5,"li",21),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.exportExample())}),e._uU(6),e.ALo(7,"titlecase"),e.ALo(8,"translate"),e.qZA(),e.TgZ(9,"li",21),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.export())}),e._uU(10),e.ALo(11,"titlecase"),e.ALo(12,"translate"),e.qZA()()()}2&i&&(e.xp6(2),e.hij(" ",e.lcZ(3,3,"export")," "),e.xp6(4),e.Oqu(e.lcZ(7,5,e.lcZ(8,7,"example"))),e.xp6(4),e.Oqu(e.lcZ(11,9,e.lcZ(12,11,"data"))))}function j(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"div")(1,"app-import-data",22),e.NdJ("onlCoseSectionImport",function(r){e.CHM(t);const u=e.oxw();return e.KtG(u.closeSectionToImport(r))}),e.qZA()()}if(2&i){const t=e.oxw();e.xp6(1),e.Q6J("endPoint",t.fileConfig.api.import)}}const W=function(i){return[i]},Y=[{path:"",component:(()=>{class i{constructor(t){this.fixedAssetService=t,this.showImportForm=!1,this.fileConfig=s,this.tableConfig=h(this),this.permissions=f,this.financialFilterConfig=[{field:"search",label:"search",type:p.W.TEXT,placeholder:"search_by_name_or_description"},{field:"acquisition_value",label:"acquisition_value",type:p.W.TEXT,placeholder:""},{field:"depreciation_ratio",label:"depreciation_ratio",type:p.W.TEXT,placeholder:""},{field:"depreciation_value",label:"depreciation_value",type:p.W.TEXT,placeholder:""},{field:"acquisition_date",label:"acquisition_date",type:p.W.DATE},{field:"from",label:"from",type:p.W.DATE,placeholder:"From"},{field:"to",label:"to",type:p.W.DATE}],this.sortConfig=[{optionLabel:"label",optionValue:"field",key:"sort_by",placeholder:"sort_by",data:[{label:"name",field:"name"},{label:"created_at",field:"created_at"},{label:"creator",field:"creator_id"},{label:"code",field:"code"},{label:"acquisition_value",field:"acquisition_value"},{label:"acquisition_date",field:"acquisition_date"},{label:"depreciation_ratio",field:"depreciation_ratio"},{label:"parent",field:"parent_id"},{label:"depreciation_value",field:"depreciation_value"}]},{optionLabel:"label",optionValue:"field",key:"sort_type",placeholder:"sort_type",data:[{label:g.q.asc,field:g.q.asc},{label:g.q.desc,field:g.q.desc}]}]}openDialogToCreate(){var t=this;return(0,c.Z)(function*(){(yield t.fixedAssetService.openDialogToCreate())&&(t.tableConfig=h(t))})()}openSectionToImport(){this.showImportForm=!0}closeSectionToImport(t){t?(this.showImportForm=!1,this.tableConfig=h(this)):this.showImportForm=!1}export(t){this.fixedAssetService.export().subscribe(o=>{window.open(o.file_path)})}exportExample(){this.fixedAssetService.exportExample().subscribe(t=>{window.open(t.file_path)})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(F))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-fixed-list"]],decls:21,vars:16,consts:[[1,"page-card"],[1,"d-flex","justify-content-between","align-items-center","mb-2"],[1,"title"],[1,"d-flex","gap-2","align-items-center"],["class","dropdown",4,"hasPermissions"],[3,"text","click"],["text","new",3,"click"],[4,"ngIf"],[1,"d-flex","justify-content-between","my-3"],[3,"SortConfig"],["sort",""],[1,"d-flex","g-2"],[3,"config"],["filter",""],[1,"table"],[3,"tableConfig","pagination","filter","sort"],[1,"d-flex","align-items-center","justify-content-center"],["pagination",""],[1,"dropdown"],["type","button","id","dropdownMenuButton1","data-bs-toggle","dropdown","aria-expanded","false",1,"btn","btn-cancel","dropdown-toggle"],["aria-labelledby","dropdownMenuButton1",1,"dropdown-menu"],[1,"pointer","dropdown-item",3,"click"],[3,"endPoint","onlCoseSectionImport"]],template:function(t,o){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"h5",2),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"div",3),e.YNc(6,B,13,13,"div",4),e.TgZ(7,"app-button",5),e.NdJ("click",function(){return o.openSectionToImport()}),e.qZA(),e.TgZ(8,"app-button",6),e.NdJ("click",function(){return o.openDialogToCreate()}),e.qZA()()(),e.YNc(9,j,2,1,"div",7),e.TgZ(10,"div",8),e._UZ(11,"ukt-sort",9,10),e.TgZ(13,"div",11),e._UZ(14,"ukt-filter",12,13),e.qZA()(),e.TgZ(16,"div",14),e._UZ(17,"app-table",15),e.qZA(),e.TgZ(18,"div",16),e._UZ(19,"ukt-pagination",null,17),e.qZA()()),2&t){const r=e.MAs(12),u=e.MAs(15),d=e.MAs(20);e.xp6(3),e.Oqu(e.lcZ(4,12,"list_all_of_fixed_asset")),e.xp6(3),e.Q6J("hasPermissions",e.VKq(14,W,o.permissions.list)),e.xp6(1),e.Tol("btn-cancel"),e.Q6J("text","import"),e.xp6(2),e.Q6J("ngIf",o.showImportForm),e.xp6(2),e.Q6J("SortConfig",o.sortConfig),e.xp6(3),e.Q6J("config",o.financialFilterConfig),e.xp6(3),e.Q6J("tableConfig",o.tableConfig)("pagination",d)("filter",u)("sort",r)}},dependencies:[m.O5,Q.z,P.a,O.M,w.Q,T.r,E.z,G.x,m.rS,x.X$],styles:[".dropdown[_ngcontent-%COMP%]{background-color:transparent!important}.dropdown[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:transparent!important;border:1px solid var(--mainColor);font-size:1.5rem;padding:6px}.dropdown[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{font-size:1.5rem}"]}),i})()}];let X=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[_.Bz.forChild(Y),_.Bz]}),i})();var k=a(1471),z=a(9293),V=a(9624),R=a(4413),H=a(2115),K=a(1383),$=a(1890),ee=a(1019),te=a(8096);let ie=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[m.ez,X,K.m,x.aw,k.X,z.Q,V.U,H.u,R.e,$.f,ee.i,te.J,x.aw]}),i})()}}]);