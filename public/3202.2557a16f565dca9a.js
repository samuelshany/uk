"use strict";(self.webpackChunkkey=self.webpackChunkkey||[]).push([[3202],{919:(b,m,n)=>{n.r(m),n.d(m,{ConfigurationModule:()=>it});var a=n(6814),l=n(2954),d=n(5861),C=n(5219),p=n(438),h=n(2897),c=function(e){return e.create="Create Purchase",e.view="View Purchases",e.edit="Edit Purchase",e.delete="Delete Purchase",e}(c||{});const f=e=>{return{cols:[{field:"id",label:"code ",class:""},{field:"status_name",label:"status_name",class:""},{field:"color",label:"color"},{label:"action",actions:[{id:c.delete,icon:"trash",class:"main-color",fun:(r=(0,d.Z)(function*(o){return yield e.configrationService.deleteConfigration(o,"delete-configration")}),function(i){return r.apply(this,arguments)})},{id:c.edit,icon:"pen-to-square",class:"main-color",fun:function(){var r=(0,d.Z)(function*(o){return yield e.configrationService.openDialogToUpdate(o)});return function(i){return r.apply(this,arguments)}}()}]}],Request:"assets/data/configration.json"};var r};var D=n(6924),Z=n(5946),P=n(8645),t=n(9291);const v={api:{create:"configration/create",get:"configration",getById:"configration/details/",update:"configration/update/",delete:"configration/"},page:{list:"",update:"update/:id",create:"new",details:"details/:id"}};var F=n(5619),g=n(6223),L=n(1732),S=n(8763),M=n(5118),B=n(1771),j=n(2305),I=n(8614),O=n(4779),x=n(3999);function N(e,r){if(1&e&&(t.TgZ(0,"div",20),t._uU(1),t.qZA()),2&e){const o=r.$implicit;t.xp6(1),t.hij(" ",o.value," ")}}let U=(()=>{class e{constructor(o,i,s,u,y,G){this.http=o,this.fb=i,this.toastr=s,this.dynamicDialogConfig=u,this.dialogRef=y,this.configrationService=G,this.payment_accounts=[],this.formGroup=this.initForm(),this.configrationConfig=v,this.dynamicDialogConfig.data?.data&&(console.log(this.dynamicDialogConfig.data?.data),this.fillDataToUpdate(this.dynamicDialogConfig.data?.data))}ngOnInit(){}initForm(){return this.fb.group({id:[Number],status_name:["",g.kI.required],final_state:[!1],color:["#000000",g.kI.required]})}changeStatus(o){o.checked?this.formGroup.get("final_state")?.setValue(!0):this.formGroup.get("final_state")?.setValue(!1)}accept(){this.formGroup.invalid?this.formGroup.markAllAsTouched():this.dynamicDialogConfig.data.data?this.configrationService.update(this.formGroup.value).subscribe({next:o=>{this.toastr.success(o.message),this.closePopup(!0)},error:o=>{this.errors=o.error.errors,this.toastr.error(o.error.message)}}):this.configrationService.create(this.formGroup.value).subscribe({next:o=>{this.toastr.success(o.message),this.closePopup(!0)},error:o=>{this.errors=o.error.errors,this.toastr.error(o.error.message)}})}fillDataToUpdate(o){this.formGroup.patchValue({id:o.id,color:o.color,final_state:o.final_state,status_name:o.status_name})}closePopup(o){this.dialogRef.close(o)}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(L.O),t.Y36(g.qu),t.Y36(S._W),t.Y36(M.S),t.Y36(M.E7),t.Y36(E))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-configration-form"]],decls:27,vars:21,consts:[[1,"main"],[1,"header"],[1,"d-flex","justify-content-between"],[1,"icon"],["src","../assets/Tabs/Icon/Active/purchase -2.png","alt","img"],[3,"click"],[1,"fa-solid","fa-xmark","pointer","fs-1"],[1,"title"],[3,"formGroup"],["class","text-error",4,"ngFor","ngForOf"],[1,"row"],[1,"mb-3","col-12"],["formControlName","status_name","ngDefaultControl","","placeholder","",3,"text"],[1,"mb-3","col-6"],["for","color",1,"fs-3","pe-5"],["type","color","formControlName","color","id","color",2,"vertical-align","middle"],["formControlName","final_state",3,"text","change"],[1,"row","g-2","my-2"],[1,"col-6"],[3,"text","click"],[1,"text-error"]],template:function(o,i){if(1&o&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"span",3),t._UZ(4,"img",4),t.qZA(),t.TgZ(5,"span",5),t.NdJ("click",function(){return i.closePopup(!1)}),t._UZ(6,"i",6),t.qZA()(),t.TgZ(7,"p",7),t._uU(8),t.ALo(9,"translate"),t.qZA()(),t.TgZ(10,"app-form",8),t.YNc(11,N,2,1,"div",9),t.ALo(12,"keyvalue"),t.TgZ(13,"div",10)(14,"div",11),t._UZ(15,"app-text",12),t.qZA(),t.TgZ(16,"div",13)(17,"label",14),t._uU(18,"color"),t.qZA(),t._UZ(19,"input",15),t.qZA(),t.TgZ(20,"div",13)(21,"app-checkbox",16),t.NdJ("change",function(u){return i.changeStatus(u)}),t.qZA()()(),t.TgZ(22,"div",17)(23,"div",18)(24,"app-button",19),t.NdJ("click",function(){return i.closePopup(!1)}),t.qZA()(),t.TgZ(25,"div",18)(26,"app-button",19),t.NdJ("click",function(){return i.accept()}),t.qZA()()()()()),2&o){let s;t.xp6(8),t.Oqu(t.lcZ(9,17,null!==(s=i.dynamicDialogConfig.header)&&void 0!==s?s:"")),t.xp6(2),t.Q6J("formGroup",i.formGroup),t.xp6(1),t.Q6J("ngForOf",t.lcZ(12,19,i.errors)),t.xp6(4),t.Tol(""),t.Q6J("text","status_name"),t.xp6(6),t.Akn("vertical-align: middle"),t.Tol(" d-flex align-items-center mt-2  flex-row-reverse justify-content-end gap-2"),t.Q6J("text","Final State"),t.xp6(3),t.Tol("btn-cancel"),t.Q6J("text","Cancel"),t.xp6(2),t.Tol("btn-filter"),t.Q6J("text",null==i.dynamicDialogConfig.data?null:i.dynamicDialogConfig.data.acceptLabel)}},dependencies:[a.sg,B.U,g.Fj,g.JJ,g.JL,g.sg,g.u,j.b,I.T,O.r,a.Nd,x.X$]}),e})();var R=n(3562);let E=(()=>{class e{constructor(o,i,s){this.dynamicDialog=o,this.http=i,this.toastr=s,this.latestConfigration=new F.X([]),this.displaySingleConfigration=new F.X({})}getConfigration(o){return this.http.get(v.api.get)}getConfigrationById(o){return this.http.get(v.api.getById+o)}getLatestConfigration(){return this.latestConfigration}setLatestConfigration(o){return this.latestConfigration.next(o)}create(o){return this.http.post(v.api.create,o)}deleteConfigration(o,i,s){var u=this;return(0,d.Z)(function*(){const y={showHeader:!1,header:"delete",data:{message:"do_you_want_to_delete",acceptLabel:"delete",rejectLabel:"close",data:{...o}},width:"480px",height:"164px"};if(yield u.dynamicDialog.confirm(y))try{const T=yield u.http.delete(v.api.delete+o.id).toPromise();return u.toastr.success(T.message),T}catch(T){throw u.toastr.error(T.error.message),T}return!1})()}update(o,i){return this.http.post(v.api.update+o.id,o)}openDialogToCreate(){return this.dynamicDialog.showDialogWithComponent({showHeader:!1,header:"add_configration",data:{acceptLabel:"add",rejectLabel:"cancel"},width:"500px",height:"auto"},U)}openDialogToUpdate(o){var i=this;return(0,d.Z)(function*(){const s={showHeader:!1,header:"update_configration",data:{acceptLabel:"update",rejectLabel:"Cancel",data:{...o}},width:"480px",height:"auto"};return yield i.dynamicDialog.showDialogWithComponent(s,U)})()}}return e.\u0275fac=function(o){return new(o||e)(t.LFG(R.U),t.LFG(L.O),t.LFG(S._W))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var Q=n(1882),W=n(2377),Y=n(1935),X=n(359),K=n(5077),z=n(4811);const V=[{path:"",component:(()=>{class e{constructor(o,i){this.configrationService=o,this.sharedService=i,this.permissions=p.M,this.icon=C.dv,this.fileConfig=(0,h.k)(),this.tableConfig=f(this),this.filtersConfig=[{field:"search",label:"search",type:D.W.TEXT,placeholder:"search"}],this.sortConfig=[{optionLabel:"label",optionValue:"field",key:"sort_by",placeholder:"sort_by",data:[{label:"Name",field:"name"},{label:"code",field:"code"}]},{optionLabel:"label",optionValue:"field",key:"sort_type",placeholder:"sort_type",data:[{label:Z.q.asc,field:Z.q.asc},{label:Z.q.desc,field:Z.q.desc}]}],this.appLayout="",this.unsubscribe=new P.x}ngOnDestroy(){this.unsubscribe.next(!0),this.unsubscribe.complete()}openDialogToCreate(){var o=this;return(0,d.Z)(function*(){(yield o.configrationService.openDialogToCreate())&&(o.tableConfig=f(o))})()}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(E),t.Y36(Q.F))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-configration-list"]],decls:19,vars:11,consts:[[1,"page-card"],[1,"d-flex","justify-content-between","pb-5"],[1,"title"],[1,"new-btn"],[3,"text","icon","click"],["type","solid"],[1,"d-flex","justify-content-between"],[3,"SortConfig"],["sort",""],[3,"config"],["filter",""],[1,"table"],[3,"tableConfig","pagination","filter","sort"],["table",""],[1,"d-flex","align-items-center","justify-content-center"],["pagination",""]],template:function(o,i){if(1&o&&(t.TgZ(0,"div",0)(1,"div",1)(2,"h5",2),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"div",3)(6,"app-button",4),t.NdJ("click",function(){return i.openDialogToCreate()}),t._UZ(7,"app-icon",5),t.qZA()()(),t.TgZ(8,"div",6),t._UZ(9,"ukt-sort",7,8)(11,"ukt-filter",9,10),t.qZA(),t.TgZ(13,"div",11),t._UZ(14,"app-table",12,13),t.qZA(),t.TgZ(16,"div",14),t._UZ(17,"ukt-pagination",null,15),t.qZA()()),2&o){const s=t.MAs(10),u=t.MAs(12),y=t.MAs(18);t.xp6(3),t.Oqu(t.lcZ(4,9,"configration-list")),t.xp6(3),t.Q6J("text","new")("icon",i.icon.PLUS),t.xp6(3),t.Q6J("SortConfig",i.sortConfig),t.xp6(2),t.Q6J("config",i.filtersConfig),t.xp6(3),t.Q6J("tableConfig",i.tableConfig)("pagination",y)("filter",u)("sort",s)}},dependencies:[W.a,Y.o,X.Q,K.z,z.x,O.r,x.X$]}),e})()}];let H=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[l.Bz.forChild(V),l.Bz]}),e})();var $=n(4413),_=n(1471),k=n(9293),w=n(2115),q=n(3992),tt=n(1019),ot=n(8096),nt=n(1890),et=n(6145);let it=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[a.ez,H,$.e,C.m8,_.X,k.Q,w.u,q.Z,tt.i,ot.J,nt.f,et.n,x.aw]}),e})()},6145:(b,m,n)=>{n.d(m,{n:()=>c});var a=n(6814),l=n(4819),d=n(1890),C=n(9624),p=n(3999),h=n(9291);let c=(()=>{class f{}return f.\u0275fac=function(A){return new(A||f)},f.\u0275mod=h.oAB({type:f}),f.\u0275inj=h.cJS({imports:[a.ez,l.O,C.U,d.f,p.aw]}),f})()},7824:(b,m,n)=>{n.d(m,{o:()=>a});var a=function(l){return l.export="export",l.import="import",l.print="print",l}(a||{})},1771:(b,m,n)=>{n.d(m,{U:()=>C});var a=n(9291),l=n(6223);const d=["*"];let C=(()=>{class p{constructor(){this.onSubmit=new a.vpe}ngOnChanges(c){}getFormData(){return"function"==typeof this.formData?this.formData(this.formGroup.value):{...this.formGroup.value}}reset(){this.formGroup.reset()}submit(){if(this.formGroup.markAllAsTouched(),this.formGroup.invalid)return;const c=this.getFormData();this.onSubmit.emit(c)}ngAfterContentInit(){}ngAfterContentChecked(){}ngOnDestroy(){}}return p.\u0275fac=function(c){return new(c||p)},p.\u0275cmp=a.Xpm({type:p,selectors:[["app-form"]],inputs:{formGroup:"formGroup",formData:"formData"},outputs:{onSubmit:"onSubmit"},features:[a.TTD],ngContentSelectors:d,decls:2,vars:1,consts:[[3,"formGroup","ngSubmit"]],template:function(c,f){1&c&&(a.F$t(),a.TgZ(0,"form",0),a.NdJ("ngSubmit",function(){return f.submit()}),a.Hsn(1),a.qZA()),2&c&&a.Q6J("formGroup",f.formGroup)},dependencies:[l._Y,l.JL,l.sg]}),p})()}}]);