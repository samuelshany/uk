"use strict";(self.webpackChunkkey=self.webpackChunkkey||[]).push([[4488],{7553:(C,v,n)=>{n.d(v,{F:()=>a});const a={api:{create:"tax/create",get:"tax",getModules:"module",getById:"tax/",update:"tax/update/",delete:"tax/",exportCvs:"tax/export/cvs",exportPdf:"tax/export/pdf",import:"tax/import"},page:{list:"",view:"view/:id",history:"history"}}},1255:(C,v,n)=>{n.r(v),n.d(v,{SalesOrderModule:()=>gt});var a=n(6814),_=n(2954);const l={api:{create:"sales-order/create",get:"sales-order",getTaxes:"tax",getProducts:"product",getCustomers:"customer",cancel:"cancel",approved:"approved",getById:"sales-order/",update:"sales-order/update/",delete:"sales-order/"},page:{list:"",create:"new",view:"view/:id",update:"update/:id"}};var f=function(r){return r.create="Create Brand",r.view="View Brand",r.edit="Edit Brand",r.delete="Delete Brand",r}(f||{}),Z=n(8645),A=n(9773),h=n(6223),x=n(5566),q=n(7553),t=n(9291),c=n(5861),g=n(1732),i=n(3562),p=n(8763);let y=(()=>{class r{constructor(e,o,u){this.http=e,this.dynamicDialog=o,this.toastr=u}get(){return this.http.get(l.api.get)}getById(e){return this.http.get(l.api.getById+e)}getSalesOrderById(e){return this.http.get(l.api.getById+e)}getTaxes(){return this.http.getWithParam(l.api.getTaxes,{limit:"all"})}getProducts(){return this.http.getWithParam(l.api.getProducts,{limit:"all"})}getCustomers(){return this.http.getWithParam(l.api.getCustomers,{limit:"all"})}create(e){return this.http.post(l.api.create,e)}delete(e){var o=this;return(0,c.Z)(function*(){const u={showHeader:!1,header:"delete",data:{message:"do_you_want_to_delete",acceptLabel:"delete",rejectLabel:"close",data:{...e}},width:"480px",height:"auto"};if(!(yield o.dynamicDialog.confirm(u)))return!1;try{const d=yield o.http.delete(l.api.delete+e.id).toPromise();return o.toastr.success(d.message),d}catch(d){return o.toastr.error(d.error.message),d}})()}approved(e){var o=this;return(0,c.Z)(function*(){const u={showHeader:!1,header:"delete",data:{message:"do_you_want_to_approved",acceptLabel:"approved",rejectLabel:"close",data:{...e},name:"product_name"},width:"480px",height:"auto"};if(!(yield o.dynamicDialog.confirm(u)))return!1;try{const d=yield o.http.post(l.api.approved+e.id,{id:e.id}).toPromise();return o.toastr.success(d.message),d}catch(d){return o.toastr.error(d.error.message),d}})()}cancel(e){var o=this;return(0,c.Z)(function*(){const u={showHeader:!1,header:"cancel",data:{message:"do_you_want_to_cancel",acceptLabel:"confirm",rejectLabel:"close",data:{...e},name:"product_name"},width:"480px",height:"auto"};if(!(yield o.dynamicDialog.confirm(u)))return!1;try{const d=yield o.http.post(l.api.cancel+e.id,{id:e.id}).toPromise();return o.toastr.success(d.message),d}catch(d){return o.toastr.error(d.error.message),d}})()}update(e){return this.http.post(l.api.update+e.id,e)}}return r.\u0275fac=function(e){return new(e||r)(t.LFG(g.O),t.LFG(i.U),t.LFG(p._W))},r.\u0275prov=t.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();var O=n(1771),w=n(8614),I=n(1904),N=n(3838),P=n(6098),J=n(5253),M=n(4896),F=n(4779),S=n(3999);function E(r,s){if(1&r&&(t.TgZ(0,"div",6),t._UZ(1,"app-button",43),t.qZA()),2&r){const e=t.oxw();t.xp6(1),t.Q6J("text","update_attachment")("iconPos","left")("icon","fa-solid fa-check")("routerLink","/key/sales/sales-order/update-attachment/"+e.activeId)}}function G(r,s){if(1&r&&(t.TgZ(0,"div")(1,"p",44),t._uU(2),t.qZA()()),2&r){const e=s.$implicit;t.xp6(2),t.Oqu(e.value)}}function Q(r,s){if(1&r&&(t.TgZ(0,"p",45),t._uU(1),t.ALo(2,"titlecase"),t.ALo(3,"translate"),t.ALo(4,"titlecase"),t.ALo(5,"translate"),t.qZA()),2&r){const e=t.oxw();t.xp6(1),t.HOy("",t.lcZ(2,4,t.lcZ(3,6,"this_customer_has"))," ",null==e.customer?null:e.customer.discount," ","%"," ",t.lcZ(4,8,t.lcZ(5,10,"discount")),"")}}function B(r,s){if(1&r){const e=t.EpF();t.TgZ(0,"div",20)(1,"app-file-upload",46),t.NdJ("onValueChange",function(u){t.CHM(e);const m=t.oxw();return t.KtG(m.onFileSelected(u))}),t.qZA()()}}function R(r,s){if(1&r){const e=t.EpF();t.TgZ(0,"tr",47)(1,"td"),t._UZ(2,"app-text",48),t.qZA(),t.TgZ(3,"td"),t._UZ(4,"app-text",49),t.qZA(),t.TgZ(5,"td"),t._UZ(6,"app-text",49),t.qZA(),t.TgZ(7,"td"),t._UZ(8,"app-text",49),t.qZA(),t.TgZ(9,"td"),t._UZ(10,"app-text",49),t.qZA(),t.TgZ(11,"td"),t._UZ(12,"app-text",49),t.qZA(),t.TgZ(13,"td",50)(14,"i",51),t.NdJ("click",function(){const m=t.CHM(e).index,d=t.oxw();return t.KtG(d.deleteProductFromList(m))}),t.qZA(),t.TgZ(15,"i",52),t.NdJ("click",function(){const u=t.CHM(e),m=u.$implicit,d=u.index,T=t.oxw();return t.KtG(T.fillDataToUpdateProduct(m.value,d))}),t.qZA()()()}if(2&r){const e=s.$implicit;t.xp6(2),t.Q6J("readOnly",!0)("value",e.value.product_name),t.xp6(2),t.Q6J("readOnly",!0)("value",e.value.quantity)("text","")("placeholder",""),t.xp6(2),t.Q6J("readOnly",!0)("value",e.value.discount_amount)("text","")("placeholder",""),t.xp6(2),t.Q6J("readOnly",!0)("value",e.value.discount_type)("text","")("placeholder",""),t.xp6(2),t.Q6J("readOnly",!0)("value",e.value.product_price)("text","")("placeholder",""),t.xp6(2),t.Q6J("readOnly",!0)("value",e.value.total_product_price)("text","")("placeholder","")}}function V(r,s){if(1&r){const e=t.EpF();t.TgZ(0,"i",53),t.NdJ("click",function(){t.CHM(e);const u=t.oxw();return t.KtG(u.addProductToList())}),t.qZA()}}function j(r,s){if(1&r){const e=t.EpF();t.TgZ(0,"i",54),t.NdJ("click",function(){t.CHM(e);const u=t.oxw();return t.KtG(u.updateProductOnList())}),t.qZA()}}function Y(r,s){if(1&r&&(t.TgZ(0,"p",55),t._uU(1),t.qZA()),2&r){const e=t.oxw();t.xp6(1),t.hij("Check Credit Limit ",null==e.customer?null:e.customer.credit_limit,"")}}let D=(()=>{class r{constructor(e,o,u,m,d,T){this.fb=e,this.router=o,this.route=u,this.salesOrderService=m,this.toastr=d,this.http=T,this.currencyConfig=x.w,this.permissions=f,this.PaymentConfig=l,this.taxConfig=q.F,this.taxes=[],this.discount_type=[{id:"percentage",name:"percentage"},{id:"fixed",name:"fixed"}],this.customers=[],this.products=[],this.unsubscribe=new Z.x,this.formGroup=this.initForm(),this.title="add_new_sales_order",this.actionSale="create",this.total=0,this.totalAfterDiscountAndTax=0,this.discountInvoice=0,this.taxInvoice=0,this.productAction="create",this.savedAccounts=[],this.index=0,this.messageError="",this.values=new FormData,this.fileName=""}ngOnInit(){this.route.snapshot.paramMap.get("id")&&(this.activeId=this.route.snapshot.paramMap.get("id"),this.title="update_sale",this.actionSale="update",this.route.data.pipe((0,A.R)(this.unsubscribe)).subscribe({next:e=>{this.data=e,this.fillForm(this.data.sale.data)},error:e=>{}})),this.salesOrderService.getTaxes().pipe((0,A.R)(this.unsubscribe)).subscribe({next:e=>{this.taxes=e.data}}),this.salesOrderService.getProducts().pipe((0,A.R)(this.unsubscribe)).subscribe({next:e=>{this.products=e.data}}),this.salesOrderService.getCustomers().pipe((0,A.R)(this.unsubscribe)).subscribe({next:e=>{this.customers=e.data}})}initForm(){return this.fb.group({id:[Number],customer_id:["",[h.kI.required]],customer_discount:[""],invoice_number:["",[h.kI.required]],delivery_date:["",[h.kI.required]],currency_id:[""],note:[""],file:[""],tax_id:[""],products:this.fb.array([]),product:this.fb.group({id:[Number],product_id:[""],quantity:[1,[h.kI.required]],discount_amount:[""],discount_type:[""],product_name:[""],product_price:[""],total_product_price:[""]})})}get productsAtSale(){return this.formGroup.get("products")}get productAtSale(){return this.formGroup.get("product")}onSubmit(){this.formGroup.invalid?this.formGroup.markAllAsTouched():this.productsAtSale.length>=1?(this.convertFormGroupToFormData(),"create"==this.actionSale?this.salesOrderService.create(this.values).subscribe(e=>{this.toastr.success(e.message),this.errors=null,this.clearAllForm(),this.router.navigate(["/key/sales/sales-order"])},e=>{this.errors=e.error.errors}):this.salesOrderService.update(this.values).subscribe(e=>{this.toastr.success(e.message),this.errors=null,this.clearAllForm(),this.router.navigate(["/key/sales/sales-order"])},e=>{this.errors=e.error.errors})):this.toastr.error("must_be_add_product_1_at_least")}convertFormGroupToFormData(){this.values.set("id",this.formGroup.get("id")?.value),this.values.set("tax_id",this.formGroup.get("tax_id")?.value),this.values.set("customer_id",this.formGroup.get("customer_id")?.value),this.values.set("customer_discount",this.formGroup.get("customer_discount")?.value),this.values.set("invoice_number",this.formGroup.get("invoice_number")?.value),this.values.set("delivery_date",this.formGroup.get("delivery_date")?.value),this.values.set("currency_id",this.formGroup.get("currency_id")?.value),this.values.set("note",this.formGroup.get("note")?.value);let e=this.formGroup.get("products");for(let o=0;o<e.length;o++){const u=e.at(o),m=u.get("product_id")?.value,d=u.get("quantity")?.value,T=u.get("discount_amount")?.value,L=u.get("discount_type")?.value;this.values.set(`products[${o}][discount_amount]`,T),this.values.set(`products[${o}][discount_type]`,L),this.values.set(`products[${o}][quantity]`,d),this.values.set(`products[${o}][product_id]`,m)}}getProduct(e){let o=e.value;console.log(o),this.product=this.products.filter(u=>u.id==o)[0],this.formGroup.get("product")?.patchValue({product_name:this.product?.name,product_price:this.product?.selling_price})}getTax(e){let o=e.value;this.tax=this.taxes.filter(u=>u.id==o)[0],this.calcTotal()}getDiscount_type(e){}getCustomer(e){let o=e.value;this.customer=this.customers.filter(u=>u.id==o)[0],this.customer.discount?this.formGroup.get("customer_discount")?.patchValue(this.customer.discount):this.formGroup.get("customer_discount")?.patchValue(0),this.productsAtSale.length>0&&this.calcTotal()}getQuantity(e){console.log(e)}deleteProductFromList(e){this.productsAtSale.removeAt(e),this.total<=0&&this.formGroup.get("tax_id")?.reset(),this.calcTotal()}addProductToList(){let e=[];this.productAtSale?.value.product_id&&""!=this.productAtSale?.value.product_id?(e=this.productsAtSale.controls.map(o=>o.value.product_id),e.includes(this.productAtSale?.value.product_id)?this.toastr.error("this_product_is_exist"):this.productAtSale?.value.quantity>0?this.productAtSale?.value.discount_amount>0?"percentage"==this.productAtSale?.value.discount_type?(this.productsAtSale.push(this.fb.group({product_id:this.productAtSale?.value.product_id,quantity:this.productAtSale?.value.quantity,discount:this.productAtSale?.value.discount,product_name:this.productAtSale?.value.product_name,product_price:this.productAtSale?.value.product_price,discount_type:this.productAtSale?.value.discount_type,discount_amount:this.productAtSale?.value.discount_amount,total_product_price:((parseFloat(this.productAtSale?.value.product_price)-this.productAtSale?.value.discount_amount/100*parseFloat(this.productAtSale?.value.product_price))*parseInt(this.productAtSale?.value.quantity)).toFixed(2)})),this.calcTotal(),this.clearProductForm()):"fixed"==this.productAtSale?.value.discount_type?(this.productsAtSale.push(this.fb.group({product_id:this.productAtSale?.value.product_id,quantity:this.productAtSale?.value.quantity,discount:this.productAtSale?.value.discount,product_name:this.productAtSale?.value.product_name,product_price:this.productAtSale?.value.product_price,discount_type:this.productAtSale?.value.discount_type,discount_amount:this.productAtSale?.value.discount_amount,total_product_price:(parseFloat(this.productAtSale?.value.product_price)*parseInt(this.productAtSale?.value.quantity)-this.productAtSale?.value.discount_amount).toFixed(2)})),this.calcTotal(),this.clearProductForm()):this.toastr.error("select_apply_on_discount_type"):(this.productsAtSale.push(this.fb.group({product_id:this.productAtSale?.value.product_id,quantity:this.productAtSale?.value.quantity,discount:this.productAtSale?.value.discount,product_name:this.productAtSale?.value.product_name,product_price:this.productAtSale?.value.product_price,discount_type:this.productAtSale?.value.discount_type,discount_amount:0,total_product_price:(parseFloat(this.productAtSale?.value.product_price)*parseInt(this.productAtSale?.value.quantity)).toFixed(2)})),this.calcTotal(),this.clearProductForm()):this.toastr.error("quantity_must_be_1_or_more")):this.toastr.error("select_product")}calcTotal(){this.total=0,this.productsAtSale.controls.forEach(e=>{this.total+=parseFloat(e.value.total_product_price)}),this.discountInvoice=parseFloat(this.customer.discount)*this.total/100,this.totalAfterDiscountAndTax=this.total-this.discountInvoice,this.formGroup.get("tax_id")?.value?(this.taxInvoice=this.totalAfterDiscountAndTax*this.tax.percentage/100,this.totalAfterDiscountAndTax=this.totalAfterDiscountAndTax+this.taxInvoice):this.taxInvoice=0}fillForm(e){this.formGroup.patchValue({id:e.id,customer_id:e.purchasable.id,invoice_number:e.invoice_number,date:e.date,stock_id:e.stock.id,payment_type_id:e.payment_type_id,payment_account_id:e.payment_account_id}),e.products.forEach(o=>{this.productsAtSale.push(this.fb.group({product_id:o.id,quantity:o.pivot.quantity,discount:o.pivot.discount,product_name:o.name,product_price:o.selling_price,total_product_price:((parseFloat(o?.selling_price)-o.pivot.discount/100*parseFloat(o?.selling_price))*parseInt(o.pivot.quantity)).toFixed(2)}))}),this.total=parseFloat(e.total)}fillDataToUpdateProduct(e,o){this.index=o,this.productAction="update",this.formGroup.get("product")?.patchValue({product_name:e.product_name,product_id:e.product_id,quantity:e.quantity,discount_type:e.discount_type,discount_amount:e.discount_amount,product_price:e.product_price,total_product_price:e.total_product_price})}updateProductOnList(){this.productsAtSale.controls.map((e,o)=>{this.productAtSale?.value?.product_id==e.value.product_id&&(this.index==o?this.productAtSale?.value?.quantity>0?(this.productAtSale?.value.discount_amount>0?"percentage"==this.productAtSale?.value.discount_type?this.productsAtSale.controls[this.index].patchValue({product_id:this.productAtSale?.value?.product_id,product_name:this.productAtSale?.value?.product_name,quantity:this.productAtSale?.value?.quantity,discount_type:this.productAtSale?.value?.discount_type,discount_amount:this.productAtSale?.value?.discount_amount,product_price:this.productAtSale?.value?.product_price,total_product_price:((parseFloat(this.productAtSale?.value.product_price)-this.productAtSale?.value.discount_amount/100*parseFloat(this.productAtSale?.value.product_price))*parseInt(this.productAtSale?.value.quantity)).toFixed(2)}):"fixed"==this.productAtSale?.value.discount_type?this.productsAtSale.controls[this.index].patchValue({product_id:this.productAtSale?.value?.product_id,product_name:this.productAtSale?.value?.product_name,quantity:this.productAtSale?.value?.quantity,discount_type:this.productAtSale?.value?.discount_type,discount_amount:this.productAtSale?.value?.discount_amount,product_price:this.productAtSale?.value?.product_price,total_product_price:(parseFloat(this.productAtSale?.value.product_price)*parseInt(this.productAtSale?.value.quantity)-this.productAtSale?.value.discount_amount).toFixed(2)}):this.toastr.error("select_apply_on_discount_type"):this.productsAtSale.controls[this.index].patchValue({product_id:this.productAtSale?.value?.product_id,product_name:this.productAtSale?.value?.product_name,quantity:this.productAtSale?.value?.quantity,discount_type:this.productAtSale?.value?.discount_type,discount_amount:0,product_price:this.productAtSale?.value?.product_price,total_product_price:(parseFloat(this.productAtSale?.value.product_price)*parseInt(this.productAtSale?.value.quantity)).toFixed(2)}),this.calcTotal(),this.clearProductForm(),this.productAction="create"):this.toastr.error("quantity_must_be_1_or_more"):this.toastr.error("this_product_is_exist"))})}clearProductForm(){this.productAction="create",this.productAtSale?.patchValue({product_name:[""],product_id:[""],quantity:[""],discount_type:[""],discount_amount:[""],product_price:[""],total_product_price:[""]})}clearAllForm(){for(;0!==this.productsAtSale.length;)this.productsAtSale.removeAt(0);this.formGroup.reset(),this.total=0;for(const[e,o]of this.values)this.values.delete(e)}onFileSelected(e){if(e.target.files[0])for(const[o,u]of Object.entries(e.target.files))this.values.set(`file[${o}]`,e.target.files[o])}ngOnDestroy(){this.unsubscribe.next(!0),this.unsubscribe.complete()}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(h.qu),t.Y36(_.F0),t.Y36(_.gz),t.Y36(y),t.Y36(p._W),t.Y36(g.O))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-new-sales-order"]],decls:116,vars:134,consts:[[1,"page-card"],[1,"header","row","justify-content-between","align-items-center"],[1,"title","col-md-6"],["routerLink","/key/sales/sales-order",1,"fa-solid","fa-arrow-left","me-2"],[1,"d-flex","align-items-center","justify-content-end","g-2","col-md-6"],["class","px-1",4,"ngIf"],[1,"px-1"],["routerLink","/key/sales/sales-order",1,"btn-cancel",3,"iconPos","icon","text"],[1,"btn-filter",3,"text","iconPos","icon","click"],[4,"ngFor","ngForOf"],[3,"formGroup","onSubmit"],[1,"row"],[1,"col-md-8","my-3"],["ngDefaultControl","","formControlName","customer_id",3,"text","data","optionLabel","optionValue","placeholder","onDropDownChange"],["class","pt-2",4,"ngIf"],[1,"col-md-4","my-3"],["ngDefaultControl","","formControlName","customer_discount",3,"readOnly","text","placeholder"],["ngDefaultControl","","formControlName","invoice_number",3,"text","placeholder"],["ngDefaultControl","","formControlName","delivery_date",3,"showIcon","text"],["ngDefaultControl","","formControlName","currency_id",3,"text","request","optionLabel","optionValue","placeholder"],[1,"col-md-6","my-3"],["ngDefaultControl","","formControlName","note",3,"text"],["class"," col-md-6 my-3",4,"ngIf"],[1,"table-responsive"],[1,"table"],[1,"table-head"],["scope","col",1,"head"],["formArrayName","products",4,"ngFor","ngForOf"],["formGroupName","product"],["formControlName","product_id","placeholder","select",3,"readOnly","data","optionLabel","optionValue","onDropDownChange"],["formControlName","quantity",1,"''",3,"readOnly","showButtons","text","placeholder","onDropDownChange"],["formControlName","discount_amount",3,"readOnly","showButtons","text","placeholder"],["formControlName","discount_type","placeholder","select",3,"readOnly","data","optionLabel","optionValue","showClear","onDropDownChange"],["formControlName","product_price",3,"readOnly","text","placeholder"],["formControlName","total_product_price",3,"readOnly","text","placeholder"],[1,"action","d-flex","mt-3"],[1,"fa-solid","fa-cancel","fs-4","text-danger","mx-2","pointer",3,"click"],["class","fa-solid fa-plus fs-4 main-color pointer",3,"click",4,"ngIf"],["class","fa-solid fa-check fs-4 main-color mx-2 pointer",3,"click",4,"ngIf"],[1,"title"],[1,"btn-filter","text-light"],["formControlName","tax_id","placeholder","tax",3,"readOnly","data","optionLabel","optionValue","showClear","onDropDownChange"],["class","text-error text-center",4,"ngIf"],[1,"btn-cancel",3,"text","iconPos","icon","routerLink"],[1,"alert","alert-danger","text-center"],[1,"pt-2"],["label","image","ngDefaultControl","","formControlName","file",3,"onValueChange"],["formArrayName","products"],[3,"readOnly","value"],[3,"readOnly","value","text","placeholder"],[1,"action","d-flex"],[1,"fa-solid","fa-trash","fs-4","text-danger","mx-2","pointer",3,"click"],[1,"fa-solid","fa-pen-to-square","fs-4","main-color","mx-2","pointer",3,"click"],[1,"fa-solid","fa-plus","fs-4","main-color","pointer",3,"click"],[1,"fa-solid","fa-check","fs-4","main-color","mx-2","pointer",3,"click"],[1,"text-error","text-center"]],template:function(e,o){if(1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"h5",2),t._UZ(3,"i",3),t._uU(4),t.ALo(5,"titlecase"),t.ALo(6,"translate"),t.qZA(),t.TgZ(7,"div",4),t.YNc(8,E,2,4,"div",5),t.TgZ(9,"div",6),t._UZ(10,"app-button",7),t.qZA(),t.TgZ(11,"div",6)(12,"app-button",8),t.NdJ("click",function(){return o.onSubmit()}),t.qZA()()()(),t.YNc(13,G,3,1,"div",9),t.ALo(14,"keyvalue"),t.TgZ(15,"app-form",10),t.NdJ("onSubmit",function(){return o.onSubmit()}),t.TgZ(16,"div",11)(17,"div",12)(18,"app-dropdown",13),t.NdJ("onDropDownChange",function(m){return o.getCustomer(m)}),t.qZA(),t.YNc(19,Q,6,12,"p",14),t.qZA(),t.TgZ(20,"div",15),t._UZ(21,"app-text",16),t.qZA(),t.TgZ(22,"div",15),t._UZ(23,"app-text",17),t.qZA(),t.TgZ(24,"div",15),t._UZ(25,"app-date",18),t.qZA(),t.TgZ(26,"div",15),t._UZ(27,"app-dropdown",19),t.qZA(),t.TgZ(28,"div",20),t._UZ(29,"app-textarea",21),t.qZA(),t.YNc(30,B,2,0,"div",22),t.qZA(),t.TgZ(31,"div",23)(32,"table",24)(33,"thead",25)(34,"tr")(35,"th",26),t._uU(36),t.ALo(37,"translate"),t.qZA(),t.TgZ(38,"th",26),t._uU(39),t.ALo(40,"translate"),t.qZA(),t.TgZ(41,"th",26),t._uU(42),t.ALo(43,"translate"),t.qZA(),t.TgZ(44,"th",26),t._uU(45),t.ALo(46,"translate"),t.qZA(),t.TgZ(47,"th",26),t._uU(48),t.ALo(49,"translate"),t.qZA(),t.TgZ(50,"th",26),t._uU(51),t.ALo(52,"translate"),t.qZA(),t.TgZ(53,"th",26),t._uU(54),t.ALo(55,"translate"),t.qZA()()(),t.TgZ(56,"tbody"),t.YNc(57,R,16,22,"tr",27),t.TgZ(58,"tr",28)(59,"td")(60,"app-dropdown",29),t.NdJ("onDropDownChange",function(m){return o.getProduct(m)}),t.qZA()(),t.TgZ(61,"td")(62,"app-number-input",30),t.NdJ("onDropDownChange",function(m){return o.getQuantity(m)}),t.qZA()(),t.TgZ(63,"td"),t._UZ(64,"app-number-input",31),t.qZA(),t.TgZ(65,"td")(66,"app-dropdown",32),t.NdJ("onDropDownChange",function(m){return o.getDiscount_type(m)}),t.qZA()(),t.TgZ(67,"td"),t._UZ(68,"app-text",33),t.qZA(),t.TgZ(69,"td"),t._UZ(70,"app-text",34),t.qZA(),t.TgZ(71,"td",35)(72,"i",36),t.NdJ("click",function(){return o.clearProductForm()}),t.qZA(),t.YNc(73,V,1,0,"i",37),t.YNc(74,j,1,0,"i",38),t.qZA()(),t.TgZ(75,"tr",39)(76,"th",40),t._uU(77),t.ALo(78,"translate"),t.qZA(),t.TgZ(79,"th",40),t._uU(80),t.qZA(),t.TgZ(81,"th",40),t._uU(82),t.ALo(83,"translate"),t.qZA(),t.TgZ(84,"th",40)(85,"app-dropdown",41),t.NdJ("onDropDownChange",function(m){return o.getTax(m)}),t.qZA()(),t.TgZ(86,"th",40),t._uU(87),t.ALo(88,"translate"),t.qZA(),t.TgZ(89,"th",40),t._uU(90),t.ALo(91,"translate"),t.qZA(),t.TgZ(92,"th",40),t._uU(93),t.ALo(94,"translate"),t.qZA()(),t.TgZ(95,"tr",39)(96,"th",40),t._uU(97),t.ALo(98,"titlecase"),t.ALo(99,"translate"),t.qZA(),t.TgZ(100,"th",40),t._uU(101),t.qZA(),t.TgZ(102,"th",40),t._uU(103),t.ALo(104,"translate"),t.qZA(),t.TgZ(105,"th",40),t._uU(106),t.qZA(),t.TgZ(107,"th",40),t._uU(108),t.ALo(109,"translate"),t.qZA(),t.TgZ(110,"th",40),t._uU(111),t.qZA(),t.TgZ(112,"th",40),t._uU(113),t.ALo(114,"translate"),t.qZA()()()(),t.YNc(115,Y,2,1,"p",42),t.qZA()()()),2&e){let u,m,d,T,L;t.xp6(4),t.hij("",t.lcZ(5,94,t.lcZ(6,96,o.title))," "),t.xp6(4),t.Q6J("ngIf","update_sale"==o.title),t.xp6(2),t.Q6J("iconPos","left")("icon","fa-solid fa-ban")("text","cancel"),t.xp6(2),t.Q6J("text","save")("iconPos","left")("icon","fa-solid fa-check"),t.xp6(1),t.Q6J("ngForOf",t.lcZ(14,98,o.errors)),t.xp6(2),t.Q6J("formGroup",o.formGroup),t.xp6(3),t.Tol("d-flex flex-column justify-content-between"),t.Q6J("text","customer")("data",o.customers)("optionLabel","name")("optionValue","id")("placeholder","select"),t.xp6(1),t.Q6J("ngIf",null==(u=o.formGroup.get("customer_id"))?null:u.value),t.xp6(2),t.Tol("d-flex flex-column justify-content-between "),t.Q6J("readOnly",!0)("text","customer_discount")("placeholder",""),t.xp6(2),t.Tol("d-flex flex-column justify-content-between "),t.Q6J("text","invoice_number")("placeholder",""),t.xp6(2),t.Tol("d-flex flex-column justify-content-between "),t.Q6J("showIcon",!1)("text","date"),t.xp6(2),t.Tol("d-flex flex-column justify-content-between"),t.Q6J("text","currency")("request",o.currencyConfig.api.get)("optionLabel","name")("optionValue","id")("placeholder","select"),t.xp6(2),t.Tol("d-flex flex-column justify-content-between "),t.Q6J("text","note"),t.xp6(1),t.Q6J("ngIf","add_new_sales_order"==o.title),t.xp6(6),t.Oqu(t.lcZ(37,100,"product")),t.xp6(3),t.Oqu(t.lcZ(40,102,"quantity")),t.xp6(3),t.Oqu(t.lcZ(43,104,"discount")),t.xp6(3),t.Oqu(t.lcZ(46,106,"apply_on")),t.xp6(3),t.Oqu(t.lcZ(49,108,"price")),t.xp6(3),t.Oqu(t.lcZ(52,110,"total_price")),t.xp6(3),t.Oqu(t.lcZ(55,112,"actions")),t.xp6(3),t.Q6J("ngForOf",o.productsAtSale.controls),t.xp6(3),t.Q6J("readOnly",!(null!=(m=o.formGroup.get("customer_id"))&&m.value)||"update"==o.productAction)("data",o.products)("optionLabel","name")("optionValue","id"),t.xp6(2),t.Q6J("readOnly",!(null!=(d=o.formGroup.get("product.product_id"))&&d.value))("showButtons",!1)("text","")("placeholder",""),t.xp6(2),t.Q6J("readOnly",!(null!=(T=o.formGroup.get("product.product_id"))&&T.value))("showButtons",!1)("text","")("placeholder",""),t.xp6(2),t.Q6J("readOnly",!(null!=(L=o.formGroup.get("product.product_id"))&&L.value))("data",o.discount_type)("optionLabel","name")("optionValue","id")("showClear",!0),t.xp6(2),t.Q6J("readOnly",!0)("text","")("placeholder",""),t.xp6(2),t.Q6J("readOnly",!0)("text","")("placeholder",""),t.xp6(3),t.Q6J("ngIf","create"==o.productAction),t.xp6(1),t.Q6J("ngIf","update"==o.productAction),t.xp6(3),t.Oqu(t.lcZ(78,114,"total")),t.xp6(3),t.Oqu(o.total.toFixed(2)),t.xp6(2),t.Oqu(t.lcZ(83,116,"")),t.xp6(3),t.Q6J("readOnly",o.total<=0)("data",o.taxes)("optionLabel","name")("optionValue","id")("showClear",!0),t.xp6(2),t.Oqu(t.lcZ(88,118,"")),t.xp6(3),t.Oqu(t.lcZ(91,120,"")),t.xp6(3),t.Oqu(t.lcZ(94,122,"")),t.xp6(4),t.Oqu(t.lcZ(98,124,t.lcZ(99,126,"total_amount"))),t.xp6(4),t.Oqu(o.totalAfterDiscountAndTax.toFixed(2)),t.xp6(2),t.Oqu(t.lcZ(104,128,"discount")),t.xp6(3),t.Oqu(o.discountInvoice.toFixed(2)),t.xp6(2),t.Oqu(t.lcZ(109,130,"tax")),t.xp6(3),t.Oqu(o.taxInvoice.toFixed(2)),t.xp6(2),t.Oqu(t.lcZ(114,132,"")),t.xp6(2),t.Q6J("ngIf",o.customer&&(null==o.customer?null:o.customer.credit_limit)<o.totalAfterDiscountAndTax)}},dependencies:[a.sg,a.O5,_.rH,O.U,h.Fj,h.JJ,h.JL,h.sg,h.u,h.x0,h.CE,w.T,I.D,N.J,P.I,J.R,M.Y,F.r,a.rS,a.Nd,S.X$],styles:[".page-card[_ngcontent-%COMP%]     app-file-upload p{height:65px;padding-top:20px!important}"]}),r})(),k=(()=>{class r{constructor(e,o){this.route=e,this.salesOrderService=o,this.id=2,this.unsubscribe=new Z.x,this.route.params.subscribe(u=>{this.id=u.id})}ngOnInit(){this.route.data.pipe((0,A.R)(this.unsubscribe)).subscribe({next:e=>{this.data=e.invoice.data,console.log(this.data)}})}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(_.gz),t.Y36(y))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-view-sales-order"]],decls:162,vars:111,consts:[[1,"page-card"],[1,"d-flex","align-items-center"],["routerLink","/key/sales/sales-order",1,"pi","pi-arrow-left","px-3",2,"font-size","1.5rem"],[1,"fw-medium","fs-3"],[1,"row","mt-5"],[1,"col-4"],[1,"p-2","rounded-5","detail"],[1,"p-4"],["translate","customer_contact",1,"fw-bold","mb-4","fs-2"],[1,"invisible"],["translate","billing_info",1,"fw-bold","mb-4","fs-2"],["translate","shipping_info",1,"fw-bold","mb-4","fs-2"],[1,"table-responsive","my-5"],[1,"table","table-striped","table-hover"],[1,"table-head"],["scope","col"],[1,"title"],[1,""],[1,"btn-filter","text-light"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"div",1),t._UZ(2,"i",2),t.TgZ(3,"h4",3),t._uU(4),t.ALo(5,"titlecase"),t.ALo(6,"translate"),t.qZA()(),t.TgZ(7,"div",4)(8,"div",5)(9,"div",6)(10,"div",7),t._UZ(11,"h3",8),t.TgZ(12,"p"),t._uU(13),t.qZA(),t.TgZ(14,"p"),t._uU(15),t.qZA(),t.TgZ(16,"p"),t._uU(17),t.qZA(),t.TgZ(18,"p",9),t._uU(19),t.qZA()()()(),t.TgZ(20,"div",5)(21,"div",6)(22,"div",7),t._UZ(23,"h3",10),t.TgZ(24,"p"),t._uU(25),t.qZA(),t.TgZ(26,"p"),t._uU(27),t.qZA(),t.TgZ(28,"p"),t._uU(29),t.qZA()()()(),t.TgZ(30,"div",5)(31,"div",6)(32,"div",7),t._UZ(33,"h3",11),t.TgZ(34,"p"),t._uU(35),t.qZA(),t.TgZ(36,"p"),t._uU(37),t.qZA(),t.TgZ(38,"p"),t._uU(39),t.qZA()()()()(),t.TgZ(40,"div",12)(41,"table",13)(42,"thead",14)(43,"tr")(44,"th",15),t._uU(45),t.ALo(46,"translate"),t.qZA(),t.TgZ(47,"th",15),t._uU(48),t.ALo(49,"translate"),t.qZA(),t.TgZ(50,"th",15),t._uU(51),t.ALo(52,"translate"),t.qZA(),t.TgZ(53,"th",15),t._uU(54),t.ALo(55,"translate"),t.qZA(),t.TgZ(56,"th",15),t._uU(57),t.ALo(58,"translate"),t.qZA(),t.TgZ(59,"th",15),t._uU(60),t.ALo(61,"translate"),t.qZA()()(),t.TgZ(62,"tbody")(63,"tr")(64,"th"),t._uU(65),t.qZA(),t.TgZ(66,"th"),t._uU(67),t.qZA(),t.TgZ(68,"th"),t._uU(69),t.qZA(),t.TgZ(70,"th"),t._uU(71),t.qZA(),t.TgZ(72,"th"),t._uU(73),t.qZA(),t.TgZ(74,"th"),t._uU(75),t.qZA()(),t.TgZ(76,"tr")(77,"th"),t._uU(78),t.qZA(),t.TgZ(79,"th"),t._uU(80),t.qZA(),t.TgZ(81,"th"),t._uU(82),t.qZA(),t.TgZ(83,"th"),t._uU(84),t.qZA(),t.TgZ(85,"th"),t._uU(86),t.qZA(),t.TgZ(87,"th"),t._uU(88),t.qZA()(),t.TgZ(89,"tr")(90,"th"),t._uU(91),t.qZA(),t.TgZ(92,"th"),t._uU(93),t.qZA(),t.TgZ(94,"th"),t._uU(95),t.qZA(),t.TgZ(96,"th"),t._uU(97),t.qZA(),t.TgZ(98,"th"),t._uU(99),t.qZA(),t.TgZ(100,"th"),t._uU(101),t.qZA()(),t.TgZ(102,"tr",16)(103,"th",17),t._uU(104),t.ALo(105,"titlecase"),t.ALo(106,"translate"),t.qZA(),t.TgZ(107,"th",17),t._uU(108),t.ALo(109,"translate"),t.qZA(),t.TgZ(110,"th",17),t._uU(111),t.ALo(112,"translate"),t.qZA(),t.TgZ(113,"th",17),t._uU(114),t.ALo(115,"translate"),t.qZA(),t.TgZ(116,"th",17),t._uU(117),t.ALo(118,"translate"),t.qZA(),t.TgZ(119,"th",17),t._uU(120),t.ALo(121,"translate"),t.qZA()(),t.TgZ(122,"tr",16)(123,"th",17),t._uU(124),t.ALo(125,"titlecase"),t.ALo(126,"translate"),t.qZA(),t.TgZ(127,"th",17),t._uU(128),t.ALo(129,"translate"),t.qZA(),t.TgZ(130,"th",17),t._uU(131),t.ALo(132,"translate"),t.qZA(),t.TgZ(133,"th",17),t._uU(134),t.ALo(135,"translate"),t.qZA(),t.TgZ(136,"th",17),t._uU(137),t.ALo(138,"translate"),t.qZA(),t.TgZ(139,"th",17),t._uU(140),t.ALo(141,"translate"),t.qZA()(),t.TgZ(142,"tr",16)(143,"th",18),t._uU(144),t.ALo(145,"titlecase"),t.ALo(146,"translate"),t.qZA(),t.TgZ(147,"th",18),t._uU(148),t.ALo(149,"translate"),t.qZA(),t.TgZ(150,"th",18),t._uU(151),t.ALo(152,"translate"),t.qZA(),t.TgZ(153,"th",18),t._uU(154),t.ALo(155,"translate"),t.qZA(),t.TgZ(156,"th",18),t._uU(157),t.ALo(158,"translate"),t.qZA(),t.TgZ(159,"th",18),t._uU(160),t.ALo(161,"translate"),t.qZA()()()()()()),2&e&&(t.xp6(4),t.Oqu(t.lcZ(5,53,t.lcZ(6,55,"sales_order_details"))),t.xp6(9),t.Oqu(null==o.data||null==o.data.customer?null:o.data.customer.name),t.xp6(2),t.Oqu(null==o.data||null==o.data.customer?null:o.data.customer.email),t.xp6(2),t.Oqu(null==o.data||null==o.data.customer?null:o.data.customer.contact),t.xp6(2),t.Oqu(null==o.data||null==o.data.customer?null:o.data.customer.name),t.xp6(6),t.Oqu(null==o.data||null==o.data.customer||null==o.data.customer.billing_address?null:o.data.customer.billing_address.address),t.xp6(2),t.Oqu(null==o.data||null==o.data.customer||null==o.data.customer.billing_address?null:o.data.customer.billing_address.country),t.xp6(2),t.Oqu(null==o.data||null==o.data.customer||null==o.data.customer.billing_address?null:o.data.customer.billing_address.phone),t.xp6(6),t.Oqu(null==o.data||null==o.data.customer||null==o.data.customer.address?null:o.data.customer.address.address),t.xp6(2),t.Oqu(null==o.data||null==o.data.customer||null==o.data.customer.address?null:o.data.customer.address.country),t.xp6(2),t.Oqu(null==o.data||null==o.data.customer||null==o.data.customer.address?null:o.data.customer.address.phone),t.xp6(6),t.Oqu(t.lcZ(46,57,"product")),t.xp6(3),t.Oqu(t.lcZ(49,59,"quantity")),t.xp6(3),t.Oqu(t.lcZ(52,61,"discount")),t.xp6(3),t.Oqu(t.lcZ(55,63,"price")),t.xp6(3),t.Oqu(t.lcZ(58,65,"total_price")),t.xp6(3),t.Oqu(t.lcZ(61,67,"")),t.xp6(5),t.Oqu("product"),t.xp6(2),t.Oqu("1"),t.xp6(2),t.Oqu("10"),t.xp6(2),t.Oqu("100"),t.xp6(2),t.Oqu("100"),t.xp6(2),t.Oqu(""),t.xp6(3),t.Oqu("product"),t.xp6(2),t.Oqu("1"),t.xp6(2),t.Oqu("10"),t.xp6(2),t.Oqu("100"),t.xp6(2),t.Oqu("100"),t.xp6(2),t.Oqu(""),t.xp6(3),t.Oqu("product"),t.xp6(2),t.Oqu("1"),t.xp6(2),t.Oqu("10"),t.xp6(2),t.Oqu("100"),t.xp6(2),t.Oqu("100"),t.xp6(2),t.Oqu(""),t.xp6(3),t.Oqu(t.lcZ(105,69,t.lcZ(106,71,"tax"))),t.xp6(4),t.Oqu(t.lcZ(109,73,"")),t.xp6(3),t.Oqu(t.lcZ(112,75,"")),t.xp6(3),t.Oqu(t.lcZ(115,77,"")),t.xp6(3),t.Oqu(t.lcZ(118,79,"")),t.xp6(3),t.Oqu(t.lcZ(121,81,"100")),t.xp6(4),t.Oqu(t.lcZ(125,83,t.lcZ(126,85,"Total Before Discount "))),t.xp6(4),t.Oqu(t.lcZ(129,87,"")),t.xp6(3),t.Oqu(t.lcZ(132,89,"")),t.xp6(3),t.Oqu(t.lcZ(135,91,"")),t.xp6(3),t.Oqu(t.lcZ(138,93,"")),t.xp6(3),t.Oqu(t.lcZ(141,95,"330")),t.xp6(4),t.Oqu(t.lcZ(145,97,t.lcZ(146,99,"Total"))),t.xp6(4),t.Oqu(t.lcZ(149,101,"")),t.xp6(3),t.Oqu(t.lcZ(152,103,"")),t.xp6(3),t.Oqu(t.lcZ(155,105,"")),t.xp6(3),t.Oqu(t.lcZ(158,107,"")),t.xp6(3),t.Oqu(t.lcZ(161,109,"230")))},dependencies:[_.rH,S.Pi,a.rS,S.X$],styles:[".detail[_ngcontent-%COMP%]{background-color:var(--lightGray)}.detail[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:500}i[_ngcontent-%COMP%]{cursor:pointer}.table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-size:14px!important}"]}),r})();const W=r=>{return{cols:[{field:"id",label:"code",class:""},{field:"customer_name",label:"customer_name",class:""},{field:"delivery_date",label:"delivery_date",format:s=>s.delivery_date?s.delivery_date:"-"},{field:"quantity",label:"quantity",format:s=>s.quantity?s.quantity:"-"},{field:"note",label:"note",format:s=>s.note?s.note:"-"},{field:"total_amount",label:"total_amount",format:s=>s.total_amount?s.total_amount:"-"},{field:"status",label:"status",custom_class_cel:s=>"approved"==s.status?"status-approved":"pending"==s.status?"status-pending":"status-canceled",class:"text-center"},{label:"action",actions:[{id:f.delete,icon:"trash",class:"main-color",fun:(s=(0,c.Z)(function*(e){return yield r.salesOrderService.delete(e)}),function(o){return s.apply(this,arguments)})},{id:f.edit,icon:"pen-to-square",class:"main-color",route:"update"},{id:f.view,icon:"eye",class:"main-color",route:"view"},{id:f.edit,icon:"fa-solid fa-check",class:"main-color",fun:function(){var s=(0,c.Z)(function*(e){return yield r.salesOrderService.approved(e)});return function(o){return s.apply(this,arguments)}}(),classCondition:"d-none",hideBasedOnCondition:!0,condition:s=>"pending"!=s.status},{id:f.edit,icon:"fa-solid fa-ban",class:"fa-solid main-color",fun:function(){var s=(0,c.Z)(function*(e){return yield r.salesOrderService.cancel(e)});return function(o){return s.apply(this,arguments)}}(),classCondition:"d-none",hideBasedOnCondition:!0,condition:s=>"pending"!=s.status}]}],Request:l.api.get};var s};var b=n(6924),K=n(8718),U=n(5946),z=n(5219),H=n(2377),tt=n(359),et=n(5077),ot=n(4811),rt=n(8275);function at(r,s){1&r&&t._UZ(0,"app-button",13),2&r&&(t.Tol("btn-filter"),t.Q6J("text","new"))}const lt=function(r){return[r]},it=[{path:l.page.list,component:(()=>{class r{constructor(e){this.salesOrderService=e,this.tableConfig=W(this),this.filtersConfig=[{field:"search",label:"search",type:b.W.TEXT,placeholder:"search"},{field:"creator_id",label:"created_by",type:b.W.SELECT,options:{value:"id",label:"name"},request:K.x.api.get,placeholder:"select"},{field:"from",label:"from",type:b.W.DATE},{field:"to",label:"to",type:b.W.DATE}],this.sortConfig=[{optionLabel:"label",optionValue:"field",key:"sort_by",placeholder:"sort_by",data:[{label:"Name",field:"name"},{label:"id",field:"id"}]},{optionLabel:"label",optionValue:"field",key:"sort_type",placeholder:"sort_type",data:[{label:U.q.asc,field:U.q.asc},{label:U.q.desc,field:U.q.desc}]}],this.permissions=f,this.icon=z.dv}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(y))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-list-sales-order"]],decls:17,vars:14,consts:[[1,"page-card"],[1,"d-flex","align-items-center","justify-content-between","my-3"],[1,"title"],["routerLink","new",3,"text","class",4,"hasPermissions"],[1,"d-flex","flex-row","align-items-center","justify-content-between"],[3,"SortConfig"],["sort",""],[3,"config"],["filter",""],[1,"table"],[3,"tableConfig","pagination","sort","filter"],[1,"d-flex","align-items-center","justify-content-center"],["pagination",""],["routerLink","new",3,"text"]],template:function(e,o){if(1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"h5",2),t._uU(3),t.ALo(4,"titlecase"),t.ALo(5,"translate"),t.qZA(),t.YNc(6,at,1,3,"app-button",3),t.qZA(),t.TgZ(7,"div",4),t._UZ(8,"ukt-sort",5,6)(10,"ukt-filter",7,8),t.qZA(),t.TgZ(12,"div",9),t._UZ(13,"app-table",10),t.qZA(),t.TgZ(14,"div",11),t._UZ(15,"ukt-pagination",null,12),t.qZA()()),2&e){const u=t.MAs(9),m=t.MAs(11),d=t.MAs(16);t.xp6(3),t.Oqu(t.lcZ(4,8,t.lcZ(5,10,"sales_order_list"))),t.xp6(3),t.Q6J("hasPermissions",t.VKq(12,lt,o.permissions.create)),t.xp6(2),t.Q6J("SortConfig",o.sortConfig),t.xp6(2),t.Q6J("config",o.filtersConfig),t.xp6(3),t.Q6J("tableConfig",o.tableConfig)("pagination",d)("sort",u)("filter",m)}},dependencies:[_.rH,H.a,tt.Q,F.r,et.z,ot.x,rt.z,a.rS,S.X$]}),r})()},{path:l.page.update,component:D},{path:l.page.create,component:D},{path:l.page.view,component:k,resolve:{invoice:(()=>{class r{constructor(e){this.salesOrderService=e}resolve(e){return this.salesOrderService.getSalesOrderById(e.params.id)}}return r.\u0275fac=function(e){return new(e||r)(t.LFG(y))},r.\u0275prov=t.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})()}}];let ut=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({imports:[_.Bz.forChild(it),_.Bz]}),r})();var ct=n(1471),dt=n(2115),pt=n(4413),mt=n(1890),ht=n(1019),_t=n(8096),ft=n(1383);let gt=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({imports:[a.ez,ut,ct.X,dt.u,pt.e,mt.f,ht.i,_t.J,ft.m,S.aw]}),r})()},1771:(C,v,n)=>{n.d(v,{U:()=>f});var a=n(9291),_=n(6223);const l=["*"];let f=(()=>{class Z{constructor(){this.onSubmit=new a.vpe}ngOnChanges(h){}getFormData(){return"function"==typeof this.formData?this.formData(this.formGroup.value):{...this.formGroup.value}}reset(){this.formGroup.reset()}submit(){if(this.formGroup.markAllAsTouched(),this.formGroup.invalid)return;const h=this.getFormData();this.onSubmit.emit(h)}ngAfterContentInit(){}ngAfterContentChecked(){}ngOnDestroy(){}}return Z.\u0275fac=function(h){return new(h||Z)},Z.\u0275cmp=a.Xpm({type:Z,selectors:[["app-form"]],inputs:{formGroup:"formGroup",formData:"formData"},outputs:{onSubmit:"onSubmit"},features:[a.TTD],ngContentSelectors:l,decls:2,vars:1,consts:[[3,"formGroup","ngSubmit"]],template:function(h,x){1&h&&(a.F$t(),a.TgZ(0,"form",0),a.NdJ("ngSubmit",function(){return x.submit()}),a.Hsn(1),a.qZA()),2&h&&a.Q6J("formGroup",x.formGroup)},dependencies:[_._Y,_.JL,_.sg]}),Z})()},4896:(C,v,n)=>{n.d(v,{Y:()=>t});var a=n(9291),_=n(67),l=n(6223),f=n(6814),Z=n(3999);function A(c,g){1&c&&a._UZ(0,"i",7)}function h(c,g){if(1&c&&(a.TgZ(0,"label",4),a._uU(1),a.ALo(2,"titlecase"),a.ALo(3,"translate"),a.TgZ(4,"span",5),a.YNc(5,A,1,0,"i",6),a.qZA()()),2&c){const i=a.oxw();a.xp6(1),a.hij("",a.lcZ(2,2,a.lcZ(3,4,i.label))," "),a.xp6(4),a.Q6J("ngIf",i.control&&(null==i.control.errors?null:i.control.errors.required))}}function x(c,g){if(1&c&&(a.TgZ(0,"p"),a._uU(1),a.ALo(2,"translate"),a.qZA()),2&c){const i=a.oxw();a.xp6(1),a.Oqu(a.lcZ(2,1,i.selectedFileCount+"files"))}}function q(c,g){if(1&c&&(a.TgZ(0,"p"),a._uU(1),a.ALo(2,"translate"),a.qZA()),2&c){const i=a.oxw();a.xp6(1),a.Oqu(i.selectedFileName?i.selectedFileName:a.lcZ(2,1,i.placeholder))}}let t=(()=>{class c extends _.t{set clear(i){i&&(this.selectedFileCount=0,this.selectedFileName="",this.value=null)}constructor(i){super(),this.formGroupDirective=i,this.uploadedFiles=[],this.multiple=!0,this.label="Upload",this.placeholder="drag_and_drop_you_file_or_Click_here_to_upload",this.accept=".jpg,.jpeg,.png,.pdf,.doc,.docx,.xls,.xlsx",this.onValueChange=new a.vpe,this.selectedFileName="",this.selectedFileCount=0}onFileSelected(i){this.onValueChange.emit(i),this.selectedFileName=i.target.files[0].name,i.target.files&&i.target.files.length>0&&(this.selectedFileCount=i.target.files.length)}onUpload(i){for(let p of i.files)this.uploadedFiles.push(p)}}return c.\u0275fac=function(i){return new(i||c)(a.Y36(l.sg,8))},c.\u0275cmp=a.Xpm({type:c,selectors:[["app-file-upload"]],inputs:{value:"value",multiple:"multiple",label:"label",placeholder:"placeholder",accept:"accept",clear:"clear"},outputs:{onValueChange:"onValueChange"},features:[a._Bn([{provide:l.JU,useExisting:c,multi:!0},{provide:l.Cf,useExisting:c,multi:!0}]),a.qOj],decls:5,vars:6,consts:[[1,"file-input"],["for","file",4,"ngIf"],[4,"ngIf"],["id","file","type","file","id","file",1,"form-control",3,"multiple","ngModel","accept","ngModelChange","change"],["for","file"],[1,"required-aster"],["class","fa-solid fa-asterisk",4,"ngIf"],[1,"fa-solid","fa-asterisk"]],template:function(i,p){1&i&&(a.TgZ(0,"div",0),a.YNc(1,h,6,6,"label",1),a.YNc(2,x,3,3,"p",2),a.YNc(3,q,3,3,"p",2),a.TgZ(4,"input",3),a.NdJ("ngModelChange",function(O){return p.value=O})("change",function(O){return p.onFileSelected(O)}),a.qZA()()),2&i&&(a.xp6(1),a.Q6J("ngIf",p.label),a.xp6(1),a.Q6J("ngIf",p.selectedFileCount>1),a.xp6(1),a.Q6J("ngIf",p.selectedFileCount<=1),a.xp6(1),a.Q6J("multiple",p.multiple)("ngModel",p.value)("accept",p.accept))},dependencies:[f.O5,l.Fj,l.JJ,l.On,f.rS,Z.X$],styles:[".file-input[_ngcontent-%COMP%]{position:relative}.file-input[_ngcontent-%COMP%]   input[type=file][_ngcontent-%COMP%]{position:absolute;left:0;top:0;opacity:0;width:100%;height:100%;min-width:200px!important}.file-input[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{display:block;padding:8px;border:1px dashed #7ca0c5;border-radius:8px;font-size:14px;cursor:pointer;min-width:200px!important;text-align:center;overflow:hidden}"]}),c})()},5253:(C,v,n)=>{n.d(v,{R:()=>t});var a=n(67),_=n(6223),l=n(9291),f=n(6814),Z=n(6218),A=n(3999);function h(c,g){1&c&&l._UZ(0,"i",6)}function x(c,g){if(1&c&&(l.TgZ(0,"label"),l._uU(1),l.ALo(2,"titlecase"),l.ALo(3,"translate"),l.TgZ(4,"span",4),l.YNc(5,h,1,0,"i",5),l.qZA()()),2&c){const i=l.oxw();l.xp6(1),l.hij("",l.lcZ(2,2,l.lcZ(3,4,i.text))," "),l.xp6(4),l.Q6J("ngIf",i.control&&(null==i.control.errors?null:i.control.errors.required))}}function q(c,g){if(1&c&&(l.TgZ(0,"span"),l._uU(1),l.qZA()),2&c){const i=l.oxw();l.Tol("text-danger"),l.xp6(1),l.Oqu(i.object.keys(i.control.errors)[0])}}let t=(()=>{class c extends a.t{constructor(i){super(),this.formGroupDirective=i,this.placeholder="",this.rows="2",this.cols="",this.readOnly=!1,this.class="d-flex flex-column justify-content-between",this.object=Object}writeValue(i){this.value=i}onValueChange(i){this.onChange(i.target.value),this.onTouched()}}return c.\u0275fac=function(i){return new(i||c)(l.Y36(_.sg,8))},c.\u0275cmp=l.Xpm({type:c,selectors:[["app-textarea"]],inputs:{value:"value",text:"text",placeholder:"placeholder",rows:"rows",cols:"cols",readOnly:"readOnly",class:"class",type:"type"},features:[l._Bn([{provide:_.JU,useExisting:c,multi:!0},{provide:_.Cf,useExisting:c,multi:!0}]),l.qOj],decls:4,vars:8,consts:[[3,"ngClass"],[4,"ngIf"],["pInputTextarea","",3,"rows","cols","ngModel","placeholder","disabled","ngModelChange","input"],[3,"class",4,"ngIf"],[1,"required-aster"],["class","fa-solid fa-asterisk",4,"ngIf"],[1,"fa-solid","fa-asterisk"]],template:function(i,p){1&i&&(l.TgZ(0,"div",0),l.YNc(1,x,6,6,"label",1),l.TgZ(2,"textarea",2),l.NdJ("ngModelChange",function(O){return p.value=O})("input",function(O){return p.onValueChange(O)}),l.qZA(),l.YNc(3,q,2,3,"span",3),l.qZA()),2&i&&(l.Q6J("ngClass",p.class),l.xp6(1),l.Q6J("ngIf",p.text),l.xp6(1),l.Q6J("rows",p.rows)("cols",p.cols)("ngModel",p.value)("placeholder",p.placeholder)("disabled",p.readOnly),l.xp6(1),l.Q6J("ngIf",p.control&&p.control.errors&&(p.control.touched||p.formGroupDirective.submitted)))},dependencies:[f.mk,f.O5,_.Fj,_.JJ,_.On,Z.g,f.rS,A.X$]}),c})()},8718:(C,v,n)=>{n.d(v,{x:()=>a});const a={api:{create:"user/create",get:"user",getById:"user/",update:"user/update/",delete:"user/",exportCvs:"user/export/cvs",exportPdf:"user/export/pdf",import:"user/import",export:"user/data/export"},page:{list:"",view:"view/:id"}}},9773:(C,v,n)=>{n.d(v,{R:()=>Z});var a=n(9360),_=n(8251),l=n(4829),f=n(2420);function Z(A){return(0,a.e)((h,x)=>{(0,l.Xf)(A).subscribe((0,_.x)(x,()=>x.complete(),f.Z)),!x.closed&&h.subscribe(x)})}}}]);