"use strict";(self.webpackChunkkey=self.webpackChunkkey||[]).push([[8304],{8304:(T,m,r)=>{r.r(m),r.d(m,{BankAccountModule:()=>_t});var o=r(6814),h=r(8209),t=r(9291),g=r(5861),d=function(n){return n.list="View BankAccounts",n.create="Create BankAccount",n.update="Edit BankAccount",n.delete="Delete BankAccount",n.exportPdf="Generate PDF BankAccounts",n.exportCvs="Export BankAccounts",n}(d||{}),A=r(5219);const u={api:{create:"bankAccount/create",get:"bankAccount",getUsers:"user",getCurrencies:"currency",getTypes:"bankAccount/types/list",getById:"bankAccount/",update:"bankAccount/update/",delete:"bankAccount/",export:"bankAccount/export",exportExample:"bankAccount/export/example",import:"bankAccount/import"},page:{list:"",update:"",create:"",view:"payment/view/:id"}},C=n=>{return{cols:[{field:"id",label:"code",class:""},{field:"name",label:"name",class:""},{field:"current_balance",label:"current_balance",class:"",format:i=>i.current_balance?i.current_balance:"-"},{field:"bank_branch",label:"bank_branch",format:i=>i.bank_branch?i.bank_branch:"-"},{field:"creator",label:"created_by",class:"",format:i=>i.creator?i.creator:"-"},{field:"created_at",label:"created_at",class:"",format:i=>i.created_at?i.created_at:"-"},{label:"action",actions:[{id:d.delete,icon:"trash",class:"main-color",fun:(i=(0,g.Z)(function*(e){return yield n.bankAccountsService.delete(e)}),function(a){return i.apply(this,arguments)})},{id:d.update,icon:"pen-to-square",class:"main-color",fun:function(){var i=(0,g.Z)(function*(e){return yield n.bankAccountsService.openDialogToUpdate(e)});return function(a){return i.apply(this,arguments)}}()}]}],Request:u.api.get};var i};var b=r(5946),p=r(6924),x=r(8718),s=r(6223),M=r(68),v=r(8763),Z=r(5118),F=r(2305),J=r(8614),U=r(1904),L=r(3838),N=r(1771),O=r(4779),y=r(3999);function w(n,i){if(1&n&&(t.TgZ(0,"p",26),t._uU(1),t.qZA()),2&n){const e=i.$implicit;t.xp6(1),t.hij(" ",e.value," ")}}const I=function(){return{type:"number",length:10}};function E(n,i){1&n&&(t.TgZ(0,"div",11),t._UZ(1,"app-text",27),t.qZA()),2&n&&(t.xp6(1),t.Q6J("patternMessage",t.DdM(2,I))("text","account_number"))}const S=function(){return{type:"number",length:11}};function Q(n,i){1&n&&(t.TgZ(0,"div",11),t._UZ(1,"app-text",28),t.qZA()),2&n&&(t.xp6(1),t.Q6J("patternMessage",t.DdM(2,S))("text","phone_number"))}function G(n,i){1&n&&(t.TgZ(0,"div",19),t._UZ(1,"app-number-input",29),t.qZA()),2&n&&(t.xp6(1),t.Q6J("mode","decimal")("maxFractionDigits",3)("minFractionDigits",2)("showButtons",!1)("text","current_balance"))}function q(n,i){if(1&n&&(t.TgZ(0,"div",19),t._UZ(1,"app-dropdown",30),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Tol(""),t.Q6J("text","Status")("data",e.status)}}function V(n,i){if(1&n&&(t.TgZ(0,"div",19),t._UZ(1,"app-dropdown",31),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Tol(""),t.Q6J("filterBy","name_code")("filter",!0)("text","parent_account_id")("request",e.accountsConfig.api.getAssetsParent)}}function Y(n,i){if(1&n&&(t.TgZ(0,"div",19),t._UZ(1,"app-dropdown",32),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Tol(""),t.Q6J("filterBy","name_code")("filter",!0)("text","parent_expenses_account_id")("request",e.accountsConfig.api.getExpensesParent)}}function W(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"div",19),t._UZ(1,"app-dropdown",33),t.TgZ(2,"app-checkbox",34),t.NdJ("change",function(c){t.CHM(e);const f=t.oxw();return t.KtG(f.change_currency(c))}),t.qZA()()}if(2&n){const e=t.oxw();t.xp6(1),t.Tol(""),t.Q6J("filterBy","name_code")("filter",!0)("text","parent_revenue_account_id")("request",e.accountsConfig.api.getExpensesParent),t.xp6(1),t.Tol("d-flex align-items-center mt-2  flex-row-reverse justify-content-end gap-2"),t.Q6J("text","change-currency")}}let P=(()=>{class n{constructor(e,a,c,f,_){this.fb=e,this.toastr=a,this.dynamicDialogConfig=c,this.dialogRef=f,this.bankAccountsService=_,this.accountsConfig=M.a,this.formGroup=this.initForm(),this.bankConfig=u,this.permissions=d,this.hidden=!0,this.isWallet=!1,this.status=[{id:"Active",name:"Active"},{id:"In-Active",name:"In-Active"}],this.currencies={data:[]},this.defaultCurrency=!1,this.dynamicDialogConfig.data?.data&&this.fillDataToUpdate(this.dynamicDialogConfig.data?.data)}ngOnInit(){this.bankAccountsService.getUsers().subscribe(e=>{this.users=e.data}),this.bankAccountsService.getTypes().subscribe(e=>{this.account_types=e.data})}selectType(e){this.hidden=!1,"wallet"==e.value?(this.isWallet=!0,this.formGroup.get("phone")?.setValidators([s.kI.required,s.kI.pattern("^[0-9]{11}$")]),this.formGroup.get("account_number")?.setValue(""),this.formGroup.get("account_number")?.clearValidators()):(this.isWallet=!1,this.formGroup.get("account_number")?.setValidators([s.kI.required,s.kI.pattern("^[0-9]{10,20}$")]),this.formGroup.get("phone")?.setValue(""),this.formGroup.get("phone")?.clearValidators()),this.formGroup.get("phone")?.updateValueAndValidity(),this.formGroup.get("account_number")?.updateValueAndValidity()}fillDataToUpdate(e){this.formGroup.patchValue({id:e.id,name:e?.name,bank_branch:e?.bank_branch,opening_balance:e?.opening_balance,account_number:e?.account_number,account_type:e?.account_type,currency_id:e?.currency_id,holder_name:e?.holder_name,status:e?.status,phone:e?.phone,current_balance:e?.current_balance,authorized_by:e?.authorized_by,parent_account_id:e?.parent_account_id,parent_expenses_account_id:e?.parent_expenses_account_id,parent_revenue_account_id:e?.parent_revenue_account_id,change_currency:e?.data?.change_currency})}initForm(){return this.fb.group({id:[Number],name:["",[s.kI.required]],opening_balance:["",s.kI.required],account_number:[""],phone:[""],currency_id:["",s.kI.required],account_type:["",s.kI.required],chart_of_account:[""],authorized_by:[""],current_balance:[""],bank_branch:[""],holder_name:[""],status:[""],parent_account_id:["",s.kI.required],parent_expenses_account_id:["",s.kI.required],parent_revenue_account_id:[""],change_currency:[0]})}accept(){console.log(this.formGroup),this.formGroup.invalid?this.formGroup.markAllAsTouched():this.dynamicDialogConfig.data.data?this.bankAccountsService.update(this.formGroup.value).subscribe({next:e=>{this.toastr.success(e.message),this.closePopup(!0)},error:e=>{this.errors=e.error.errors,this.toastr.error(e.error.message)}}):this.bankAccountsService.create(this.formGroup.value).subscribe({next:e=>{this.toastr.success(e.message),this.closePopup(!0)},error:e=>{this.errors=e.error.errors,this.toastr.error(e.error.message)}})}change_currency(e){e.checked?this.formGroup.get("change_currency")?.patchValue(1):this.formGroup.get("change_currency")?.patchValue(0)}closePopup(e){this.dialogRef.close(e)}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(s.qu),t.Y36(v._W),t.Y36(Z.S),t.Y36(Z.E7),t.Y36(D))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-add-bank-account"]],decls:38,vars:40,consts:[[1,"main"],[1,"header"],[1,"d-flex","justify-content-between"],[1,"icon"],["src","../assets/Tabs/Icon/Active/craete-bank.png","alt","img"],[3,"click"],[1,"fa-solid","fa-xmark","pointer","fs-1"],[1,"title"],[3,"formGroup"],["class","text-error",4,"ngFor","ngForOf"],[1,"row"],[1,"mb-5","col-sm-12"],["formControlName","name","ngDefaultControl","","placeholder","",3,"text"],["formControlName","bank_branch","ngDefaultControl","","placeholder","",3,"text"],[1,"mb-5","col-12"],["formControlName","holder_name","ngDefaultControl","","placeholder","",3,"text"],["formControlName","authorized_by","ngDefaultControl","",3,"text"],[1,"mb-3","col-12"],["placeholder","select","optionLabel","name","optionValue","id","formControlName","currency_id","ngDefaultControl","",3,"text","request"],[1,"mb-3","col-sm-12"],["placeholder","select","optionLabel","name","optionValue","name","formControlName","account_type",3,"text","data","onDropDownChange"],["class","mb-5 col-sm-12",4,"ngIf"],["class","mb-3 col-sm-12",4,"ngIf"],[1,"row","g-2","my-2"],[1,"col-6"],[3,"text","click"],[1,"text-error"],["ngDefaultControl","","placeholder","","formControlName","account_number",1,"d-block",3,"patternMessage","text"],["ngDefaultControl","","placeholder","","formControlName","phone",1,"d-block",3,"patternMessage","text"],["ngDefaultControl","","placeholder","","formControlName","current_balance",1,"d-block",3,"mode","maxFractionDigits","minFractionDigits","showButtons","text"],["placeholder","select","optionLabel","name","optionValue","id","formControlName","status",3,"text","data"],["placeholder","select","optionLabel","name_code","optionValue","id","formControlName","parent_account_id",3,"filterBy","filter","text","request"],["placeholder","select","optionLabel","name_code","optionValue","id","formControlName","parent_expenses_account_id",3,"filterBy","filter","text","request"],["placeholder","select","optionLabel","name_code","optionValue","id","formControlName","parent_revenue_account_id",3,"filterBy","filter","text","request"],[3,"text","change"]],template:function(e,a){if(1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"span",3),t._UZ(4,"img",4),t.qZA(),t.TgZ(5,"span",5),t.NdJ("click",function(){return a.closePopup(!1)}),t._UZ(6,"i",6),t.qZA()(),t.TgZ(7,"p",7),t._uU(8),t.ALo(9,"translate"),t.qZA()(),t.TgZ(10,"app-form",8),t.YNc(11,w,2,1,"p",9),t.ALo(12,"keyvalue"),t.TgZ(13,"div",10)(14,"div",11),t._UZ(15,"app-text",12),t.qZA(),t.TgZ(16,"div",11),t._UZ(17,"app-text",13),t.qZA(),t.TgZ(18,"div",14),t._UZ(19,"app-text",15),t.qZA(),t.TgZ(20,"div",14),t._UZ(21,"app-text",16),t.qZA(),t.TgZ(22,"div",17),t._UZ(23,"app-dropdown",18),t.qZA(),t.TgZ(24,"div",19)(25,"app-dropdown",20),t.NdJ("onDropDownChange",function(f){return a.selectType(f)}),t.qZA()(),t.YNc(26,E,2,3,"div",21),t.YNc(27,Q,2,3,"div",21),t.YNc(28,G,2,5,"div",22),t.YNc(29,q,2,4,"div",22),t.YNc(30,V,2,6,"div",22),t.YNc(31,Y,2,6,"div",22),t.YNc(32,W,3,9,"div",22),t.qZA(),t.TgZ(33,"div",23)(34,"div",24)(35,"app-button",25),t.NdJ("click",function(){return a.closePopup(!1)}),t.qZA()(),t.TgZ(36,"div",24)(37,"app-button",25),t.NdJ("click",function(){return a.accept()}),t.qZA()()()()()),2&e){let c;t.xp6(8),t.Oqu(t.lcZ(9,36,null!==(c=a.dynamicDialogConfig.header)&&void 0!==c?c:"")),t.xp6(2),t.Q6J("formGroup",a.formGroup),t.xp6(1),t.Q6J("ngForOf",t.lcZ(12,38,a.errors)),t.xp6(4),t.Tol(""),t.Q6J("text","name"),t.xp6(2),t.Tol(""),t.Q6J("text","bank_branch"),t.xp6(2),t.Tol(""),t.Q6J("text","holder_name"),t.xp6(2),t.Tol(""),t.Q6J("text","authorized_by"),t.xp6(2),t.Tol(""),t.Q6J("text","account_currency")("request",a.bankConfig.api.getCurrencies),t.xp6(2),t.Tol(""),t.Q6J("text","account_type")("data",a.account_types),t.xp6(1),t.Q6J("ngIf",!a.hidden&&!a.isWallet),t.xp6(1),t.Q6J("ngIf",!a.hidden&&a.isWallet),t.xp6(1),t.Q6J("ngIf","update_bank"==a.dynamicDialogConfig.header),t.xp6(1),t.Q6J("ngIf","update_bank"==a.dynamicDialogConfig.header),t.xp6(1),t.Q6J("ngIf","add_bank"==a.dynamicDialogConfig.header),t.xp6(1),t.Q6J("ngIf","add_bank"==a.dynamicDialogConfig.header),t.xp6(1),t.Q6J("ngIf","add_bank"==a.dynamicDialogConfig.header),t.xp6(3),t.Tol("btn-cancel"),t.Q6J("text","Cancel"),t.xp6(2),t.Tol("btn-filter"),t.Q6J("text",null==a.dynamicDialogConfig.data?null:a.dynamicDialogConfig.data.acceptLabel)}},dependencies:[o.sg,o.O5,s.Fj,s.JJ,s.JL,s.sg,s.u,F.b,J.T,U.D,L.J,N.U,O.r,o.Nd,y.X$],styles:["[_nghost-%COMP%]   .main[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-weight:600;font-size:1.8rem;line-height:24px;color:var(--mainColor)}[_nghost-%COMP%]   .main[_ngcontent-%COMP%]   .title-model[_ngcontent-%COMP%]{padding:1rem!important;font-style:normal;font-weight:600;font-size:1.8rem;line-height:28px;color:var(--mainColor)}[_nghost-%COMP%]   .main[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:1.4rem;font-weight:500;color:#344054}[_nghost-%COMP%]   .main[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{font-size:1.6rem!important}[_nghost-%COMP%]   .main[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]   option[_ngcontent-%COMP%]{font-size:1.6rem!important}[_nghost-%COMP%]   .main[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .auth[_ngcontent-%COMP%]   .auth-input[_ngcontent-%COMP%]{position:relative;border:1px solid #ced4da;border-radius:5px;display:flex;justify-content:space-between;align-items:center}[_nghost-%COMP%]   .main[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .auth[_ngcontent-%COMP%]   .auth-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{font-size:1.5rem!important;padding:7px!important;border:none!important;outline:none!important}[_nghost-%COMP%]   .main[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .auth[_ngcontent-%COMP%]   .auth-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{box-shadow:none!important}[_nghost-%COMP%]   .main[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .auth[_ngcontent-%COMP%]   .auth-input[_ngcontent-%COMP%]   .addAuth[_ngcontent-%COMP%]{position:absolute;top:30;right:0}[_nghost-%COMP%]   .main[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .auth[_ngcontent-%COMP%]   .auth-name[_ngcontent-%COMP%]{background-color:#c6dfe2!important;border-radius:24px!important;padding:6px 15px;margin:.5rem 1rem!important;font-size:1.2rem}[_nghost-%COMP%]   .main[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .auth[_ngcontent-%COMP%]   .error[_ngcontent-%COMP%]{font-size:1.2rem;color:var(--red)}[_nghost-%COMP%]   .main[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]     app-select-option select{background-color:var(--white)!important;border:1px solid #ced4da!important}[_nghost-%COMP%]   .main[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]     app-input input{background-color:var(--white)!important;border:1px solid #ced4da!important}html[dir=rtl]   [_nghost-%COMP%]   .main[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-check-input[_ngcontent-%COMP%]{margin-right:.5em}html[dir=rtl]   [_nghost-%COMP%]   .main[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-check-input[_ngcontent-%COMP%]{margin-left:.5rem}html[dir=rtl]   [_nghost-%COMP%]   .main[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-check-input[_ngcontent-%COMP%]{float:right}"]}),n})();var z=r(1732),j=r(3562);let D=(()=>{class n{constructor(e,a,c){this.http=e,this.dynamicDialog=a,this.toastr=c}get(e){return this.http.get(u.api.get)}getTypes(e){return this.http.get(u.api.getTypes)}getUsers(e){return this.http.get(u.api.getUsers)}getCurrencies(e){return this.http.get(u.api.getCurrencies)}openDialogToCreate(){return this.dynamicDialog.showDialogWithComponent({showHeader:!1,header:"add_bank",data:{acceptLabel:"add",rejectLabel:"cancel"},width:"500px",height:"auto"},P)}create(e){return this.http.post(u.api.create,e)}delete(e){var a=this;return(0,g.Z)(function*(){const c={showHeader:!1,header:"delete",data:{message:"do_you_want_to_delete",acceptLabel:"delete",rejectLabel:"close",data:{...e},name:"name"},width:"300px",height:"164px"};return!!(yield a.dynamicDialog.confirm(c))&&a.http.delete(u.api.delete+e.id).toPromise().then(_=>(a.toastr.success(_.message),_)).catch(_=>(a.toastr.error(_.error.message),_))})()}openDialogToUpdate(e){var a=this;return(0,g.Z)(function*(){const c={showHeader:!1,header:"update_bank",data:{acceptLabel:"update",rejectLabel:"cancel",data:{...e}},width:"480px",height:"auto"};return yield a.dynamicDialog.showDialogWithComponent(c,P)})()}update(e){return this.http.post(u.api.update+e.id,e)}import(e){return this.http.post(u.api.import,e)}export(){return this.http.get(u.api.export)}exportExample(){return this.http.get(u.api.exportExample)}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(z.O),t.LFG(j.U),t.LFG(v._W))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var K=r(8275),X=r(4896),R=r(2377),H=r(359),$=r(5077),tt=r(3826);function et(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"div",16)(1,"button",17),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"ul",18)(5,"li",19),t.NdJ("click",function(){t.CHM(e);const c=t.oxw();return t.KtG(c.exportExample())}),t._uU(6),t.ALo(7,"titlecase"),t.ALo(8,"translate"),t.qZA(),t.TgZ(9,"li",19),t.NdJ("click",function(){t.CHM(e);const c=t.oxw();return t.KtG(c.export())}),t._uU(10),t.ALo(11,"titlecase"),t.ALo(12,"translate"),t.qZA()()()}2&n&&(t.xp6(2),t.hij(" ",t.lcZ(3,3,"export")," "),t.xp6(4),t.Oqu(t.lcZ(7,5,t.lcZ(8,7,"example"))),t.xp6(4),t.Oqu(t.lcZ(11,9,t.lcZ(12,11,"data"))))}function nt(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"app-button",20),t.NdJ("click",function(){t.CHM(e);const c=t.oxw();return t.KtG(c.openDialogToCreate())}),t.qZA()}if(2&n){const e=t.oxw();t.Tol("btn-filter"),t.Q6J("text","new")("icon",e.icon.PLUS)("iconPos","left")}}function ot(n,i){if(1&n&&(t.TgZ(0,"div")(1,"span",28),t._uU(2),t.qZA(),t.TgZ(3,"span",28),t._uU(4),t.qZA()()),2&n){const e=i.$implicit;t.xp6(2),t.hij(" row :",e.row_number," "),t.xp6(2),t.Oqu(e.error)}}function at(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"div",21),t.YNc(1,ot,5,2,"div",22),t.TgZ(2,"app-file-upload",23),t.NdJ("onValueChange",function(c){t.CHM(e);const f=t.oxw();return t.KtG(f.onFileSelected(c))}),t.qZA(),t.TgZ(3,"div",24)(4,"app-button",25),t.NdJ("click",function(){t.CHM(e);const c=t.oxw();return t.KtG(c.import())}),t._UZ(5,"i",26),t.qZA(),t.TgZ(6,"app-button",27),t.NdJ("click",function(){t.CHM(e);const c=t.oxw();return t.KtG(c.closeSectionToImport())}),t.qZA()()()}if(2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.importErrors),t.xp6(1),t.Q6J("multiple",!1)("accept",".csv,.xls,.xlsx")("label","import"),t.xp6(2),t.Q6J("text","save")("loading",e.isLoading),t.xp6(2),t.Q6J("text","cancel")}}const B=function(n){return[n]};let rt=(()=>{class n{constructor(e,a,c){this.bankAccountsService=e,this.toastr=a,this.translateService=c,this.showImportForm=!1,this.importErrors=[],this.fileName="",this.values=new FormData,this.isLoading=!1,this.tableConfig=C(this),this.filtersConfig=[{field:"search",label:"search",type:p.W.TEXT,placeholder:"search"},{field:"name",label:"name",type:p.W.TEXT,placeholder:""},{field:"creator_id",label:"creator",type:p.W.SELECT,options:{value:"id",label:"name"},request:x.x.api.get,placeholder:"select"},{field:"balance_from",label:"balance_from",type:p.W.TEXT,placeholder:""},{field:"balance_to",label:"balance_to",type:p.W.TEXT,placeholder:""},{field:"from",label:"from",type:p.W.DATE,placeholder:"From"},{field:"to",label:"to",type:p.W.DATE}],this.sortConfig=[{optionLabel:"label",optionValue:"field",key:"sort_by",placeholder:"sort_by",data:[{label:"Name",field:"name"},{label:"code",field:"code"},{label:"account_number",field:"account_number"},{label:"account_type",field:"account_type"},{label:"opening_balance",field:"opening_balance"},{label:"current_balance",field:"current_balance"},{label:"created_at",field:"created_at"}]},{optionLabel:"label",optionValue:"field",key:"sort_type",placeholder:"sort_type",data:[{label:b.q.asc,field:b.q.asc},{label:b.q.desc,field:b.q.desc}]}],this.permissions=d,this.icon=A.dv}openDialogToCreate(){var e=this;return(0,g.Z)(function*(){(yield e.bankAccountsService.openDialogToCreate())&&(e.tableConfig=C(e))})()}openSectionToImport(){this.showImportForm=!0}closeSectionToImport(){this.fileName="",this.showImportForm=!1,this.importErrors=[]}export(e){this.bankAccountsService.export().subscribe(a=>{window.open(a.file_path)})}exportExample(){this.bankAccountsService.exportExample().subscribe(e=>{window.open(e.file_path)})}onFileSelected(e){e.target.files[0]&&(this.fileName=e.target.files[0].name,this.values.set("file",e.target.files[0]))}import(){this.fileName?(this.isLoading=!0,this.bankAccountsService.import(this.values).subscribe(e=>{this.toastr.success(e.message),this.isLoading=!1,this.fileName="",this.closeSectionToImport(),this.tableConfig=C(this)},e=>{this.isLoading=!1,this.importErrors=e.error.errors,e.error.message&&this.toastr.error(e.error.message)})):this.toastr.error(this.translateService.instant("select_file"))}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(D),t.Y36(v._W),t.Y36(y.sK))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-list-bank-account"]],decls:19,vars:19,consts:[[1,"d-flex","align-items-center","justify-content-between"],[1,"title"],[1,"d-flex","gap-2","align-items-center"],["class","dropdown",4,"hasPermissions"],[3,"text","click"],[3,"text","class","icon","iconPos","click",4,"hasPermissions"],["class","import",4,"ngIf"],[1,"d-flex","flex-row","align-items-center","justify-content-between"],[3,"SortConfig"],["sort",""],[3,"config"],["filter",""],[1,"table"],[3,"filter","sort","tableConfig","pagination"],[1,"d-flex","align-items-center","justify-content-center"],["pagination",""],[1,"dropdown"],["type","button","id","dropdownMenuButton1","data-bs-toggle","dropdown","aria-expanded","false",1,"btn","btn-cancel","dropdown-toggle"],["aria-labelledby","dropdownMenuButton1",1,"dropdown-menu"],[1,"pointer","dropdown-item",3,"click"],[3,"text","icon","iconPos","click"],[1,"import"],[4,"ngFor","ngForOf"],[3,"multiple","accept","label","onValueChange"],[1,"d-flex","gap-2","align-items-center","mt-3"],[3,"text","loading","click"],[1,"fa-solid","fa-check","px-2"],[1,"btn-cancel",3,"text","click"],[1,"text-error"]],template:function(e,a){if(1&e&&(t.TgZ(0,"div",0)(1,"h5",1),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"div",2),t.YNc(5,et,13,13,"div",3),t.TgZ(6,"app-button",4),t.NdJ("click",function(){return a.openSectionToImport()}),t.qZA(),t.YNc(7,nt,1,5,"app-button",5),t.qZA()(),t.YNc(8,at,7,7,"div",6),t.TgZ(9,"div",7),t._UZ(10,"ukt-sort",8,9)(12,"ukt-filter",10,11),t.qZA(),t.TgZ(14,"div",12),t._UZ(15,"app-table",13),t.qZA(),t.TgZ(16,"div",14),t._UZ(17,"ukt-pagination",null,15),t.qZA()),2&e){const c=t.MAs(11),f=t.MAs(13),_=t.MAs(18);t.xp6(2),t.Oqu(t.lcZ(3,13,"list_of_bank_account")),t.xp6(3),t.Q6J("hasPermissions",t.VKq(15,B,a.permissions.list)),t.xp6(1),t.Tol("btn-cancel"),t.Q6J("text","import"),t.xp6(1),t.Q6J("hasPermissions",t.VKq(17,B,a.permissions.create)),t.xp6(1),t.Q6J("ngIf",a.showImportForm),t.xp6(2),t.Q6J("SortConfig",a.sortConfig),t.xp6(2),t.Q6J("config",a.filtersConfig),t.xp6(3),t.Q6J("filter",f)("sort",c)("tableConfig",a.tableConfig)("pagination",_)}},dependencies:[o.sg,o.O5,K.z,X.Y,O.r,R.a,H.Q,$.z,tt.x,o.rS,y.X$],styles:[".dropdown[_ngcontent-%COMP%]{background-color:transparent!important}.dropdown[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:transparent!important;border:1px solid var(--mainColor);font-size:1.5rem;padding:6px}.dropdown[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{font-size:1.5rem}.import[_ngcontent-%COMP%]{padding:20px;border:2px solid var(--mainColor);border-radius:8px;margin:10px 0}"]}),n})();const it=[{path:"",component:(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-bank-account"]],decls:2,vars:0,consts:[[1,"page-card"]],template:function(e,a){1&e&&(t.TgZ(0,"div",0),t._UZ(1,"app-list-bank-account"),t.qZA())},dependencies:[rt]}),n})()}];let ct=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[h.Bz.forChild(it),h.Bz]}),n})();var lt=r(1383),st=r(9624),pt=r(1890),ut=r(4413),dt=r(1471),mt=r(2115),gt=r(1019),ft=r(8096);let _t=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[o.ez,ct,s.UX,lt.m,st.U,ut.e,pt.f,y.aw,dt.X,mt.u,gt.i,ft.J]}),n})()},68:(T,m,r)=>{r.d(m,{a:()=>o});const o={api:{create:"account/create",get:"account/with-group/all",getNotParent:"not-parents/accounts",getParent:"parents/accounts",getProfitLossParent:"profit-loss/parent-accounts",getExpensesParent:"account/parent/expenses",getAssetsParent:"account/parent/assets",getById:"account/",update:"account/update/",delete:"account/",exportExample:"account/export/example",exportExampleSub:"account/export/example/sub",export:"account/export/parent",exportPdf:"account/export/pdf",importAccount:"account/import",importAccountSub:"account/import/sub"},page:{}}},1771:(T,m,r)=>{r.d(m,{U:()=>g});var o=r(9291),h=r(6223);const t=["*"];let g=(()=>{class d{constructor(){this.onSubmit=new o.vpe}ngOnChanges(u){}getFormData(){return"function"==typeof this.formData?this.formData(this.formGroup.value):{...this.formGroup.value}}reset(){this.formGroup.reset()}submit(){if(this.formGroup.markAllAsTouched(),this.formGroup.invalid)return;const u=this.getFormData();this.onSubmit.emit(u)}ngAfterContentInit(){}ngAfterContentChecked(){}ngOnDestroy(){}}return d.\u0275fac=function(u){return new(u||d)},d.\u0275cmp=o.Xpm({type:d,selectors:[["app-form"]],inputs:{formGroup:"formGroup",formData:"formData"},outputs:{onSubmit:"onSubmit"},features:[o.TTD],ngContentSelectors:t,decls:2,vars:1,consts:[[3,"formGroup","ngSubmit"]],template:function(u,C){1&u&&(o.F$t(),o.TgZ(0,"form",0),o.NdJ("ngSubmit",function(){return C.submit()}),o.Hsn(1),o.qZA()),2&u&&o.Q6J("formGroup",C.formGroup)},dependencies:[h._Y,h.JL,h.sg]}),d})()},4896:(T,m,r)=>{r.d(m,{Y:()=>k});var o=r(9291),h=r(67),t=r(6223),g=r(6814),d=r(3999);function A(p,x){1&p&&o._UZ(0,"i",7)}function u(p,x){if(1&p&&(o.TgZ(0,"label",4),o._uU(1),o.ALo(2,"titlecase"),o.ALo(3,"translate"),o.TgZ(4,"span",5),o.YNc(5,A,1,0,"i",6),o.qZA()()),2&p){const l=o.oxw();o.xp6(1),o.hij("",o.lcZ(2,2,o.lcZ(3,4,l.label))," "),o.xp6(4),o.Q6J("ngIf",l.control&&(null==l.control.errors?null:l.control.errors.required))}}function C(p,x){if(1&p&&(o.TgZ(0,"p"),o._uU(1),o.ALo(2,"translate"),o.qZA()),2&p){const l=o.oxw();o.xp6(1),o.Oqu(o.lcZ(2,1,l.selectedFileCount+"files"))}}function b(p,x){if(1&p&&(o.TgZ(0,"p"),o._uU(1),o.ALo(2,"translate"),o.qZA()),2&p){const l=o.oxw();o.xp6(1),o.Oqu(l.selectedFileName?l.selectedFileName:o.lcZ(2,1,l.placeholder))}}let k=(()=>{class p extends h.t{set clear(l){l&&(this.selectedFileCount=0,this.selectedFileName="",this.value=null)}constructor(l){super(),this.formGroupDirective=l,this.uploadedFiles=[],this.multiple=!0,this.label="Upload",this.placeholder="drag_and_drop_you_file_or_Click_here_to_upload",this.accept=".jpg,.jpeg,.png,.pdf,.doc,.docx,.xls,.xlsx",this.onValueChange=new o.vpe,this.selectedFileName="",this.selectedFileCount=0}onFileSelected(l){this.onValueChange.emit(l),this.selectedFileName=l.target.files[0].name,l.target.files&&l.target.files.length>0&&(this.selectedFileCount=l.target.files.length)}onUpload(l){for(let s of l.files)this.uploadedFiles.push(s)}}return p.\u0275fac=function(l){return new(l||p)(o.Y36(t.sg,8))},p.\u0275cmp=o.Xpm({type:p,selectors:[["app-file-upload"]],inputs:{value:"value",multiple:"multiple",label:"label",placeholder:"placeholder",accept:"accept",clear:"clear"},outputs:{onValueChange:"onValueChange"},features:[o._Bn([{provide:t.JU,useExisting:p,multi:!0},{provide:t.Cf,useExisting:p,multi:!0}]),o.qOj],decls:5,vars:6,consts:[[1,"file-input"],["for","file",4,"ngIf"],[4,"ngIf"],["id","file","type","file","id","file",1,"form-control",3,"multiple","ngModel","accept","ngModelChange","change"],["for","file"],[1,"required-aster"],["class","fa-solid fa-asterisk",4,"ngIf"],[1,"fa-solid","fa-asterisk"]],template:function(l,s){1&l&&(o.TgZ(0,"div",0),o.YNc(1,u,6,6,"label",1),o.YNc(2,C,3,3,"p",2),o.YNc(3,b,3,3,"p",2),o.TgZ(4,"input",3),o.NdJ("ngModelChange",function(v){return s.value=v})("change",function(v){return s.onFileSelected(v)}),o.qZA()()),2&l&&(o.xp6(1),o.Q6J("ngIf",s.label),o.xp6(1),o.Q6J("ngIf",s.selectedFileCount>1),o.xp6(1),o.Q6J("ngIf",s.selectedFileCount<=1),o.xp6(1),o.Q6J("multiple",s.multiple)("ngModel",s.value)("accept",s.accept))},dependencies:[g.O5,t.Fj,t.JJ,t.On,g.rS,d.X$],styles:[".file-input[_ngcontent-%COMP%]{position:relative}.file-input[_ngcontent-%COMP%]   input[type=file][_ngcontent-%COMP%]{position:absolute;left:0;top:0;opacity:0;width:100%;height:100%;min-width:200px!important}.file-input[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{display:block;padding:8px;border:1px dashed #7ca0c5;border-radius:8px;font-size:14px;cursor:pointer;min-width:200px!important;text-align:center;overflow:hidden}"]}),p})()},8718:(T,m,r)=>{r.d(m,{x:()=>o});const o={api:{create:"user/create",get:"user",getById:"user/",update:"user/update/",delete:"user/",exportCvs:"user/export/cvs",exportPdf:"user/export/pdf",import:"user/import",export:"user/data/export"},page:{list:"",view:"view/:id"}}}}]);