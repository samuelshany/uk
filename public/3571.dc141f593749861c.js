"use strict";(self.webpackChunkkey=self.webpackChunkkey||[]).push([[3571],{68:(P,f,r)=>{r.d(f,{a:()=>a});const a={api:{create:"account/create",get:"account/with-group/all",getNotParent:"not-parents/accounts",getParent:"parents/accounts",getProfitLossParent:"profit-loss/parent-accounts",getExpensesParent:"account/parent/expenses",getRevenueParent:"account/parent/revenue",getAssetsParent:"account/parent/assets",getById:"account/",update:"account/update/",delete:"account/",exportExample:"account/export/example",exportExampleSub:"account/export/example/sub",export:"account/export/parent",exportPdf:"account/export/pdf",importAccount:"account/import",importAccountSub:"account/import/sub"},page:{}}},3571:(P,f,r)=>{r.r(f),r.d(f,{JournalEntryPmModule:()=>Pt});var a=r(6814),d=r(8209),t=r(9291),_=r(6924),v=r(8718),g=r(5946),T=r(5861);const m_api_create="journal-entries/create",m_api_get="journal-entries",m_api_getById="journal-entries/",m_api_update="journal-entries/update/",m_api_updateFiles="journal-entries/updateFiles",m_api_delete="journal-entries/",m_api_exportCsv="journal-entries/export",m_api_exportSingleEntryCsv="journal-entries/",m_api_exportPdf="journal-entries/export/pdf",m_page_list="",m_page_update="update/:id",m_page_updateAttachment="update-attachment/:id",m_page_view="view/:id",m_page_create="new";var s=function(o){return o.list="View Journal Entry",o.create="Create Journal Entry",o.update="Edit Journal Entry",o.delete="Delete Journal Entry",o.exportPdf="Export Journal Entry",o.exportCsv="Export Journal Entry",o.import="View Journal Entry",o}(s||{});const h=o=>{return{cols:[{field:"id",label:"id",class:""},{field:"date",label:"date",class:""},{field:"entry_no",label:"entry_no",class:""},{field:"title",label:"title"},{field:"total_credit",label:"amounts",class:"",format:l=>l.total_credit?l.total_credit:"-"},{field:"type",label:"type",class:"text-center",format:l=>l.type?l.type:"direct",custom_class_cel:l=>"direct"==l.type?"text-non-active":"text-active"},{label:"action",actions:[{id:s.delete,icon:"trash",class:"main-color",fun:(l=(0,T.Z)(function*(e){return yield o.journalService.delete(e,"delete journal")}),function(n){return l.apply(this,arguments)}),classCondition:"d-none",hideBasedOnCondition:!0,condition:l=>0==l.editable},{id:s.update,icon:"pen-to-square",class:"main-color",route:"update"},{id:s.list,icon:"eye",class:"main-color",route:"view"}]}],Request:m_api_get,titleRow:"title"};var l};var i=r(2377),u=r(359),E=r(5077),Z=r(3826);let k=(()=>{class o{constructor(){this.sortConfig=[{optionLabel:"label",optionValue:"field",key:"sort_by",placeholder:"sort_by",data:[{label:"title",field:"title"},{label:"id",field:"id"},{label:"entry_no",field:"entry_no"},{label:"created_at",field:"created_at"},{label:"date",field:"date"},{label:"description",field:"description"}]},{optionLabel:"label",optionValue:"field",key:"sort_type",placeholder:"sort_type",data:[{label:g.q.asc,field:g.q.asc},{label:g.q.desc,field:g.q.desc}]}],this.tableConfig=h(this),this.filtersConfig=[{field:"entry_no",label:"entry_number",type:_.W.TEXT,placeholder:"entry_number"},{field:"date",label:"date",type:_.W.TEXT,placeholder:"date"},{field:"title",label:"title",type:_.W.TEXT,placeholder:"title"},{field:"total_credit",label:"amounts",type:_.W.TEXT,placeholder:"amounts"},{field:"from",label:"from",type:_.W.DATE,placeholder:"from"},{field:"to",label:"to",type:_.W.DATE,placeholder:"to"},{field:"creator_id",label:"creator",type:_.W.SELECT,options:{value:"id",label:"name"},request:v.x.api.get,placeholder:"select"}],this.permissions=s}}return o.\u0275fac=function(e){return new(e||o)},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-list-journal-entry-pm"]],decls:10,vars:6,consts:[[1,"d-flex","flex-row","align-items-center","justify-content-between"],[3,"SortConfig"],["sort",""],[3,"config"],["filter",""],[1,"table"],[3,"tableConfig","pagination","filter","sort"],[1,"d-flex","align-items-center","justify-content-center"],["pagination",""]],template:function(e,n){if(1&e&&(t.TgZ(0,"div",0),t._UZ(1,"ukt-sort",1,2)(3,"ukt-filter",3,4),t.qZA(),t.TgZ(5,"div",5),t._UZ(6,"app-table",6),t.qZA(),t.TgZ(7,"div",7),t._UZ(8,"ukt-pagination",null,8),t.qZA()),2&e){const c=t.MAs(2),p=t.MAs(4),A=t.MAs(9);t.xp6(1),t.Q6J("SortConfig",n.sortConfig),t.xp6(2),t.Q6J("config",n.filtersConfig),t.xp6(3),t.Q6J("tableConfig",n.tableConfig)("pagination",A)("filter",p)("sort",c)}},dependencies:[i.a,u.Q,E.z,Z.x]}),o})();var w=r(5219),D=r(8645),j=r(9773),M=r(8763),U=r(4779),O=r(3999);function Q(o,l){if(1&o){const e=t.EpF();t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.qZA(),t.TgZ(11,"td")(12,"i",16),t.NdJ("click",function(){const p=t.CHM(e).$implicit,A=t.oxw();return t.KtG(A.openDialog(p))}),t.qZA()()()}if(2&o){const e=l.$implicit;t.xp6(2),t.Oqu(null==e||null==e.account?null:e.account.name),t.xp6(2),t.Oqu(null==e||null==e.account?null:e.account.code),t.xp6(2),t.Oqu(e.debit),t.xp6(2),t.Oqu(e.credit),t.xp6(2),t.Oqu(e.description)}}function G(o,l){if(1&o&&(t.TgZ(0,"li")(1,"a",17),t._UZ(2,"i",18),t._uU(3),t.qZA()()),2&o){const e=l.$implicit;t.xp6(1),t.Q6J("href",null==e?null:e.url,t.LSH),t.xp6(2),t.hij(" ",e.url,"")}}let L=(()=>{class o{constructor(e,n,c){this.journalService=e,this.route=n,this.toastr=c,this.icon=w.dv,this.unsubscribe=new D.x}ngOnInit(){this.route.data.pipe((0,j.R)(this.unsubscribe)).subscribe({next:e=>{this.data=e.journal.data},error:e=>{}})}export(){this.route.paramMap.subscribe(e=>{this.journalService.exportCsv(e.params.id).subscribe({next:n=>{this.toastr.success(n.message)},error:n=>{this.toastr.error(n.message)}})})}ngOnDestroy(){this.unsubscribe.next(!0),this.unsubscribe.complete()}openDialog(e){var n=this;return(0,T.Z)(function*(){yield n.journalService.openDialog(e)})()}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(F),t.Y36(d.gz),t.Y36(M._W))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-view-journal-entry-pm"]],decls:72,vars:55,consts:[[1,"page-card"],[1,"title","d-flex","align-items-center"],["routerLink","/key/accounting/journal-entry",1,"fa-solid","fa-arrow-left","me-2","pointer"],[1,"d-flex","justify-content-end","align-items-center","g-2"],[1,"mx-2"],[3,"iconPos","icon","text","click"],[1,"sup-title"],[1,""],[1,"d-flex","justify-content-between","align-items-center"],[1,"table-responsive"],[1,"table"],["scope","col"],["translate","actions","scope","col"],[4,"ngFor","ngForOf"],[1,"total"],[1,"invoice_image"],[1,"fa-solid","fa-eye","show",3,"click"],["target","_blank",3,"href"],[1,"fa-solid","fa-square-arrow-up-right","px-2"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"p",1),t._UZ(2,"i",2),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"div",3)(6,"p",4)(7,"app-button",5),t.NdJ("click",function(){return n.export()}),t.qZA()()(),t.TgZ(8,"div")(9,"p",6),t._uU(10),t.qZA(),t.TgZ(11,"p",7),t._uU(12),t.qZA()(),t.TgZ(13,"div",8)(14,"div",7)(15,"p",7),t._uU(16),t.ALo(17,"translate"),t.qZA()(),t.TgZ(18,"div",7)(19,"p",7),t._uU(20),t.ALo(21,"translate"),t.qZA(),t.TgZ(22,"p",7),t._uU(23),t.ALo(24,"translate"),t.qZA(),t.TgZ(25,"p",7),t._uU(26),t.ALo(27,"translate"),t.qZA()()(),t.TgZ(28,"div",9)(29,"table",10)(30,"thead")(31,"tr")(32,"th",11),t._uU(33),t.ALo(34,"translate"),t.qZA(),t.TgZ(35,"th",11),t._uU(36),t.ALo(37,"translate"),t.qZA(),t.TgZ(38,"th",11),t._uU(39),t.ALo(40,"translate"),t.qZA(),t.TgZ(41,"th",11),t._uU(42),t.ALo(43,"translate"),t.qZA(),t.TgZ(44,"th",11),t._uU(45),t.ALo(46,"translate"),t.qZA(),t._UZ(47,"th",12),t.qZA()(),t.TgZ(48,"tbody"),t.YNc(49,Q,13,5,"tr",13),t.TgZ(50,"tr")(51,"th",14),t._uU(52),t.ALo(53,"translate"),t.qZA(),t.TgZ(54,"th",14),t._uU(55),t.qZA(),t.TgZ(56,"th",14),t._uU(57),t.qZA(),t.TgZ(58,"th",14),t._uU(59),t.qZA(),t.TgZ(60,"th",14),t._uU(61),t.qZA(),t.TgZ(62,"th",14),t._uU(63),t.qZA(),t.TgZ(64,"th",14),t._uU(65),t.qZA()()()()(),t.TgZ(66,"div",15)(67,"h3"),t._uU(68),t.ALo(69,"translate"),t.qZA(),t.TgZ(70,"ul"),t.YNc(71,G,4,2,"li",13),t.qZA()()()),2&e&&(t.xp6(3),t.hij(" ",t.lcZ(4,31,"journal_entry")," "),t.xp6(4),t.Tol("btn-filter "),t.Q6J("iconPos","left")("icon",n.icon.FILE_EXPORT)("text","export"),t.xp6(3),t.Oqu(n.data.title),t.xp6(2),t.Oqu(n.data.description),t.xp6(4),t.AsE("",t.lcZ(17,33,"created_by")," :",null==n.data||null==n.data.creator?null:n.data.creator.name,""),t.xp6(4),t.AsE("",t.lcZ(21,35,"entry_no")," : ",n.data.entry_no,""),t.xp6(3),t.AsE("",t.lcZ(24,37,"date"),": ",n.data.date,""),t.xp6(3),t.AsE("",t.lcZ(27,39,"last_edited")," :",n.data.updated_at,""),t.xp6(7),t.Oqu(t.lcZ(34,41,"accounts")),t.xp6(3),t.Oqu(t.lcZ(37,43,"code")),t.xp6(3),t.Oqu(t.lcZ(40,45,"de_amount")),t.xp6(3),t.Oqu(t.lcZ(43,47,"cr_amount")),t.xp6(3),t.Oqu(t.lcZ(46,49,"description")),t.xp6(4),t.Q6J("ngForOf",null==n.data?null:n.data.details),t.xp6(3),t.Oqu(t.lcZ(53,51,"total")),t.xp6(3),t.Oqu(""),t.xp6(2),t.Oqu(n.data.total_debit),t.xp6(2),t.Oqu(n.data.total_credit),t.xp6(2),t.Oqu(""),t.xp6(2),t.Oqu(""),t.xp6(2),t.Oqu(""),t.xp6(3),t.Oqu(t.lcZ(69,53,"attachment_list")),t.xp6(3),t.Q6J("ngForOf",n.data.invoice_image))},dependencies:[a.sg,d.rH,U.r,O.Pi,O.X$],styles:["[_nghost-%COMP%]{font-size:1.6rem}[_nghost-%COMP%]   .table-responsive[_ngcontent-%COMP%]{margin-top:3rem;margin-bottom:5rem}[_nghost-%COMP%]   .table-responsive[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{min-width:200px}[_nghost-%COMP%]   .table-responsive[_ngcontent-%COMP%]   .show[_ngcontent-%COMP%]{cursor:pointer}[_nghost-%COMP%]   .table-responsive[_ngcontent-%COMP%]   .total[_ngcontent-%COMP%]{background-color:var(--mainColor)!important;color:var(--white);font-size:14px;padding:10px}[_nghost-%COMP%]   .invoice_image[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:16px;font-weight:600;line-height:24px;color:#101828;margin-bottom:30px}[_nghost-%COMP%]   .invoice_image[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{font-size:14px;font-weight:400;line-height:24px;color:#00778a;margin-bottom:10px}"]}),o})();var I=r(1732),Y=r(3562);let F=(()=>{class o{constructor(e,n,c){this.http=e,this.dynamicDialog=n,this.toastr=c}getJournals(e){return this.http.get(m_api_get)}create(e){return this.http.post(m_api_create,e)}delete(e,n,c){var p=this;return(0,T.Z)(function*(){const A={showHeader:!1,header:"delete",data:{message:"do_you_want_to_delete",acceptLabel:"delete",rejectLabel:"close",data:{...e}},width:"300px",height:"164px"};if(!(yield p.dynamicDialog.confirm(A)))return!1;try{const J=yield p.http.delete(m_api_delete+e.id).toPromise();return p.toastr.success(J.message),J}catch(J){throw p.toastr.error(J.error.message),J}})()}openDialog(e){return this.dynamicDialog.showDialogWithComponent({showHeader:!1,header:"add_customer",data:{item:e},width:"500px",height:"auto"},L)}update(e){return this.http.post(m_api_update+e.get("id"),e)}updateFiles(e){return this.http.post(m_api_updateFiles,e)}getJournalById(e){return this.http.get(m_api_getById+e)}exportCsv(e){return this.http.get(e?m_api_exportSingleEntryCsv+e+"/export":m_api_exportCsv)}exportPdf(){return this.http.get(m_api_exportPdf)}openDialogToImport(){}}return o.\u0275fac=function(e){return new(e||o)(t.LFG(I.O),t.LFG(Y.U),t.LFG(M._W))},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var C=r(6223),B=r(8275);function R(o,l){if(1&o){const e=t.EpF();t.TgZ(0,"app-button",6),t.NdJ("click",function(){t.CHM(e);const c=t.oxw();return t.KtG(c.export("csv"))}),t.qZA()}2&o&&(t.Tol("btn-filter"),t.Q6J("text","export"))}function K(o,l){if(1&o&&t._UZ(0,"app-button",7),2&o){const e=t.oxw();t.Tol("btn-filter"),t.Q6J("text","new")("icon",e.icon.PLUS)("iconPos","left")}}function W(o,l){if(1&o&&(t.TgZ(0,"p",17),t._uU(1),t.qZA()),2&o){const e=l.$implicit;t.xp6(1),t.hij(" ",e[0]," ")}}function H(o,l){if(1&o){const e=t.EpF();t.TgZ(0,"div",8)(1,"div",9)(2,"form")(3,"input",10,11),t.NdJ("change",function(c){t.CHM(e);const p=t.oxw();return t.KtG(p.onFileSelected(c))}),t.qZA()(),t.TgZ(5,"div"),t.YNc(6,W,2,1,"p",12),t.qZA(),t.TgZ(7,"div",13)(8,"app-button",14),t.NdJ("click",function(){t.CHM(e);const c=t.oxw();return t.KtG(c.import())}),t._UZ(9,"i",15),t._uU(10),t.qZA(),t.TgZ(11,"button",16),t.NdJ("click",function(){t.CHM(e);const c=t.oxw();return t.KtG(c.closeSectionToImport())}),t._uU(12),t.qZA()()()()}if(2&o){const e=t.oxw();t.xp6(6),t.Q6J("ngForOf",e.importError),t.xp6(2),t.Q6J("loading",e.isLoading),t.xp6(2),t.Oqu("save"),t.xp6(2),t.hij(" ","cancel"," ")}}const N=function(o){return[o]};let z=(()=>{class o{constructor(e,n){this.journalEntryPmService=e,this.toastr=n,this.permissions=s,this.showImportForm=!1,this.isLoading=!1,this.importError=[],this.icon=w.dv}openSectionToImport(){this.journalEntryPmService.openDialogToImport()}closeSectionToImport(){}onFileSelected(e){}import(){}export(e){"csv"==e?this.journalEntryPmService.exportCsv().subscribe(n=>{this.toastr.success(n.message)}):this.journalEntryPmService.exportPdf().subscribe(n=>{this.toastr.success(n.message)})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(F),t.Y36(M._W))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-header-journal-entry-pm"]],decls:9,vars:12,consts:[[1,"d-flex","justify-content-between","align-items-center"],[1,"title"],[1,"d-flex","align-items-center","gap-3"],[3,"text","class","click",4,"hasPermissions"],["routerLink","/key/accounting/journal-entry-pm/new",3,"text","class","icon","iconPos",4,"hasPermissions"],["class","import",4,"ngIf"],[3,"text","click"],["routerLink","/key/accounting/journal-entry-pm/new",3,"text","icon","iconPos"],[1,"import"],[1,""],["type","file","id","file","accept",".doc,.docx,.xml,.csv,",1,"form-control",3,"change"],["fileInput",""],["class","error",4,"ngFor","ngForOf"],[1,"d-flex","gap-2","align-items-center"],[3,"loading","click"],[1,"fa-solid","fa-check","px-2"],["type","button",1,"btn","p-3",3,"click"],[1,"error"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"h5",1),t._uU(2),t.ALo(3,"titlecase"),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"div",2),t.YNc(6,R,1,3,"app-button",3),t.YNc(7,K,1,5,"app-button",4),t.qZA()(),t.YNc(8,H,13,4,"div",5)),2&e&&(t.xp6(2),t.Oqu(t.lcZ(3,4,t.lcZ(4,6,"list_of_journal_entries_pm"))),t.xp6(4),t.Q6J("hasPermissions",t.VKq(8,N,n.permissions.exportCsv)),t.xp6(1),t.Q6J("hasPermissions",t.VKq(10,N,n.permissions.create)),t.xp6(1),t.Q6J("ngIf",n.showImportForm))},dependencies:[a.sg,a.O5,d.rH,U.r,C._Y,C.JL,C.F,B.z,a.rS,O.X$],styles:["[_nghost-%COMP%]   .dropdown[_ngcontent-%COMP%]{background-color:transparent!important}[_nghost-%COMP%]   .dropdown[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:5px 0;width:85px}[_nghost-%COMP%]   .dropdown[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{font-size:1.5rem}[_nghost-%COMP%]   .import[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:1.5rem}[_nghost-%COMP%]   .import[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{font-size:1.5rem;height:30px}[_nghost-%COMP%]   .import[_ngcontent-%COMP%]   .error[_ngcontent-%COMP%]{color:var(--red);font-size:1.4rem}"]}),o})(),X=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-journal-entry-pm"]],decls:3,vars:0,consts:[[1,"page-card"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0),t._UZ(1,"app-header-journal-entry-pm")(2,"app-list-journal-entry-pm"),t.qZA())},dependencies:[k,z]}),o})();var $=r(68),tt=r(3271),et=r(1556),nt=r(471),ot=r(1771),at=r(8614),rt=r(1904),lt=r(3838),it=r(6098),ct=r(5253),st=r(4896);function ut(o,l){if(1&o&&(t.TgZ(0,"div",6),t._UZ(1,"app-button",38),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.Q6J("text","update_attachment")("iconPos","left")("icon","fa-solid fa-check")("routerLink","/key/accounting/journal-entry/update-attachment/"+e.activeId)}}function pt(o,l){if(1&o&&(t.TgZ(0,"p"),t._uU(1),t.qZA()),2&o){const e=l.$implicit;t.xp6(1),t.hij(" ",e.value," ")}}function dt(o,l){if(1&o&&(t.TgZ(0,"div",39),t.YNc(1,pt,2,1,"p",40),t.ALo(2,"keyvalue"),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",t.lcZ(2,1,e.errors))}}function mt(o,l){if(1&o){const e=t.EpF();t.TgZ(0,"div",19)(1,"app-file-upload",41),t.NdJ("onValueChange",function(c){t.CHM(e);const p=t.oxw();return t.KtG(p.onFileSelected(c))}),t.qZA()()}}function _t(o,l){if(1&o){const e=t.EpF();t.TgZ(0,"tr",42)(1,"td"),t._UZ(2,"app-text",43),t.qZA(),t.TgZ(3,"td"),t._UZ(4,"app-text",44),t.qZA(),t.TgZ(5,"td"),t._UZ(6,"app-text",44),t.qZA(),t.TgZ(7,"td"),t._UZ(8,"app-text",44),t.qZA(),t.TgZ(9,"td"),t._UZ(10,"app-text",44),t.qZA(),t.TgZ(11,"td",34)(12,"i",45),t.NdJ("click",function(){const p=t.CHM(e).index,A=t.oxw();return t.KtG(A.deleteAccountFromJournalEntry(p))}),t.qZA(),t.TgZ(13,"i",46),t.NdJ("click",function(){const c=t.CHM(e),p=c.$implicit,A=c.index,b=t.oxw();return t.KtG(b.fillDataToUpdateAccountOnJournalEntry(p.value,A))}),t.qZA()()()}if(2&o){const e=l.$implicit;t.xp6(2),t.Q6J("readOnly",!0)("value",e.value.account_name),t.xp6(2),t.Q6J("readOnly",!0)("value",e.value.debit)("text","")("placeholder",""),t.xp6(2),t.Q6J("readOnly",!0)("value",e.value.credit)("text","")("placeholder",""),t.xp6(2),t.Q6J("readOnly",!0)("value",(null==e.value.files?null:e.value.files.length)+"files")("text","")("placeholder",""),t.xp6(2),t.Q6J("readOnly",!0)("value",e.value.description)("text","")("placeholder","")}}const gt=function(){return{type:"name",length:3}};let S=(()=>{class o{constructor(e,n,c,p,A,b,J){this.http=e,this.fb=n,this.router=c,this.route=p,this.journalService=A,this.toastr=b,this.translateService=J,this.accountsConfig=$.a,this.workTypesConfig=tt.K,this.contructionsNameConfig=et.N,this.projectsConfig=nt.K,this.permissions=s,this.showImportForm=!1,this.isLoading=!1,this.importError=[],this.accounts=[],this.currencies=[],this.unsubscribe=new D.x,this.formGroup=this.initForm(),this.title="add_new_journal_entry",this.actionJournal="create",this.creditAccountsValue=0,this.debitAccountsValue=0,this.accountAction="create",this.savedAccounts=[],this.index=0,this.messageError="",this.values=new FormData,this.fileName="",this.clearInput=!1,this.maxDate=new Date}ngOnInit(){this.route.snapshot.paramMap.get("id")&&(this.activeId=this.route.snapshot.paramMap.get("id"),this.title="update_journal_entry",this.actionJournal="update",this.route.data.pipe((0,j.R)(this.unsubscribe)).subscribe({next:e=>{this.data=e,this.fillForm(this.data.journal.data)},error:e=>{}})),this.http.getWithParam(this.accountsConfig.api.getNotParent,{limit:"all"}).subscribe({next:e=>{this.accounts=e.data},error:e=>{this.accounts=[]}})}initForm(){return this.fb.group({id:[Number],title:["",[C.kI.required]],project_id:[""],construction_name_id:[""],work_type_id:[""],date:[(new Date).toLocaleDateString("en-CA"),[C.kI.required]],invoice_image:[""],description:[""],details:this.fb.array([]),account:this.fb.group({id:[Number],credit:[0],debit:[0],account_id:[""],description:[""],account_type:[""],account_name:[""],files:this.fb.array([]),currency_id:[""],currency_name:[""],currency_rate:[""]})})}get accountsAtJournal(){return this.formGroup.get("details")}get accountAtJournal(){return this.formGroup.get("account")}get files(){return this.accountAtJournal?.get("files")}onSubmit(){new FormData,this.formGroup.invalid?this.formGroup.markAllAsTouched():this.accountsAtJournal.length>=2?this.debitAccountsValue==this.creditAccountsValue&&0!=this.creditAccountsValue?(this.convertFormGroupToFormData(),"create"==this.actionJournal?this.journalService.create(this.values).subscribe(n=>{this.toastr.success(n.message),this.errors=null,this.clearAllForm(),this.router.navigate(["/key/accounting/journal-entry"])},n=>{this.errors=n.error.errors,this.toastr.error(n.error.message)}):this.journalService.update(this.values).subscribe(n=>{this.toastr.success(n.message),this.errors=null,this.clearAllForm(),this.router.navigate(["/key/accounting/journal-entry"])},n=>{this.errors=n.error.errors})):this.toastr.error(this.translateService.instant("credit_amount_and_debit_amount_must_be_equal_and_more_than_zero")):this.toastr.error(this.translateService.instant("accounts_at_journal_must_be_at_least_2_account"))}convertFormGroupToFormData(){this.values.set("id",this.formGroup.get("id")?.value),this.values.set("title",this.formGroup.get("title")?.value),this.values.set("date",this.formGroup.get("date")?.value),this.values.set("description",this.formGroup.get("description")?.value);let e=this.formGroup.get("details");for(let n=0;n<e.length;n++){const c=e.at(n);let p=null;c.get("id")?.value&&(p=c.get("id")?.value);const A=c.get("credit")?.value,b=c.get("debit")?.value,J=c.get("account_id")?.value,Ot=c.get("description")?.value,V=c.get("files")?.value;this.values.set(`details[${n}][id]`,p),this.values.set(`details[${n}][credit]`,A),this.values.set(`details[${n}][debit]`,b),this.values.set(`details[${n}][account_id]`,J),this.values.set(`details[${n}][description]`,Ot),V&&Object.entries(V).forEach(([bt,Et])=>{this.values.set(`details[${n}][files][${bt}]`,Et)})}}getAccountType(e){this.account=this.accounts.filter(n=>n.id==e.value)[0],this.formGroup.get("account")?.patchValue({account_name:this.account?.name,account_type:this.account?.account_type,account_id:e.value})}getSelectedCurrency(e){this.currency=this.currencies.filter(n=>n.id==e.value)[0],this.formGroup.get("account")?.patchValue({currency_name:this.currency?.name,currency_rate:this.currency?.price,currency_Id:e.value})}deleteAccountFromJournalEntry(e){this.accountsAtJournal.controls.forEach((n,c)=>{c==e&&(this.debitAccountsValue-=parseInt(n.value.debit),this.creditAccountsValue-=parseInt(n.value.credit))}),this.accountsAtJournal.removeAt(e)}addAccountToJournalEntry(){"update"==this.accountAction&&this.deleteAccountFromJournalEntry(this.index);this.accountAtJournal?.value.account_id&&""!=this.accountAtJournal?.value.account_id?(this.accountsAtJournal.controls.map(n=>n.value.account_id),console.log(this.accountAtJournal?.value.files),this.accountsAtJournal.push(this.fb.group({credit:this.accountAtJournal?.value.credit,debit:this.accountAtJournal?.value.debit,account_id:this.accountAtJournal?.value.account_id,description:this.accountAtJournal?.value.description,account_type:this.accountAtJournal?.value.account_type,account_name:this.accountAtJournal?.value.account_name,files:this.fb.control(this.accountAtJournal?.value.files),currency_id:this.accountAtJournal?.value.currency_id,currency_name:this.accountAtJournal?.value.currency_name,currency_rate:this.accountAtJournal?.value.currency_rate})),this.clearAccountForm()):this.toastr.error(this.translateService.instant("select_account")),this.calcTotal()}calcTotal(){this.debitAccountsValue=0,this.creditAccountsValue=0,this.accountsAtJournal.controls.forEach(e=>{this.debitAccountsValue+=parseFloat(e.value.debit),this.creditAccountsValue+=parseFloat(e.value.credit)})}fillForm(e){this.formGroup.patchValue({title:e.title,id:e.id,entry_no:e.entry_no,date:e.date,description:e.description,details:e.details}),e.details.forEach(n=>{this.accountsAtJournal.push(this.fb.group({id:n.id,account_id:n.account_id,account_name:n.account.name,account_type:n.account.account_type,description:n.description,credit:n.credit,debit:n.debit}))}),this.creditAccountsValue=e.total_credit,this.debitAccountsValue=e.total_debit}fillDataToUpdateAccountOnJournalEntry(e,n){this.clearInput=!1,this.index=n,this.accountAction="update",this.formGroup.get("account")?.patchValue({credit:e.credit,debit:e.debit,account_id:e.account_id,account_name:e.account_name,account_type:e.account_type,description:e.description,currency_name:e.currency_name,currency_rate:e.currency_rate,currency_id:e.currency_id})}clearAccountForm(){this.clearInput=!0,this.accountAction="create",this.files.clear(),this.accountAtJournal?.patchValue({currency_id:[""],credit:[0],debit:[0],account_id:[""],description:[""],account_type:[0],account_name:[""],currency_name:[""],currency_rate:[""]})}clearAllForm(){for(;0!==this.accountsAtJournal.length;)this.accountsAtJournal.removeAt(0);this.formGroup.reset(),this.creditAccountsValue=0,this.debitAccountsValue=0;for(const[e,n]of this.values)this.values.delete(e)}onFileSelected(e){if(e.target.files[0]){for(const[n,c]of Object.entries(e.target.files))this.values.set(`invoice_image[${n}]`,e.target.files[n]);this.fileName=e.target.files[0].name}}onFileSelectedDetails(e){if(this.files.clear(),e.target.files[0]){for(const[n,c]of Object.entries(e.target.files))this.files?.push(this.fb.control(e.target.files[n]));this.fileName=e.target.files[0].name,this.clearInput=!1}}ngOnDestroy(){this.unsubscribe.next(!0),this.unsubscribe.complete()}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(I.O),t.Y36(C.qu),t.Y36(d.F0),t.Y36(d.gz),t.Y36(F),t.Y36(M._W),t.Y36(O.sK))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-add-journal-entry-pm"]],decls:84,vars:94,consts:[[1,"container-sm","main","rounded"],[1,"header","row","justify-content-between","align-items-center"],["routerLink","/key/accounting/journal-entry-pm",1,"title","pointer","col-md-6"],[1,"fa-solid","fa-arrow-left","me-2"],[1,"d-flex","align-items-center","justify-content-end","g-2","col-md-6"],["class","px-1",4,"ngIf"],[1,"px-1"],["routerLink","/key/accounting/journal-entry",1,"btn-cancel",3,"iconPos","icon","text"],[1,"btn-filter",3,"text","iconPos","icon","click"],["class","alert alert-danger text-center fs-5",4,"ngIf"],[3,"formGroup","onSubmit"],[1,"row"],[1,"mb-2","col-md-6"],["ngDefaultControl","","formControlName","title",3,"patternMessage","text","placeholder"],[1,"col-md-6"],["formControlName","project_id","placeholder","select",1,"",3,"text","request","optionLabel","optionValue","showClear"],["formControlName","construction_name_id","placeholder","select",1,"",3,"text","request","optionLabel","optionValue","showClear"],["formControlName","work_type_id","placeholder","select",1,"",3,"text","request","optionLabel","optionValue","showClear"],["class","col-md-6 mb-2",4,"ngIf"],[1,"col-md-6","mb-2"],["ngDefaultControl","","formControlName","date",3,"maxDate","text"],[1,"col-md-12","mb-2"],["ngDefaultControl","","formControlName","description",3,"text","placeholder"],[1,"table-responsive"],[1,"table"],[1,"table-head"],["scope","col"],["formArrayName","details",4,"ngFor","ngForOf"],["formGroupName","account"],["formControlName","account_id","placeholder","select",3,"readOnly","optionLabel","data","optionValue","filter","keydown.enter","onDropDownChange"],["formControlName","debit",3,"mode","maxFractionDigits","minFractionDigits","showButtons","readOnly","text","placeholder","keydown.enter"],["formControlName","credit",3,"mode","maxFractionDigits","minFractionDigits","showButtons","readOnly","text","placeholder","keydown.enter"],["label","","placeholder","select",3,"clear","onValueChange"],["formControlName","description",3,"readOnly","text","placeholder","keydown.enter"],[1,"action"],[1,"fa-solid","fa-plus","fs-4","main-color","pointer",3,"click"],[1,"fa-solid","fa-cancel","fs-4","text-danger","mx-2","pointer",3,"click"],[1,"total"],[1,"btn-cancel",3,"text","iconPos","icon","routerLink"],[1,"alert","alert-danger","text-center","fs-5"],[4,"ngFor","ngForOf"],["label","file",3,"onValueChange"],["formArrayName","details"],[3,"readOnly","value"],[3,"readOnly","value","text","placeholder"],[1,"fa-solid","fa-trash","fs-4","text-danger","mx-2","pointer",3,"click"],[1,"fa-solid","fa-pen-to-square","fs-4","main-color","mx-2","pointer",3,"click"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"h5",2),t._UZ(3,"i",3),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"div",4),t.YNc(7,ut,2,4,"div",5),t.TgZ(8,"div",6),t._UZ(9,"app-button",7),t.qZA(),t.TgZ(10,"div",6)(11,"app-button",8),t.NdJ("click",function(){return n.onSubmit()}),t.qZA()()()(),t.YNc(12,dt,3,3,"div",9),t.TgZ(13,"app-form",10),t.NdJ("onSubmit",function(){return n.onSubmit()}),t.TgZ(14,"div",11)(15,"div",12),t._UZ(16,"app-text",13),t.qZA(),t.TgZ(17,"div",14),t._UZ(18,"app-dropdown",15),t.qZA(),t.TgZ(19,"div",14),t._UZ(20,"app-dropdown",16),t.qZA(),t.TgZ(21,"div",14),t._UZ(22,"app-dropdown",17),t.qZA(),t.YNc(23,mt,2,0,"div",18),t.TgZ(24,"div",19),t._UZ(25,"app-date",20),t.qZA(),t.TgZ(26,"div",21),t._UZ(27,"app-textarea",22),t.qZA()(),t.TgZ(28,"div",23)(29,"table",24)(30,"thead",25)(31,"tr")(32,"th",26),t._uU(33),t.ALo(34,"translate"),t.qZA(),t.TgZ(35,"th",26),t._uU(36),t.ALo(37,"translate"),t.qZA(),t.TgZ(38,"th",26),t._uU(39),t.ALo(40,"translate"),t.qZA(),t.TgZ(41,"th",26),t._uU(42),t.ALo(43,"translate"),t.qZA(),t.TgZ(44,"th",26),t._uU(45),t.ALo(46,"translate"),t.qZA(),t.TgZ(47,"th",26),t._uU(48),t.ALo(49,"translate"),t.qZA()()(),t.TgZ(50,"tbody"),t.YNc(51,_t,14,18,"tr",27),t.TgZ(52,"tr",28)(53,"td")(54,"app-dropdown",29),t.NdJ("keydown.enter",function(){return n.addAccountToJournalEntry()})("onDropDownChange",function(p){return n.getAccountType(p)}),t.qZA()(),t.TgZ(55,"td")(56,"app-number-input",30),t.NdJ("keydown.enter",function(){return n.addAccountToJournalEntry()}),t.qZA()(),t.TgZ(57,"td")(58,"app-number-input",31),t.NdJ("keydown.enter",function(){return n.addAccountToJournalEntry()}),t.qZA()(),t.TgZ(59,"td")(60,"app-file-upload",32),t.NdJ("onValueChange",function(p){return n.onFileSelectedDetails(p)}),t.qZA()(),t.TgZ(61,"td")(62,"app-text",33),t.NdJ("keydown.enter",function(){return n.addAccountToJournalEntry()}),t.qZA()(),t.TgZ(63,"td",34)(64,"i",35),t.NdJ("click",function(){return n.addAccountToJournalEntry()}),t.qZA(),t.TgZ(65,"i",36),t.NdJ("click",function(){return n.clearAccountForm()}),t.qZA()()(),t.TgZ(66,"tr")(67,"th",37),t._uU(68),t.ALo(69,"translate"),t.qZA(),t.TgZ(70,"th",37),t._uU(71),t.qZA(),t.TgZ(72,"th",37),t._uU(73),t.qZA(),t.TgZ(74,"th",37),t._uU(75),t.qZA(),t.TgZ(76,"th",37),t._uU(77),t.qZA(),t.TgZ(78,"th",37),t._uU(79),t.qZA(),t.TgZ(80,"th",37),t._uU(81),t.qZA(),t.TgZ(82,"th",37),t._uU(83),t.qZA()()()()()()()),2&e&&(t.xp6(4),t.hij("",t.lcZ(5,77,n.title)," "),t.xp6(3),t.Q6J("ngIf","update_journal_entry"==n.title),t.xp6(2),t.Q6J("iconPos","left")("icon","fa-solid fa-ban")("text","cancel"),t.xp6(2),t.Q6J("text","save")("iconPos","left")("icon","fa-solid fa-check"),t.xp6(1),t.Q6J("ngIf",n.errors),t.xp6(1),t.Q6J("formGroup",n.formGroup),t.xp6(3),t.Tol("d-flex flex-column justify-content-between "),t.Q6J("patternMessage",t.DdM(93,gt))("text","title")("placeholder",""),t.xp6(2),t.Q6J("text","project")("request",n.projectsConfig.api.get)("optionLabel","project_name")("optionValue","id")("showClear",!0),t.xp6(2),t.Q6J("text","construction_name")("request",n.contructionsNameConfig.api.get)("optionLabel","name")("optionValue","id")("showClear",!0),t.xp6(2),t.Q6J("text","work_type")("request",n.workTypesConfig.api.get)("optionLabel","name")("optionValue","id")("showClear",!0),t.xp6(1),t.Q6J("ngIf","add_new_journal_entry"==n.title),t.xp6(2),t.Tol("d-flex flex-column justify-content-between "),t.Q6J("maxDate",n.maxDate)("text","date"),t.xp6(2),t.Tol("d-flex flex-column justify-content-between "),t.Q6J("text","description")("placeholder",""),t.xp6(6),t.Oqu(t.lcZ(34,79,"accounts")),t.xp6(3),t.Oqu(t.lcZ(37,81,"de_amount")),t.xp6(3),t.Oqu(t.lcZ(40,83,"cr_amount")),t.xp6(3),t.Oqu(t.lcZ(43,85,"files")),t.xp6(3),t.Oqu(t.lcZ(46,87,"description")),t.xp6(3),t.Oqu(t.lcZ(49,89,"actions")),t.xp6(3),t.Q6J("ngForOf",n.accountsAtJournal.controls),t.xp6(3),t.Q6J("readOnly","update"==n.accountAction)("optionLabel","name_code")("data",n.accounts)("optionValue","id")("filter",!0),t.xp6(2),t.Q6J("mode","decimal")("maxFractionDigits",3)("minFractionDigits",2)("showButtons",!1)("readOnly","debit"==(null==n.accountAtJournal||null==n.accountAtJournal.value?null:n.accountAtJournal.value.account_type)||""==(null==n.accountAtJournal||null==n.accountAtJournal.value?null:n.accountAtJournal.value.account_id)||null==(null==n.accountAtJournal||null==n.accountAtJournal.value?null:n.accountAtJournal.value.account_id)||(null==n.accountAtJournal||null==n.accountAtJournal.value?null:n.accountAtJournal.value.credit)>0)("text","")("placeholder",""),t.xp6(2),t.Q6J("mode","decimal")("maxFractionDigits",3)("minFractionDigits",2)("showButtons",!1)("readOnly","credit"==(null==n.accountAtJournal||null==n.accountAtJournal.value?null:n.accountAtJournal.value.account_type)||""==(null==n.accountAtJournal||null==n.accountAtJournal.value?null:n.accountAtJournal.value.account_id)||null==(null==n.accountAtJournal||null==n.accountAtJournal.value?null:n.accountAtJournal.value.account_id)||(null==n.accountAtJournal||null==n.accountAtJournal.value?null:n.accountAtJournal.value.debit)>0)("text","")("placeholder",""),t.xp6(2),t.Q6J("clear",n.clearInput),t.xp6(2),t.Q6J("readOnly",""==(null==n.accountAtJournal||null==n.accountAtJournal.value?null:n.accountAtJournal.value.account_id)||null==(null==n.accountAtJournal||null==n.accountAtJournal.value?null:n.accountAtJournal.value.account_id))("text","")("placeholder",""),t.xp6(6),t.Oqu(t.lcZ(69,91,"total")),t.xp6(3),t.Oqu(n.debitAccountsValue),t.xp6(2),t.Oqu(n.creditAccountsValue),t.xp6(2),t.Oqu(""),t.xp6(2),t.Oqu(""),t.xp6(2),t.Oqu(""),t.xp6(2),t.Oqu(""),t.xp6(2),t.Oqu(""))},dependencies:[a.sg,a.O5,d.rH,U.r,ot.U,C.Fj,C.JJ,C.JL,C.sg,C.u,C.x0,C.CE,at.T,rt.D,lt.J,it.I,ct.R,st.Y,a.Nd,O.X$],styles:["[_nghost-%COMP%]   .main[_ngcontent-%COMP%]{background-color:var(--white);padding:2rem 2.8rem!important}[_nghost-%COMP%]   .main[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .import[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:1.5rem}[_nghost-%COMP%]   .main[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .import[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{font-size:1.5rem;height:30px}[_nghost-%COMP%]   .main[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .import[_ngcontent-%COMP%]   .error[_ngcontent-%COMP%]{color:var(--red);font-size:1.4rem}[_nghost-%COMP%]   .main[_ngcontent-%COMP%]   app-form[_ngcontent-%COMP%]   .entry-no[_ngcontent-%COMP%]{padding-right:1.5rem}[_nghost-%COMP%]   .main[_ngcontent-%COMP%]   app-form[_ngcontent-%COMP%]   .date[_ngcontent-%COMP%]{padding-left:1.5rem}[_nghost-%COMP%]   .main[_ngcontent-%COMP%]   app-form[_ngcontent-%COMP%]   .table-responsive[_ngcontent-%COMP%]{margin-top:3rem;margin-bottom:5rem}[_nghost-%COMP%]   .main[_ngcontent-%COMP%]   app-form[_ngcontent-%COMP%]   .table-responsive[_ngcontent-%COMP%]   .action[_ngcontent-%COMP%]{display:flex;padding:17px 5px;border:none}[_nghost-%COMP%]   .main[_ngcontent-%COMP%]   app-form[_ngcontent-%COMP%]   .table-responsive[_ngcontent-%COMP%]   .total[_ngcontent-%COMP%]{background-color:var(--mainColor)!important;color:var(--white);font-size:14px;padding:10px}"]}),o})(),ft=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-attachment-edit-journal-entry-pm"]],decls:2,vars:0,template:function(e,n){1&e&&(t.TgZ(0,"p"),t._uU(1,"attachment-edit-journal-entry-pm works!"),t.qZA())}}),o})(),q=(()=>{class o{constructor(e){this.journalService=e}resolve(e){return this.journalService.getJournalById(e.params.id)}}return o.\u0275fac=function(e){return new(e||o)(t.LFG(F))},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();const ht=[{path:m_page_list,component:X},{path:m_page_create,component:S},{path:m_page_view,component:L,resolve:{journal:q}},{path:m_page_update,component:S,resolve:{journal:q}},{path:m_page_updateAttachment,component:ft,resolve:{journal:q}}];let vt=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[d.Bz.forChild(ht),d.Bz]}),o})();var yt=r(1890),Ct=r(1471),At=r(4413),xt=r(2115),Zt=r(1019),Jt=r(8096),Tt=r(1383);let Pt=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[a.ez,vt,yt.f,Ct.X,At.e,xt.u,O.aw,Zt.i,Jt.J,Tt.m]}),o})()},1771:(P,f,r)=>{r.d(f,{U:()=>_});var a=r(9291),d=r(6223);const t=["*"];let _=(()=>{class v{constructor(){this.onSubmit=new a.vpe}ngOnChanges(g){}getFormData(){return"function"==typeof this.formData?this.formData(this.formGroup.value):{...this.formGroup.value}}reset(){this.formGroup.reset()}submit(){if(this.formGroup.markAllAsTouched(),this.formGroup.invalid)return;const g=this.getFormData();this.onSubmit.emit(g)}ngAfterContentInit(){}ngAfterContentChecked(){}ngOnDestroy(){}}return v.\u0275fac=function(g){return new(g||v)},v.\u0275cmp=a.Xpm({type:v,selectors:[["app-form"]],inputs:{formGroup:"formGroup",formData:"formData"},outputs:{onSubmit:"onSubmit"},features:[a.TTD],ngContentSelectors:t,decls:2,vars:1,consts:[[3,"formGroup","ngSubmit"]],template:function(g,y){1&g&&(a.F$t(),a.TgZ(0,"form",0),a.NdJ("ngSubmit",function(){return y.submit()}),a.Hsn(1),a.qZA()),2&g&&a.Q6J("formGroup",y.formGroup)},dependencies:[d._Y,d.JL,d.sg]}),v})()},4896:(P,f,r)=>{r.d(f,{Y:()=>m});var a=r(9291),d=r(67),t=r(6223),_=r(6814),v=r(3999);function x(s,h){1&s&&a._UZ(0,"i",7)}function g(s,h){if(1&s&&(a.TgZ(0,"label",4),a._uU(1),a.ALo(2,"titlecase"),a.ALo(3,"translate"),a.TgZ(4,"span",5),a.YNc(5,x,1,0,"i",6),a.qZA()()),2&s){const i=a.oxw();a.xp6(1),a.hij("",a.lcZ(2,2,a.lcZ(3,4,i.label))," "),a.xp6(4),a.Q6J("ngIf",i.control&&(null==i.control.errors?null:i.control.errors.required))}}function y(s,h){if(1&s&&(a.TgZ(0,"p"),a._uU(1),a.ALo(2,"translate"),a.qZA()),2&s){const i=a.oxw();a.xp6(1),a.Oqu(a.lcZ(2,1,i.selectedFileCount+"files"))}}function T(s,h){if(1&s&&(a.TgZ(0,"p"),a._uU(1),a.ALo(2,"translate"),a.qZA()),2&s){const i=a.oxw();a.xp6(1),a.Oqu(i.selectedFileName?i.selectedFileName:a.lcZ(2,1,i.placeholder))}}let m=(()=>{class s extends d.t{set clear(i){i&&(this.selectedFileCount=0,this.selectedFileName="",this.value=null)}constructor(i){super(),this.formGroupDirective=i,this.uploadedFiles=[],this.multiple=!0,this.label="Upload",this.placeholder="drag_and_drop_you_file_or_Click_here_to_upload",this.accept=".jpg,.jpeg,.png,.pdf,.doc,.docx,.xls,.xlsx",this.onValueChange=new a.vpe,this.selectedFileName="",this.selectedFileCount=0}onFileSelected(i){this.onValueChange.emit(i),this.selectedFileName=i.target.files[0].name,i.target.files&&i.target.files.length>0&&(this.selectedFileCount=i.target.files.length)}onUpload(i){for(let u of i.files)this.uploadedFiles.push(u)}}return s.\u0275fac=function(i){return new(i||s)(a.Y36(t.sg,8))},s.\u0275cmp=a.Xpm({type:s,selectors:[["app-file-upload"]],inputs:{value:"value",multiple:"multiple",label:"label",placeholder:"placeholder",accept:"accept",clear:"clear"},outputs:{onValueChange:"onValueChange"},features:[a._Bn([{provide:t.JU,useExisting:s,multi:!0},{provide:t.Cf,useExisting:s,multi:!0}]),a.qOj],decls:5,vars:6,consts:[[1,"file-input"],["for","file",4,"ngIf"],[4,"ngIf"],["id","file","type","file","id","file",1,"form-control",3,"multiple","ngModel","accept","ngModelChange","change"],["for","file"],[1,"required-aster"],["class","fa-solid fa-asterisk",4,"ngIf"],[1,"fa-solid","fa-asterisk"]],template:function(i,u){1&i&&(a.TgZ(0,"div",0),a.YNc(1,g,6,6,"label",1),a.YNc(2,y,3,3,"p",2),a.YNc(3,T,3,3,"p",2),a.TgZ(4,"input",3),a.NdJ("ngModelChange",function(Z){return u.value=Z})("change",function(Z){return u.onFileSelected(Z)}),a.qZA()()),2&i&&(a.xp6(1),a.Q6J("ngIf",u.label),a.xp6(1),a.Q6J("ngIf",u.selectedFileCount>1),a.xp6(1),a.Q6J("ngIf",u.selectedFileCount<=1),a.xp6(1),a.Q6J("multiple",u.multiple)("ngModel",u.value)("accept",u.accept))},dependencies:[_.O5,t.Fj,t.JJ,t.On,_.rS,v.X$],styles:[".text-danger[_ngcontent-%COMP%]{font-size:14px}.file-input[_ngcontent-%COMP%]{position:relative}.file-input[_ngcontent-%COMP%]   input[type=file][_ngcontent-%COMP%]{position:absolute;left:0;top:0;opacity:0;width:100%;height:100%;min-width:200px!important}.file-input[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{display:block;padding:8px;border:1px dashed #7ca0c5;border-radius:8px;font-size:14px;cursor:pointer;min-width:200px!important;text-align:center;overflow:hidden}"]}),s})()},5253:(P,f,r)=>{r.d(f,{R:()=>m});var a=r(67),d=r(6223),t=r(9291),_=r(6814),v=r(6218),x=r(3999);function g(s,h){1&s&&t._UZ(0,"i",6)}function y(s,h){if(1&s&&(t.TgZ(0,"label"),t._uU(1),t.ALo(2,"titlecase"),t.ALo(3,"translate"),t.TgZ(4,"span",4),t.YNc(5,g,1,0,"i",5),t.qZA()()),2&s){const i=t.oxw();t.xp6(1),t.hij("",t.lcZ(2,2,t.lcZ(3,4,i.text))," "),t.xp6(4),t.Q6J("ngIf",i.control&&(null==i.control.errors?null:i.control.errors.required))}}function T(s,h){if(1&s&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&s){const i=t.oxw();t.Tol("text-danger"),t.xp6(1),t.Oqu(i.object.keys(i.control.errors)[0])}}let m=(()=>{class s extends a.t{constructor(i){super(),this.formGroupDirective=i,this.placeholder="",this.rows="2",this.cols="",this.readOnly=!1,this.class="d-flex flex-column justify-content-between",this.object=Object}writeValue(i){this.value=i}onValueChange(i){this.onChange(i.target.value),this.onTouched()}}return s.\u0275fac=function(i){return new(i||s)(t.Y36(d.sg,8))},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-textarea"]],inputs:{value:"value",text:"text",placeholder:"placeholder",rows:"rows",cols:"cols",readOnly:"readOnly",class:"class",type:"type"},features:[t._Bn([{provide:d.JU,useExisting:s,multi:!0},{provide:d.Cf,useExisting:s,multi:!0}]),t.qOj],decls:4,vars:8,consts:[[3,"ngClass"],[4,"ngIf"],["pInputTextarea","",3,"rows","cols","ngModel","placeholder","disabled","ngModelChange","input"],[3,"class",4,"ngIf"],[1,"required-aster"],["class","fa-solid fa-asterisk",4,"ngIf"],[1,"fa-solid","fa-asterisk"]],template:function(i,u){1&i&&(t.TgZ(0,"div",0),t.YNc(1,y,6,6,"label",1),t.TgZ(2,"textarea",2),t.NdJ("ngModelChange",function(Z){return u.value=Z})("input",function(Z){return u.onValueChange(Z)}),t.qZA(),t.YNc(3,T,2,3,"span",3),t.qZA()),2&i&&(t.Q6J("ngClass",u.class),t.xp6(1),t.Q6J("ngIf",u.text),t.xp6(1),t.Q6J("rows",u.rows)("cols",u.cols)("ngModel",u.value)("placeholder",u.placeholder)("disabled",u.readOnly),t.xp6(1),t.Q6J("ngIf",u.control&&u.control.errors&&(u.control.touched||u.formGroupDirective.submitted)))},dependencies:[_.mk,_.O5,d.Fj,d.JJ,d.On,v.g,_.rS,x.X$],styles:[".text-danger[_ngcontent-%COMP%]{font-size:14px}"]}),s})()},8718:(P,f,r)=>{r.d(f,{x:()=>a});const a={api:{create:"user/create",get:"user",getById:"user/",update:"user/update/",delete:"user/",exportCvs:"user/export/cvs",exportPdf:"user/export/pdf",import:"user/import",export:"user/data/export"},page:{list:"",view:"view/:id"}}},9773:(P,f,r)=>{r.d(f,{R:()=>v});var a=r(9360),d=r(8251),t=r(4829),_=r(2420);function v(x){return(0,a.e)((g,y)=>{(0,t.Xf)(x).subscribe((0,d.x)(y,()=>y.complete(),_.Z)),!y.closed&&g.subscribe(y)})}}}]);