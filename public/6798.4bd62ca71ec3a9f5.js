"use strict";(self.webpackChunkkey=self.webpackChunkkey||[]).push([[6798],{6798:(M,x,i)=>{i.r(x),i.d(x,{ProductsModule:()=>R});var e=i(6814),C=i(2954),p=i(5861),u=function(n){return n.create="Create Product",n.view="View Product",n.edit="Edit Product",n.delete="Delete Product",n}(u||{}),_=i(3058);const h=n=>{return{cols:[{field:"code",label:"code",class:""},{field:"name",label:"name",class:""},{field:"quantity",label:"quantity",class:"",format:l=>l?.quantity?l?.quantity:"0"},{field:"selling_price",label:"selling_price",class:"",format:l=>l?.selling_price?l?.selling_price:"-"},{field:"category",label:"category",class:"",format:l=>l.category.name?l.category.name:"-"},{field:"material",label:"material",class:"",format:l=>l?.material?l?.material:"-"},{label:"action",actions:[{id:u.delete,icon:"trash",class:"main-color",fun:(l=(0,p.Z)(function*(o){return yield n.productService.delete(o)}),function(s){return l.apply(this,arguments)})},{id:u.edit,icon:"pen-to-square",class:"main-color",fun:function(){var l=(0,p.Z)(function*(o){return yield n.productService.openDialogToUpdateProduct(o)});return function(s){return l.apply(this,arguments)}}()}]}],Request:_.s.api.get};var l};var m=i(5946),g=i(6924),T=i(8718),d=i(5219),t=i(9291),c=i(6983),b=i(8763),f=i(3999),F=i(2377),A=i(359),L=i(4896),P=i(4779),U=i(5077),E=i(4811),O=i(8275);function J(n,l){if(1&n){const o=t.EpF();t.TgZ(0,"div",17)(1,"button",18),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"ul",19)(5,"li",20),t.NdJ("click",function(){t.CHM(o);const r=t.oxw();return t.KtG(r.exportExample())}),t._uU(6),t.ALo(7,"titlecase"),t.ALo(8,"translate"),t.qZA()()()}2&n&&(t.xp6(2),t.hij(" ",t.lcZ(3,2,"export")," "),t.xp6(4),t.hij(" ",t.lcZ(7,4,t.lcZ(8,6,"example"))," "))}function S(n,l){if(1&n){const o=t.EpF();t.TgZ(0,"app-button",21),t.NdJ("click",function(){t.CHM(o);const r=t.oxw();return t.KtG(r.openDialogToCreate())}),t.qZA()}if(2&n){const o=t.oxw();t.Tol("btn-filter "),t.Q6J("text","new")("icon",o.icon.PLUS)("iconPos","left")}}function I(n,l){if(1&n&&(t.TgZ(0,"div")(1,"span",29),t._uU(2),t.qZA(),t.TgZ(3,"span",29),t._uU(4),t.qZA()()),2&n){const o=l.$implicit;t.xp6(2),t.hij(" row :",o.row_number," "),t.xp6(2),t.Oqu(o.error)}}function N(n,l){if(1&n){const o=t.EpF();t.TgZ(0,"div",22),t.YNc(1,I,5,2,"div",23),t.TgZ(2,"app-file-upload",24),t.NdJ("onValueChange",function(r){t.CHM(o);const Z=t.oxw();return t.KtG(Z.onFileSelected(r))}),t.qZA(),t.TgZ(3,"div",25)(4,"app-button",26),t.NdJ("click",function(){t.CHM(o);const r=t.oxw();return t.KtG(r.import())}),t._UZ(5,"i",27),t.qZA(),t.TgZ(6,"app-button",28),t.NdJ("click",function(){t.CHM(o);const r=t.oxw();return t.KtG(r.closeSectionToImport())}),t.qZA()()()}if(2&n){const o=t.oxw();t.xp6(1),t.Q6J("ngForOf",o.importErrors),t.xp6(1),t.Q6J("multiple",!1)("accept",".csv,.xls,.xlsx")("label","import"),t.xp6(2),t.Q6J("text","save")("loading",o.isLoading),t.xp6(2),t.Q6J("text","cancel")}}const y=function(n){return[n]},D=[{path:"",component:(()=>{class n{constructor(o,s,r){this.productService=o,this.toastr=s,this.translateService=r,this.showImportForm=!1,this.importErrors=[],this.fileName="",this.values=new FormData,this.isLoading=!1,this.sortConfig=[{optionLabel:"label",optionValue:"field",key:"sort_by",placeholder:"sort_by",data:[{label:"name",field:"name"},{label:"purchase_price",field:"purchase_price"},{label:"selling_price",field:"selling_price"},{label:"creator",field:"creator_id"},{label:"quantity",field:"quantity"}]},{optionLabel:"label",optionValue:"field",key:"sort_type",placeholder:"sort_type",data:[{label:m.q.asc,field:m.q.asc},{label:m.q.desc,field:m.q.desc}]}],this.filtersConfig=[{field:"search",label:"search",type:g.W.TEXT,placeholder:"search"},{field:"creator_id",label:"created_by",type:g.W.SELECT,options:{value:"id",label:"name"},request:T.x.api.get,placeholder:"select"},{field:"from",label:"from",type:g.W.DATE},{field:"to",label:"to",type:g.W.DATE}],this.permissions=u,this.tableConfig=h(this),this.icon=d.dv}openDialogToCreate(){var o=this;return(0,p.Z)(function*(){(yield o.productService.openDialogToCreateUnitType())&&(o.tableConfig=h(o))})()}openSectionToImport(){this.showImportForm=!0}closeSectionToImport(){this.fileName="",this.showImportForm=!1,this.importErrors=[]}exportExample(){this.productService.exportExample().subscribe(o=>{window.open(o.file_path)})}onFileSelected(o){o.target.files[0]&&(this.fileName=o.target.files[0].name,this.values.set("file",o.target.files[0]))}import(){this.fileName?(this.isLoading=!0,this.productService.import(this.values).subscribe(o=>{this.toastr.success(o.message),this.isLoading=!1,this.fileName="",this.closeSectionToImport(),this.tableConfig=h(this)},o=>{this.isLoading=!1,this.importErrors=o.error.errors,o.error.message&&this.toastr.error(o.error.message)})):this.toastr.error(this.translateService.instant("select_file"))}}return n.\u0275fac=function(o){return new(o||n)(t.Y36(c.M),t.Y36(b._W),t.Y36(f.sK))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-list"]],decls:20,vars:19,consts:[[1,"page-card"],[1,"d-flex","align-items-center","justify-content-between"],[1,"title"],[1,"d-flex","gap-2"],["class","dropdown",4,"hasPermissions"],[3,"text","click"],[3,"text","class","icon","iconPos","click",4,"hasPermissions"],["class","import",4,"ngIf"],[1,"d-flex","flex-row","align-items-center","justify-content-between"],[3,"SortConfig"],["sort",""],[3,"config"],["filter",""],[1,"table","mt-2"],[3,"tableConfig","pagination","filter","sort"],[1,"d-flex","align-items-center","justify-content-center"],["pagination",""],[1,"dropdown"],["type","button","id","dropdownMenuButton1","data-bs-toggle","dropdown","aria-expanded","false",1,"btn","btn-cancel","dropdown-toggle"],["aria-labelledby","dropdownMenuButton1",1,"dropdown-menu"],[1,"pointer","dropdown-item",3,"click"],[3,"text","icon","iconPos","click"],[1,"import"],[4,"ngFor","ngForOf"],[3,"multiple","accept","label","onValueChange"],[1,"d-flex","gap-2","align-items-center","mt-3"],[3,"text","loading","click"],[1,"fa-solid","fa-check","px-2"],[1,"btn-cancel",3,"text","click"],[1,"text-error"]],template:function(o,s){if(1&o&&(t.TgZ(0,"div",0)(1,"div",1)(2,"h5",2),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"div",3),t.YNc(6,J,9,8,"div",4),t.TgZ(7,"app-button",5),t.NdJ("click",function(){return s.openSectionToImport()}),t.qZA(),t.YNc(8,S,1,5,"app-button",6),t.qZA()(),t.YNc(9,N,7,7,"div",7),t.TgZ(10,"div",8),t._UZ(11,"ukt-sort",9,10)(13,"ukt-filter",11,12),t.qZA(),t.TgZ(15,"div",13),t._UZ(16,"app-table",14),t.qZA(),t.TgZ(17,"div",15),t._UZ(18,"ukt-pagination",null,16),t.qZA()()),2&o){const r=t.MAs(12),Z=t.MAs(14),q=t.MAs(19);t.xp6(3),t.Oqu(t.lcZ(4,13,"list_of_products")),t.xp6(3),t.Q6J("hasPermissions",t.VKq(15,y,s.permissions.create)),t.xp6(1),t.Tol("btn-cancel"),t.Q6J("text","import"),t.xp6(1),t.Q6J("hasPermissions",t.VKq(17,y,s.permissions.create)),t.xp6(1),t.Q6J("ngIf",s.showImportForm),t.xp6(2),t.Q6J("SortConfig",s.sortConfig),t.xp6(2),t.Q6J("config",s.filtersConfig),t.xp6(3),t.Q6J("tableConfig",s.tableConfig)("pagination",q)("filter",Z)("sort",r)}},dependencies:[e.sg,e.O5,F.a,A.Q,L.Y,P.r,U.z,E.x,O.z,e.rS,f.X$],styles:[".dropdown[_ngcontent-%COMP%]{background-color:transparent!important}.dropdown[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:transparent!important;border:1px solid var(--mainColor);font-size:1.5rem;padding:6px}.dropdown[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{font-size:1.5rem}.import[_ngcontent-%COMP%]{padding:20px;border:2px solid var(--mainColor);border-radius:8px;margin:10px 0}"]}),n})()}];let Q=(()=>{class n{}return n.\u0275fac=function(o){return new(o||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[C.Bz.forChild(D),C.Bz]}),n})();var Y=i(8096),j=i(1019),w=i(1890),B=i(4413),K=i(2115),V=i(1471),W=i(1383);let R=(()=>{class n{}return n.\u0275fac=function(o){return new(o||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[e.ez,Q,V.X,K.u,B.e,w.f,j.i,Y.J,f.aw,W.m]}),n})()},4896:(M,x,i)=>{i.d(x,{Y:()=>T});var e=i(9291),C=i(67),p=i(6223),u=i(6814),_=i(3999);function h(a,d){1&a&&e._UZ(0,"i",7)}function m(a,d){if(1&a&&(e.TgZ(0,"label",4),e._uU(1),e.ALo(2,"titlecase"),e.ALo(3,"translate"),e.TgZ(4,"span",5),e.YNc(5,h,1,0,"i",6),e.qZA()()),2&a){const t=e.oxw();e.xp6(1),e.hij("",e.lcZ(2,2,e.lcZ(3,4,t.label))," "),e.xp6(4),e.Q6J("ngIf",t.control&&(null==t.control.errors?null:t.control.errors.required))}}function v(a,d){if(1&a&&(e.TgZ(0,"p"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&a){const t=e.oxw();e.xp6(1),e.Oqu(e.lcZ(2,1,t.selectedFileCount+"files"))}}function g(a,d){if(1&a&&(e.TgZ(0,"p"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&a){const t=e.oxw();e.xp6(1),e.Oqu(t.selectedFileName?t.selectedFileName:e.lcZ(2,1,t.placeholder))}}let T=(()=>{class a extends C.t{set clear(t){t&&(this.selectedFileCount=0,this.selectedFileName="",this.value=null)}constructor(t){super(),this.formGroupDirective=t,this.uploadedFiles=[],this.multiple=!0,this.label="Upload",this.placeholder="drag_and_drop_you_file_or_Click_here_to_upload",this.accept=".jpg,.jpeg,.png,.pdf,.doc,.docx,.xls,.xlsx",this.onValueChange=new e.vpe,this.selectedFileName="",this.selectedFileCount=0}onFileSelected(t){this.onValueChange.emit(t),this.selectedFileName=t.target.files[0].name,t.target.files&&t.target.files.length>0&&(this.selectedFileCount=t.target.files.length)}onUpload(t){for(let c of t.files)this.uploadedFiles.push(c)}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(p.sg,8))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-file-upload"]],inputs:{value:"value",multiple:"multiple",label:"label",placeholder:"placeholder",accept:"accept",clear:"clear"},outputs:{onValueChange:"onValueChange"},features:[e._Bn([{provide:p.JU,useExisting:a,multi:!0},{provide:p.Cf,useExisting:a,multi:!0}]),e.qOj],decls:5,vars:6,consts:[[1,"file-input"],["for","file",4,"ngIf"],[4,"ngIf"],["id","file","type","file","id","file",1,"form-control",3,"multiple","ngModel","accept","ngModelChange","change"],["for","file"],[1,"required-aster"],["class","fa-solid fa-asterisk",4,"ngIf"],[1,"fa-solid","fa-asterisk"]],template:function(t,c){1&t&&(e.TgZ(0,"div",0),e.YNc(1,m,6,6,"label",1),e.YNc(2,v,3,3,"p",2),e.YNc(3,g,3,3,"p",2),e.TgZ(4,"input",3),e.NdJ("ngModelChange",function(f){return c.value=f})("change",function(f){return c.onFileSelected(f)}),e.qZA()()),2&t&&(e.xp6(1),e.Q6J("ngIf",c.label),e.xp6(1),e.Q6J("ngIf",c.selectedFileCount>1),e.xp6(1),e.Q6J("ngIf",c.selectedFileCount<=1),e.xp6(1),e.Q6J("multiple",c.multiple)("ngModel",c.value)("accept",c.accept))},dependencies:[u.O5,p.Fj,p.JJ,p.On,u.rS,_.X$],styles:[".file-input[_ngcontent-%COMP%]{position:relative}.file-input[_ngcontent-%COMP%]   input[type=file][_ngcontent-%COMP%]{position:absolute;left:0;top:0;opacity:0;width:100%;height:100%;min-width:200px!important}.file-input[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{display:block;padding:8px;border:1px dashed #7ca0c5;border-radius:8px;font-size:14px;cursor:pointer;min-width:200px!important;text-align:center;overflow:hidden}"]}),a})()}}]);