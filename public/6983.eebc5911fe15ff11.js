"use strict";(self.webpackChunkkey=self.webpackChunkkey||[]).push([[6983],{4605:(T,m,o)=>{o.d(m,{h:()=>u});const u={api:{create:"supplier/create",get:"supplier",getUsers:"user",getById:"supplier/",update:"supplier/update/",delete:"supplier/",export:"supplier/export",exportExample:"supplier/export/example",import:"supplier/import",getCurrencies:"currency",getAccounts:"account",getCountries:"address/country",getStates:"address/state",getCities:"address/city",getCountryById:"address/country/",getStateById:"address/state/",getCityById:"address/city/"},page:{list:"",view:""}}},336:(T,m,o)=>{o.d(m,{r:()=>u});const u={api:{create:"brand/create",get:"brand",getById:"brand/",update:"brand/update/",delete:"brand/"},page:{list:"",update:"",create:"",view:"brand/view/:id"}}},3058:(T,m,o)=>{o.d(m,{s:()=>u});const u={api:{create:"product/create",get:"product",getById:"product/",update:"product/update/",delete:"product/",exportCvs:"product/export/cvs",exportPdf:"product/export/pdf",importAccount:"product/import"},page:{list:"",update:"",create:"",view:"products/view/:id"}}},6983:(T,m,o)=>{o.d(m,{M:()=>P});var u=o(5861),f=o(3058),i=o(6223),b=o(8645),e=o(2572),C=o(9773),Z=o(336),g=o(1494),I=o(4605),t=o(9291),U=o(8763),A=o(5118),F=o(5894),j=o(3673),N=o(7625),D=o(6814),S=o(1771),L=o(8614),l=o(3838),v=o(5253),r=o(5304),s=o(4779),c=o(3999);function J(p,x){if(1&p&&(t.TgZ(0,"p",28),t._uU(1),t.qZA()),2&p){const a=x.$implicit;t.xp6(1),t.hij(" ",a.value," ")}}function h(p,x){if(1&p&&(t.TgZ(0,"div",29),t.ynx(1,30),t._UZ(2,"app-text",31),t.BQk(),t.qZA()),2&p){const a=x.$implicit,n=x.index;t.Q6J("formArrayName","specs"),t.xp6(1),t.Q6J("formGroupName",n),t.xp6(1),t.Tol("d-flex flex-column justify-content-between mt-2"),t.Q6J("text",a.value.name)("formControlName","value")}}let w=(()=>{class p{constructor(a,n,d,G,y,k,_,q){this.fb=a,this.toastr=n,this.config=d,this.dialogRef=G,this.productService=y,this.unitService=k,this.categoryService=_,this.taxService=q,this.unsubscribe=new b.x,this.formGroup=this.initForm(),this.brandConfig=Z.r,this.SupplierConfig=I.h,this.unitTypeConfig=g.h,this.allUnits=[],this.allCategories=[],this.allTaxes=[],this.billingCities=[],this.config.data?.data&&this.fillDataToUpdate()}ngOnInit(){(0,e.a)([this.unitService.getUnitType(),this.categoryService.getCategories(),this.taxService.getAllTexes()]).pipe((0,C.R)(this.unsubscribe)).subscribe(([a,n,d])=>{this.allUnits=a?.data,this.allCategories=n?.data,this.allTaxes=d?.data})}initForm(){return this.fb.group({code:[""],id:[Number],name:["",[i.kI.required]],description:[""],brand_id:[""],suppliers:[""],category_id:["",[i.kI.required]],unit_id:["",[i.kI.required]],selling_price:["",[i.kI.required,i.kI.pattern("^[0-9 .]*$")]],purchase_price:["",[i.kI.required,i.kI.pattern("^[0-9 .]*$")]],opening_stock:["",[i.kI.required,i.kI.pattern("^[0-9 .]*$")]],quantity:["",[i.kI.required,i.kI.pattern("^[0-9]*$")]],specs:this.fb.array([this.fb.group({name:["height",[i.kI.required]],value:["",[i.kI.required]]}),this.fb.group({name:["width",[i.kI.required]],value:["",[i.kI.required]]}),this.fb.group({name:["length",[i.kI.required]],value:["",[i.kI.required]]}),this.fb.group({name:["material",[i.kI.required]],value:["",[i.kI.required]]}),this.fb.group({name:["size",[i.kI.required]],value:["",[i.kI.required]]})]),taxes_id:["",[i.kI.required]]})}get specs(){return this.formGroup.get("specs")}accept(){this.formGroup.invalid?this.formGroup.markAllAsTouched():this.config.data.data?this.productService.update(this.formGroup.value).subscribe({next:a=>{this.toastr.success(a.message),this.reject(!0)},error:a=>{this.toastr.error(a.error.message),this.errors=a.error.errors}}):this.productService.create(this.formGroup.value).subscribe({next:a=>{this.toastr.success(a.message),this.reject(!0)},error:a=>{this.toastr.error(a.error.message),this.errors=a.error.errors}})}reject(a){this.dialogRef.close(a)}fillDataToUpdate(){this.formGroup.patchValue({id:this.config.data.data.id,code:this.config.data.data.code,name:this.config.data.data.name,description:this.config.data.data.description,category_id:this.config.data.data.category_id,unit_id:this.config.data.data.unit_id,selling_price:this.config.data.data.selling_price,purchase_price:this.config.data.data.purchase_price,quantity:this.config.data.data.quantity,taxes_id:this.config.data.data.tax_id,opening_stock:this.config.data.data.opening_stock,suppliers:this.config.data.data.suppliers.map(a=>a.id)}),this.config.data.data.specs.forEach((a,n)=>{this.specs.controls[n].patchValue({value:a.value})})}ngOnDestroy(){this.unsubscribe.next(!0),this.unsubscribe.complete()}}return p.\u0275fac=function(a){return new(a||p)(t.Y36(i.qu),t.Y36(U._W),t.Y36(A.S),t.Y36(A.E7),t.Y36(P),t.Y36(F.L),t.Y36(j.G),t.Y36(N.N))},p.\u0275cmp=t.Xpm({type:p,selectors:[["app-product-form"]],decls:46,vars:71,consts:[[1,"main"],[1,"header"],[1,"d-flex","justify-content-between"],[1,"icon"],["src","assets/Tabs/Icon/Active/craete-bank.png","alt","img"],[3,"click"],[1,"fa-solid","fa-xmark","pointer","fs-1"],[1,"title"],[3,"formGroup","onSubmit"],["class","text-error",4,"ngFor","ngForOf"],[1,"row"],[1,"col-12"],["text","code","formControlName","code","ngDefaultControl","","placeholder","",3,"type"],["text","name","formControlName","name","ngDefaultControl","","placeholder","",3,"type"],["text","description","formControlName","description","ngDefaultControl","","placeholder","",3,"type"],["filterBy","name","ngDefaultControl","","formControlName","suppliers",3,"text","filter","request","optionLabel","optionValue","placeholder"],["ngDefaultControl","","formControlName","brand_id",3,"text","request","optionLabel","optionValue","placeholder"],["ngDefaultControl","","formControlName","unit_id",3,"text","request","optionLabel","optionValue","placeholder"],["ngDefaultControl","","formControlName","taxes_id",3,"text","data","optionLabel","optionValue","placeholder"],["ngDefaultControl","","formControlName","category_id",3,"text","data","optionLabel","optionValue","placeholder"],["text","selling_price","formControlName","selling_price","ngDefaultControl","","placeholder","",3,"type"],["text","purchase_price","formControlName","purchase_price","ngDefaultControl","","placeholder","",3,"type"],["text","quantity","formControlName","quantity","ngDefaultControl","","placeholder","",3,"type"],["text","opening_stock","formControlName","opening_stock","ngDefaultControl","","placeholder","",3,"type"],["class","col-12",3,"formArrayName",4,"ngFor","ngForOf"],[1,"row","g-2","my-2"],[1,"col-6"],[3,"text","click"],[1,"text-error"],[1,"col-12",3,"formArrayName"],[3,"formGroupName"],["type","type","ngDefaultControl","","placeholder","",3,"text","formControlName"]],template:function(a,n){if(1&a&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"span",3),t._UZ(4,"img",4),t.qZA(),t.TgZ(5,"span",5),t.NdJ("click",function(){return n.reject(!1)}),t._UZ(6,"i",6),t.qZA()(),t.TgZ(7,"p",7),t._uU(8),t.ALo(9,"translate"),t.qZA()(),t.TgZ(10,"app-form",8),t.NdJ("onSubmit",function(){return n.accept()}),t.YNc(11,J,2,1,"p",9),t.ALo(12,"keyvalue"),t.TgZ(13,"div",10)(14,"div",11),t._UZ(15,"app-text",12),t.qZA(),t.TgZ(16,"div",11),t._UZ(17,"app-text",13),t.qZA(),t.TgZ(18,"div",11),t._UZ(19,"app-textarea",14),t.qZA(),t.TgZ(20,"div",11),t._UZ(21,"app-multiselect",15),t.qZA(),t.TgZ(22,"div",11),t._UZ(23,"app-dropdown",16),t.qZA(),t.TgZ(24,"div",11),t._UZ(25,"app-dropdown",17),t.qZA(),t.TgZ(26,"div",11),t._UZ(27,"app-dropdown",18),t.qZA(),t.TgZ(28,"div",11),t._UZ(29,"app-dropdown",19),t.qZA(),t.TgZ(30,"div",11),t._UZ(31,"app-text",20),t.qZA(),t.TgZ(32,"div",11),t._UZ(33,"app-text",21),t.qZA(),t.TgZ(34,"div",11),t._UZ(35,"app-text",22),t.qZA(),t.TgZ(36,"div",11),t._UZ(37,"app-text",23),t.qZA(),t.TgZ(38,"div",11)(39,"div",10),t.YNc(40,h,3,6,"div",24),t.qZA()()(),t.TgZ(41,"div",25)(42,"div",26)(43,"app-button",27),t.NdJ("click",function(){return n.reject(!1)}),t.qZA()(),t.TgZ(44,"div",26)(45,"app-button",27),t.NdJ("click",function(){return n.accept()}),t.qZA()()()()()),2&a){let d;t.xp6(8),t.Oqu(t.lcZ(9,67,null!==(d=n.config.header)&&void 0!==d?d:"")),t.xp6(2),t.Q6J("formGroup",n.formGroup),t.xp6(1),t.Q6J("ngForOf",t.lcZ(12,69,n.errors)),t.xp6(4),t.Tol("d-flex flex-column justify-content-between mt-2"),t.Q6J("type","text"),t.xp6(2),t.Tol("d-flex flex-column justify-content-between mt-2"),t.Q6J("type","text"),t.xp6(2),t.Tol("d-flex flex-column justify-content-between mt-2"),t.Q6J("type","text"),t.xp6(2),t.Tol(""),t.Q6J("text","supplier")("filter",!0)("request",n.SupplierConfig.api.get)("optionLabel","name")("optionValue","id")("placeholder","select"),t.xp6(2),t.Tol("d-flex flex-column justify-content-between"),t.Q6J("text","brand")("request",n.brandConfig.api.get)("optionLabel","name")("optionValue","id")("placeholder","select"),t.xp6(2),t.Tol("d-flex flex-column justify-content-between"),t.Q6J("text","unit")("request",n.unitTypeConfig.api.get)("optionLabel","name")("optionValue","id")("placeholder","select"),t.xp6(2),t.Tol("d-flex flex-column justify-content-between"),t.Q6J("text","tax")("data",n.allTaxes)("optionLabel","name")("optionValue","id")("placeholder","select"),t.xp6(2),t.Tol("d-flex flex-column justify-content-between"),t.Q6J("text","category")("data",n.allCategories)("optionLabel","name")("optionValue","id")("placeholder","category"),t.xp6(2),t.Tol("d-flex flex-column justify-content-between mt-2"),t.Q6J("type","text"),t.xp6(2),t.Tol("d-flex flex-column justify-content-between mt-2"),t.Q6J("type","text"),t.xp6(2),t.Tol("d-flex flex-column justify-content-between mt-2"),t.Q6J("type","text"),t.xp6(2),t.Tol("d-flex flex-column justify-content-between mt-2"),t.Q6J("type","text"),t.xp6(3),t.Q6J("ngForOf",n.specs.controls),t.xp6(3),t.Tol("btn-cancel"),t.Q6J("text","cancel"),t.xp6(2),t.Tol("btn-filter"),t.Q6J("text",null==n.config.data?null:n.config.data.acceptLabel)}},dependencies:[D.sg,S.U,i.Fj,i.JJ,i.JL,i.sg,i.u,i.x0,i.CE,L.T,l.J,v.R,r.z,s.r,D.Nd,c.X$]}),p})();var O=o(1732),Q=o(3562);let P=(()=>{class p{constructor(a,n,d){this.http=a,this.dynamicDialog=n,this.toaster=d}getProducts(a){return this.http.get(f.s.api.get)}openDialogToCreateUnitType(){return this.dynamicDialog.showDialogWithComponent({showHeader:!1,header:"add_product",data:{acceptLabel:"Add",rejectLabel:"Cancel"},width:"500px",height:"auto"},w)}create(a){return this.http.post(f.s.api.create,a)}delete(a){var n=this;return(0,u.Z)(function*(){const d={showHeader:!1,header:"delete",data:{message:"do_you_want_to_delete",acceptLabel:"delete",rejectLabel:"close",data:{...a},name:"name"},width:"500px",height:"auto"};if(yield n.dynamicDialog.confirm(d))try{const y=yield n.http.delete(f.s.api.delete+a.id).toPromise();return n.toaster.success(y.message),y}catch(y){throw n.toaster.error(y.error.message),y}return!1})()}openDialogToUpdateProduct(a){var n=this;return(0,u.Z)(function*(){const d={showHeader:!1,header:"update_product",data:{acceptLabel:"update",rejectLabel:"Cancel",data:{...a}},width:"500px",height:"auto"};return yield n.dynamicDialog.showDialogWithComponent(d,w)})()}update(a){return this.http.post(f.s.api.update+a.id,a)}}return p.\u0275fac=function(a){return new(a||p)(t.LFG(O.O),t.LFG(Q.U),t.LFG(U._W))},p.\u0275prov=t.Yz7({token:p,factory:p.\u0275fac,providedIn:"root"}),p})()},1494:(T,m,o)=>{o.d(m,{h:()=>u});const u={api:{create:"unit-type/create",get:"unit-type",getById:"unit-type/",update:"unit-type/update/",delete:"unit-type/",exportCvs:"unit-type/export/cvs",exportPdf:"unit-type/export/pdf",importAccount:"unit-type/import"},page:{list:"",update:"",create:"",view:"unit-type/view/:id"}}},5894:(T,m,o)=>{o.d(m,{L:()=>L});var u=o(5861),f=o(1494),i=o(6223),b=o(8645),e=o(9291),C=o(8763),Z=o(5118),g=o(6814),I=o(1771),t=o(8614),U=o(5253),A=o(4779),F=o(3999);function j(l,v){if(1&l&&(e.TgZ(0,"div",19),e._uU(1),e.qZA()),2&l){const r=v.$implicit;e.xp6(1),e.hij(" ",r.value," ")}}let N=(()=>{class l{constructor(r,s,c,J,h){this.fb=r,this.toastr=s,this.config=c,this.dialogRef=J,this.unitTypeService=h,this.unsubscribe=new b.x,this.formGroup=this.initForm(),this.billingCities=[],this.config.data?.data&&this.fillDataToUpdate()}ngOnInit(){}initForm(){return this.fb.group({id:[Number],name:["",[i.kI.required]],description:[""],prefix:[""]})}accept(){this.formGroup.invalid?this.formGroup.markAllAsTouched():this.config.data.data?this.unitTypeService.update(this.formGroup.value).subscribe({next:r=>{this.toastr.success(r.message),this.colesPopup(!0)},error:r=>{this.errors=r.error.errors}}):this.unitTypeService.create(this.formGroup.value).subscribe({next:r=>{this.toastr.success(r.message),this.colesPopup(!0)},error:r=>{this.errors=r.error.errors}})}colesPopup(r){this.dialogRef.close(r)}fillDataToUpdate(){this.formGroup.patchValue({id:this.config.data.data.id,name:this.config.data.data.name,description:this.config.data.data?.description,prefix:this.config.data.data?.prefix})}ngOnDestroy(){this.unsubscribe.next(!0),this.unsubscribe.complete()}}return l.\u0275fac=function(r){return new(r||l)(e.Y36(i.qu),e.Y36(C._W),e.Y36(Z.S),e.Y36(Z.E7),e.Y36(L))},l.\u0275cmp=e.Xpm({type:l,selectors:[["app-new-unit-type"]],decls:25,vars:22,consts:[[1,"main"],[1,"header"],[1,"d-flex","justify-content-between"],[1,"icon"],["src","../assets/Tabs/Icon/Active/inventory-icon.png","alt","img"],[3,"click"],[1,"fa-solid","fa-xmark","pointer","fs-1"],[1,"title"],[3,"formGroup","onSubmit"],["class","text-error",4,"ngFor","ngForOf"],[1,"row"],[1,"col-12"],["text","name","formControlName","name","ngDefaultControl","","placeholder","",3,"type"],["text","description","formControlName","description","ngDefaultControl","","placeholder","",3,"type"],[1,"col-md-12"],["text","prefix","formControlName","prefix","ngDefaultControl","","placeholder","",3,"type"],[1,"row","g-2","my-2"],[1,"col-6"],[3,"text","click"],[1,"text-error"]],template:function(r,s){if(1&r&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"span",3),e._UZ(4,"img",4),e.qZA(),e.TgZ(5,"span",5),e.NdJ("click",function(){return s.colesPopup(!1)}),e._UZ(6,"i",6),e.qZA()(),e.TgZ(7,"p",7),e._uU(8),e.ALo(9,"translate"),e.qZA()(),e.TgZ(10,"app-form",8),e.NdJ("onSubmit",function(){return s.accept()}),e.YNc(11,j,2,1,"div",9),e.ALo(12,"keyvalue"),e.TgZ(13,"div",10)(14,"div",11),e._UZ(15,"app-text",12),e.qZA(),e.TgZ(16,"div",11),e._UZ(17,"app-textarea",13),e.qZA(),e.TgZ(18,"div",14),e._UZ(19,"app-text",15),e.qZA()(),e.TgZ(20,"div",16)(21,"div",17)(22,"app-button",18),e.NdJ("click",function(){return s.colesPopup(!1)}),e.qZA()(),e.TgZ(23,"div",17)(24,"app-button",18),e.NdJ("click",function(){return s.accept()}),e.qZA()()()()()),2&r){let c;e.xp6(8),e.Oqu(e.lcZ(9,18,null!==(c=s.config.header)&&void 0!==c?c:"")),e.xp6(2),e.Q6J("formGroup",s.formGroup),e.xp6(1),e.Q6J("ngForOf",e.lcZ(12,20,s.errors)),e.xp6(4),e.Tol("d-flex flex-column justify-content-between mt-2"),e.Q6J("type","text"),e.xp6(2),e.Tol("d-flex flex-column justify-content-between mt-2"),e.Q6J("type","text"),e.xp6(2),e.Tol("d-flex flex-column justify-content-between mt-2"),e.Q6J("type","prefix"),e.xp6(3),e.Tol("btn-cancel"),e.Q6J("text","Cancel"),e.xp6(2),e.Tol("btn-filter"),e.Q6J("text",null==s.config.data?null:s.config.data.acceptLabel)}},dependencies:[g.sg,I.U,i.Fj,i.JJ,i.JL,i.sg,i.u,t.T,U.R,A.r,g.Nd,F.X$]}),l})();var D=o(1732),S=o(3562);let L=(()=>{class l{constructor(r,s,c){this.http=r,this.dynamicDialog=s,this.toastr=c}getUnitType(r){return this.http.get(f.h.api.get)}openDialogToCreateUnitType(){return this.dynamicDialog.showDialogWithComponent({showHeader:!1,header:"add_unit_type",data:{acceptLabel:"Add",rejectLabel:"Cancel"},width:"500px",height:"auto"},N)}create(r){return this.http.post(f.h.api.create,r)}delete(r){var s=this;return(0,u.Z)(function*(){const c={showHeader:!1,header:"delete",data:{message:"do_you_want_to_delete",acceptLabel:"delete",rejectLabel:"close",data:{...r},name:"name"},width:"300px",height:"164px"};if(yield s.dynamicDialog.confirm(c))try{const h=yield s.http.delete(f.h.api.delete+r.id).toPromise();return s.toastr.success(h.message),h}catch(h){throw s.toastr.error(h.error.message),h}return!1})()}openDialogToUpdateUnitType(r){var s=this;return(0,u.Z)(function*(){const c={showHeader:!1,header:"update_unit_type",data:{acceptLabel:"update",rejectLabel:"Cancel",data:{...r}},width:"480px",height:"auto"};return yield s.dynamicDialog.showDialogWithComponent(c,N)})()}update(r){return this.http.post(f.h.api.update+r.id,r)}}return l.\u0275fac=function(r){return new(r||l)(e.LFG(D.O),e.LFG(S.U),e.LFG(C._W))},l.\u0275prov=e.Yz7({token:l,factory:l.\u0275fac,providedIn:"root"}),l})()},9773:(T,m,o)=>{o.d(m,{R:()=>e});var u=o(9360),f=o(8251),i=o(4829),b=o(2420);function e(C){return(0,u.e)((Z,g)=>{(0,i.Xf)(C).subscribe((0,f.x)(g,()=>g.complete(),b.Z)),!g.closed&&Z.subscribe(g)})}}}]);