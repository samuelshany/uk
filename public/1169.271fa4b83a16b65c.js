"use strict";(self.webpackChunkkey=self.webpackChunkkey||[]).push([[1169],{68:(g,c,a)=>{a.d(c,{a:()=>u});const u={api:{create:"account/create",get:"account",getNotParent:"not-parents/accounts",getParent:"parents/accounts",getById:"account/",update:"account/update/",delete:"account/",exportExample:"account/export/example",exportExampleSub:"account/export/example/sub",exportCvs:"account/export/cvs",exportPdf:"account/export/pdf",importAccount:"account/import",importAccountSub:"account/import/sub"},page:{}}},6017:(g,c,a)=>{a.d(c,{Y:()=>u});const u={api:{create:"warehouse/create",get:"warehouse",getById:"warehouse/",update:"warehouse/update/",delete:"warehouse/",exportCvs:"warehouse/export/cvs",exportPdf:"warehouse/export/pdf",importAccount:"warehouse/import",getCurrencies:"currency",getAccounts:"account",getCountries:"address/country",getStates:"address/state",getCities:"address/city",getUsers:"user",getCountryById:"address/country/",getStateById:"address/state/",getCityById:"address/city/"},page:{list:"",update:"",create:"",view:"warehouse/view/:id"}}},1169:(g,c,a)=>{a.d(c,{l:()=>C});var u=a(5861),l=a(6017),n=a(6223),y=a(8645),h=a(9773),Z=a(68),e=a(9291),f=a(8763),m=a(5118),x=a(6814),w=a(8614),T=a(3838),v=a(1771),b=a(4779),N=a(3999);function A(r,i){if(1&r&&(e.TgZ(0,"p",29),e._uU(1),e.qZA()),2&r){const t=e.oxw();e.xp6(1),e.Oqu(null==t.errors?null:t.errors.financial_period[0])}}function q(r,i){if(1&r&&(e.TgZ(0,"p",30),e._uU(1),e.qZA()),2&r){const t=e.oxw();e.xp6(1),e.Oqu(null==t.errors?null:t.errors.name[0])}}function I(r,i){if(1&r&&(e.TgZ(0,"p",30),e._uU(1),e.qZA()),2&r){const t=e.oxw();e.xp6(1),e.Oqu(null==t.errors?null:t.errors.account_id[0])}}function W(r,i){if(1&r&&(e.TgZ(0,"p",30),e._uU(1),e.qZA()),2&r){const t=e.oxw();e.xp6(1),e.Oqu(null==t.errors?null:t.errors.description[0])}}function J(r,i){if(1&r&&(e.TgZ(0,"p",30),e._uU(1),e.qZA()),2&r){const t=e.oxw();e.xp6(1),e.Oqu(null==t.errors?null:t.errors.assigned_id[0])}}function U(r,i){if(1&r&&(e.TgZ(0,"p",30),e._uU(1),e.qZA()),2&r){const t=e.oxw();e.xp6(1),e.Oqu(null==t.errors?null:t.errors.address_name[0])}}function Y(r,i){if(1&r&&(e.TgZ(0,"p",30),e._uU(1),e.qZA()),2&r){const t=e.oxw();e.xp6(1),e.Oqu(null==t.errors?null:t.errors.address_phone[0])}}function S(r,i){if(1&r&&(e.TgZ(0,"p",30),e._uU(1),e.qZA()),2&r){const t=e.oxw();e.xp6(1),e.Oqu(null==t.errors?null:t.errors.address[0])}}function Q(r,i){if(1&r&&(e.TgZ(0,"p",30),e._uU(1),e.qZA()),2&r){const t=e.oxw();e.xp6(1),e.Oqu(null==t.errors?null:t.errors.country_id[0])}}function L(r,i){if(1&r&&(e.TgZ(0,"p",30),e._uU(1),e.qZA()),2&r){const t=e.oxw();e.xp6(1),e.Oqu(null==t.errors?null:t.errors.state_id[0])}}function D(r,i){if(1&r&&(e.TgZ(0,"p",30),e._uU(1),e.qZA()),2&r){const t=e.oxw();e.xp6(1),e.Oqu(null==t.errors?null:t.errors.city_id[0])}}function O(r,i){if(1&r&&(e.TgZ(0,"p",30),e._uU(1),e.qZA()),2&r){const t=e.oxw();e.xp6(1),e.Oqu(null==t.errors?null:t.errors.zip_code[0])}}let _=(()=>{class r{constructor(t,o,s,d,p){this.fb=t,this.toastr=o,this.config=s,this.dialogRef=d,this.WarehouseService=p,this.unsubscribe=new y.x,this.formGroup=this.initForm(),this.accountsConfig=Z.a,this.accounts=[],this.countries=[],this.states=[],this.cities=[],this.users=[],this.config.data?.data&&this.fillDataToUpdate()}ngOnInit(){this.WarehouseService.getUsers().pipe((0,h.R)(this.unsubscribe)).subscribe({next:t=>{this.users=t.data}}),this.WarehouseService.getCountries().pipe((0,h.R)(this.unsubscribe)).subscribe({next:t=>{this.countries=t.data,this.config.data?.data&&(this.states=this.countries.filter(o=>o.id==this.config.data.data.address?.country_id)[0]?.states)}}),this.config.data?.data&&this.getCities(this.config.data.data.address?.state_id)}initForm(){return this.fb.group({id:[Number],name:["",[n.kI.required,n.kI.pattern("^[\u0621-\u064a\u0660-\u0669a-zA-Z 0-9 ]{2,}$")]],description:["",[n.kI.required]],assigned_id:["",[n.kI.required]],address_phone:["",[n.kI.pattern("^[0-9]{5,20}$")]],address_name:[""],address:["",[n.kI.required]],country_id:["",[n.kI.required]],state_id:["",[n.kI.required]],city_id:["",[n.kI.required]],zip_code:["",[n.kI.required]],account_id:["",[n.kI.required]]})}accept(){this.formGroup.invalid?this.formGroup.markAllAsTouched():this.config.data.data?this.WarehouseService.update(this.formGroup.value).subscribe({next:t=>{this.toastr.success(t.message),this.closePopup(!0)},error:t=>{this.errors=t.error.errors}}):this.WarehouseService.create(this.formGroup.value).subscribe({next:t=>{this.toastr.success(t.message),this.closePopup(!0)},error:t=>{this.errors=t.error.errors}})}closePopup(t){this.dialogRef.close(t)}getState(t){this.formGroup.patchValue({state_id:[""],city_id:[""]}),this.states=this.countries.filter(o=>o.id==t)[0]?.states}getCities(t){t>0&&this.WarehouseService.getStateById(t).pipe((0,h.R)(this.unsubscribe)).subscribe({next:o=>{this.cities=o?.data?.cities}})}fillDataToUpdate(){this.formGroup.patchValue({id:this.config.data.data.id,name:this.config.data.data.name,description:this.config.data.data.description,assigned_id:this.config.data.data.assigned_id,address_phone:this.config.data.data.address?.phone,address_name:this.config.data.data.address?.name,address:this.config.data.data.address.address,country_id:this.config.data.data.address.country_id,state_id:this.config.data.data.address.state_id,city_id:this.config.data.data.address.city_id,zip_code:this.config.data.data.address.zip_code,account_id:this.config.data.data.account_id})}ngOnDestroy(){this.unsubscribe.next(!0),this.unsubscribe.complete()}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(n.qu),e.Y36(f._W),e.Y36(m.S),e.Y36(m.E7),e.Y36(C))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-new-warehouse"]],decls:55,vars:77,consts:[[1,"main"],[1,"header"],[1,"d-flex","justify-content-between"],[1,"icon"],["src","../assets/Tabs/Icon/Active/inventory-icon.png","alt","img"],[3,"click"],[1,"fa-solid","fa-xmark","pointer","fs-1"],[1,"title"],[3,"formGroup","onSubmit"],["class","text-error",4,"ngIf"],[1,"row"],[1,"col-12"],["text","name","formControlName","name","ngDefaultControl","","placeholder","",3,"type"],["class","messageError",4,"ngIf"],["placeholder","select","optionLabel","name_code","optionValue","id","formControlName","account_id",3,"filterBy","filter","text","request"],[1,"col-12","mt-3"],["text","description","formControlName","description","ngDefaultControl","","placeholder",""],["ngDefaultControl","","formControlName","assigned_id",3,"text","data","optionLabel","optionValue","placeholder"],[1,"sup-title","mt-3"],["text","name","formControlName","address_name","ngDefaultControl","","placeholder","",3,"type"],["ngDefaultControl","","placeholder","","formControlName","address_phone",1,"d-block",3,"type","text"],["text","address","formControlName","address","ngDefaultControl","","placeholder","",3,"type"],["ngDefaultControl","","formControlName","country_id",3,"text","data","optionLabel","optionValue","placeholder","ngModelChange"],["ngDefaultControl","","formControlName","state_id",3,"text","data","optionLabel","optionValue","placeholder","ngModelChange"],["ngDefaultControl","","formControlName","city_id",3,"text","data","optionLabel","optionValue","placeholder"],["text","zip_code","formControlName","zip_code","ngDefaultControl","","placeholder","",3,"type"],[1,"row","g-2","my-2"],[1,"col-6"],[3,"text","click"],[1,"text-error"],[1,"messageError"]],template:function(t,o){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"span",3),e._UZ(4,"img",4),e.qZA(),e.TgZ(5,"span",5),e.NdJ("click",function(){return o.closePopup(!1)}),e._UZ(6,"i",6),e.qZA()(),e.TgZ(7,"p",7),e._uU(8),e.ALo(9,"titlecase"),e.ALo(10,"translate"),e.qZA()(),e.TgZ(11,"app-form",8),e.NdJ("onSubmit",function(){return o.accept()}),e.YNc(12,A,2,1,"p",9),e.TgZ(13,"div",10)(14,"div",11),e._UZ(15,"app-text",12),e.YNc(16,q,2,1,"p",13),e.qZA(),e.TgZ(17,"div",11),e._UZ(18,"app-dropdown",14),e.YNc(19,I,2,1,"p",13),e.qZA(),e.TgZ(20,"div",15),e._UZ(21,"app-text",16),e.YNc(22,W,2,1,"p",13),e.qZA(),e.TgZ(23,"div",15),e._UZ(24,"app-dropdown",17),e.YNc(25,J,2,1,"p",13),e.qZA(),e.TgZ(26,"p",18),e._uU(27),e.ALo(28,"translate"),e.qZA(),e.TgZ(29,"div",15),e._UZ(30,"app-text",19),e.YNc(31,U,2,1,"p",13),e.qZA(),e.TgZ(32,"div",15),e._UZ(33,"app-text",20),e.YNc(34,Y,2,1,"p",13),e.qZA(),e.TgZ(35,"div",15),e._UZ(36,"app-text",21),e.YNc(37,S,2,1,"p",13),e.qZA(),e.TgZ(38,"div",15)(39,"app-dropdown",22),e.NdJ("ngModelChange",function(d){return o.getState(d)}),e.qZA(),e.YNc(40,Q,2,1,"p",13),e.qZA(),e.TgZ(41,"div",15)(42,"app-dropdown",23),e.NdJ("ngModelChange",function(d){return o.getCities(d)}),e.qZA(),e.YNc(43,L,2,1,"p",13),e.qZA(),e.TgZ(44,"div",15),e._UZ(45,"app-dropdown",24),e.YNc(46,D,2,1,"p",13),e.qZA(),e.TgZ(47,"div",15),e._UZ(48,"app-text",25),e.YNc(49,O,2,1,"p",13),e.qZA()(),e.TgZ(50,"div",26)(51,"div",27)(52,"app-button",28),e.NdJ("click",function(){return o.closePopup(!1)}),e.qZA()(),e.TgZ(53,"div",27)(54,"app-button",28),e.NdJ("click",function(){return o.accept()}),e.qZA()()()()()),2&t){let s;e.xp6(8),e.Oqu(e.lcZ(9,71,e.lcZ(10,73,null!==(s=o.config.header)&&void 0!==s?s:""))),e.xp6(3),e.Q6J("formGroup",o.formGroup),e.xp6(1),e.Q6J("ngIf",null==o.errors?null:o.errors.financial_period),e.xp6(3),e.Tol("d-flex flex-column justify-content-between mt-2"),e.Q6J("type","text"),e.xp6(1),e.Q6J("ngIf",null==o.errors?null:o.errors.name),e.xp6(2),e.Tol(""),e.Q6J("filterBy","name_code")("filter",!0)("text","account_id")("request",o.accountsConfig.api.getNotParent),e.xp6(1),e.Q6J("ngIf",null==o.errors?null:o.errors.account_id),e.xp6(2),e.Tol("d-flex flex-column justify-content-between"),e.xp6(1),e.Q6J("ngIf",null==o.errors?null:o.errors.description),e.xp6(2),e.Tol("d-flex flex-column justify-content-between"),e.Q6J("text","assigned_user")("data",o.users)("optionLabel","name")("optionValue","id")("placeholder","select"),e.xp6(1),e.Q6J("ngIf",null==o.errors?null:o.errors.assigned_id),e.xp6(2),e.Oqu(e.lcZ(28,75,"address")),e.xp6(3),e.Tol("d-flex flex-column justify-content-between"),e.Q6J("type","text"),e.xp6(1),e.Q6J("ngIf",null==o.errors?null:o.errors.address_name),e.xp6(2),e.Q6J("type","text")("text","phone "),e.xp6(1),e.Q6J("ngIf",null==o.errors?null:o.errors.address_phone),e.xp6(2),e.Tol("d-flex flex-column justify-content-between"),e.Q6J("type","text"),e.xp6(1),e.Q6J("ngIf",null==o.errors?null:o.errors.address),e.xp6(2),e.Tol("d-flex flex-column justify-content-between"),e.Q6J("text","country")("data",o.countries)("optionLabel","name")("optionValue","id")("placeholder","select"),e.xp6(1),e.Q6J("ngIf",null==o.errors?null:o.errors.country_id),e.xp6(2),e.Tol("d-flex flex-column justify-content-between"),e.Q6J("text","state")("data",o.states)("optionLabel","name")("optionValue","id")("placeholder","select"),e.xp6(1),e.Q6J("ngIf",null==o.errors?null:o.errors.state_id),e.xp6(2),e.Tol("d-flex flex-column justify-content-between"),e.Q6J("text","city")("data",o.cities)("optionLabel","name")("optionValue","id")("placeholder","select"),e.xp6(1),e.Q6J("ngIf",null==o.errors?null:o.errors.city_id),e.xp6(2),e.Tol("d-flex flex-column justify-content-between"),e.Q6J("type","text"),e.xp6(1),e.Q6J("ngIf",null==o.errors?null:o.errors.zip_code),e.xp6(3),e.Tol("btn-cancel"),e.Q6J("text","Cancel"),e.xp6(2),e.Tol("btn-filter"),e.Q6J("text",null==o.config.data?null:o.config.data.acceptLabel)}},dependencies:[x.O5,w.T,T.J,v.U,n.Fj,n.JJ,n.JL,n.sg,n.u,b.r,x.rS,N.X$]}),r})();var k=a(1732),j=a(3562);let C=(()=>{class r{constructor(t,o,s){this.http=t,this.dynamicDialog=o,this.toastr=s}getWareHouse(t){return this.http.get(l.Y.api.get)}getCurrencies(t){return this.http.get(l.Y.api.getCurrencies)}getCountries(t){return this.http.get(l.Y.api.getCountries)}getStates(t){return this.http.get(l.Y.api.getStates)}getCities(t){return this.http.get(l.Y.api.getCities)}getCountryById(t){return this.http.get(l.Y.api.getCountryById+t)}getStateById(t){return this.http.get(l.Y.api.getStateById+t)}getCityById(t){return this.http.get(l.Y.api.getCityById+t)}getUsers(t){return this.http.get(l.Y.api.getUsers)}openDialogToCreate(){return this.dynamicDialog.showDialogWithComponent({showHeader:!1,header:"add_warehouse",data:{acceptLabel:"Add",rejectLabel:"Cancel"},width:"500px",height:"auto"},_)}create(t){return this.http.post(l.Y.api.create,t)}delete(t){var o=this;return(0,u.Z)(function*(){const s={showHeader:!1,header:"delete",data:{message:"do_you_want_to_delete",acceptLabel:"delete",rejectLabel:"close",data:{...t},name:"name"},width:"300px",height:"164px"};if(yield o.dynamicDialog.confirm(s))try{const p=yield o.http.delete(l.Y.api.delete+t.id).toPromise();return o.toastr.success(p.message),p}catch(p){throw o.toastr.error(p.error.message),p}return!1})()}openDialogToUpdate(t){var o=this;return(0,u.Z)(function*(){const s={showHeader:!1,header:"update_warehouse",data:{acceptLabel:"update",rejectLabel:"Cancel",data:{...t}},width:"480px",height:"auto"};return yield o.dynamicDialog.showDialogWithComponent(s,_)})()}update(t){return this.http.post(l.Y.api.update+t.id,t)}}return r.\u0275fac=function(t){return new(t||r)(e.LFG(k.O),e.LFG(j.U),e.LFG(f._W))},r.\u0275prov=e.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})()}}]);